{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\n\r\nexport function middleware(request: NextRequest) {\r\n  const { pathname, searchParams } = request.nextUrl;\r\n\r\n  // EÄŸer root path (/) ve code parametresi varsa\r\n  if (pathname === '/') {\r\n    const code = searchParams.get('code');\r\n    const table = searchParams.get('table');\r\n\r\n    if (code) {\r\n      // ðŸ”’ GÃœVENLÄ°K: Masa kodunu cookie'ye kaydet ve URL'den gizle\r\n      const url = request.nextUrl.clone();\r\n      url.pathname = `/${code}`;\r\n\r\n      // code parametresini kaldÄ±r\r\n      url.searchParams.delete('code');\r\n\r\n      // table parametresini cookie'ye kaydet ve URL'den kaldÄ±r\r\n      const response = NextResponse.rewrite(url);\r\n\r\n      if (table) {\r\n        // ðŸ”’ Yeni masa kodu geldiÄŸinde eski cookie'yi sil ve yenisini yaz\r\n        // Bu ÅŸekilde farklÄ± mÃ¼ÅŸteriler karÄ±ÅŸmaz\r\n        response.cookies.set('tableCode', table, {\r\n          httpOnly: false, // Frontend'den okunabilir olmalÄ± (sipariÅŸ gÃ¶nderirken gerekli)\r\n          secure: process.env.NODE_ENV === 'production',\r\n          sameSite: 'lax',\r\n          maxAge: 60 * 20, // 20 dakika (sipariÅŸ verdikten sonra otomatik silinecek)\r\n          path: '/'\r\n        });\r\n\r\n        // Table parametresini URL'den kaldÄ±r (kullanÄ±cÄ± gÃ¶rmeyecek)\r\n        url.searchParams.delete('table');\r\n      } else {\r\n        // Table parametresi yoksa eski cookie'yi temizle\r\n        // (BaÅŸka bir QR kod okutulmuÅŸ olabilir)\r\n        const existingCookie = request.cookies.get('tableCode');\r\n        if (existingCookie) {\r\n          response.cookies.delete('tableCode');\r\n        }\r\n      }\r\n\r\n      return response;\r\n    }\r\n  }\r\n\r\n  return NextResponse.next();\r\n}\r\n\r\nexport const config = {\r\n  matcher: '/',\r\n};\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAEO,SAAS,WAAW,OAAoB;IAC7C,MAAM,EAAE,QAAQ,EAAE,YAAY,EAAE,GAAG,QAAQ,OAAO;IAElD,+CAA+C;IAC/C,IAAI,aAAa,KAAK;QACpB,MAAM,OAAO,aAAa,GAAG,CAAC;QAC9B,MAAM,QAAQ,aAAa,GAAG,CAAC;QAE/B,IAAI,MAAM;YACR,6DAA6D;YAC7D,MAAM,MAAM,QAAQ,OAAO,CAAC,KAAK;YACjC,IAAI,QAAQ,GAAG,CAAC,CAAC,EAAE,MAAM;YAEzB,4BAA4B;YAC5B,IAAI,YAAY,CAAC,MAAM,CAAC;YAExB,yDAAyD;YACzD,MAAM,WAAW,gMAAY,CAAC,OAAO,CAAC;YAEtC,IAAI,OAAO;gBACT,kEAAkE;gBAClE,wCAAwC;gBACxC,SAAS,OAAO,CAAC,GAAG,CAAC,aAAa,OAAO;oBACvC,UAAU;oBACV,QAAQ,oDAAyB;oBACjC,UAAU;oBACV,QAAQ,KAAK;oBACb,MAAM;gBACR;gBAEA,4DAA4D;gBAC5D,IAAI,YAAY,CAAC,MAAM,CAAC;YAC1B,OAAO;gBACL,iDAAiD;gBACjD,wCAAwC;gBACxC,MAAM,iBAAiB,QAAQ,OAAO,CAAC,GAAG,CAAC;gBAC3C,IAAI,gBAAgB;oBAClB,SAAS,OAAO,CAAC,MAAM,CAAC;gBAC1B;YACF;YAEA,OAAO;QACT;IACF;IAEA,OAAO,gMAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;AACX"}}]
}