{"version":3,"sources":["../../../../app/%5Bcode%5D/page.tsx","../../../../hooks/useSignalR.ts","../../../../components/layout/SplashScreen.tsx","../../../../components/layout/BannerModal.tsx","../../../../components/layout/LoadingScreen.tsx","../../../../components/layout/LanguageSelector.tsx","../../../../components/home/tabs/ImageSliderTab.tsx","../../../../components/home/tabs/VideoTab.tsx","../../../../components/home/tabs/CampaignTab.tsx","../../../../utils/language.ts","../../../../components/home/tabs/ProductsTab.tsx","../../../../components/home/HeaderTabs.tsx","../../../../components/home/CategoryGrid.tsx","../../../../components/layout/BottomNavBar.tsx","../../../../utils/allergens.ts","../../../../components/common/AllergenWarning.tsx","../../../../components/modals/ProductListModal.tsx","../../../../components/modals/ProductDetailModal.tsx","../../../../lib/i18n.ts","../../../../lib/gameApi.ts","../../../../components/games/Game2048.tsx","../../../../components/games/RockPaperScissors.tsx","../../../../components/games/Quiz.tsx","../../../../components/modals/GameModal.tsx","../../../../components/cart/CartSidebar.tsx","../../../../components/profile/ProfileSidebar.tsx","../../../../hooks/useChatAI.ts","../../../../components/ai/AIChatSidebar.tsx","../../../../components/modals/SuggestionModal.tsx","../../../../components/notifications/EmailVerifiedPopup.tsx","../../../../components/modals/WaiterCallRateLimitModal.tsx","../../../../components/common/ImagePreloadContainer.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { useParams, useSearchParams } from 'next/navigation';\r\nimport { useMenu } from '@/contexts/MenuContext';\r\nimport { useTable } from '@/contexts/TableContext';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\nimport { useAuth } from '@/contexts/UserContext';\r\nimport { useSignalR } from '@/hooks/useSignalR';\r\nimport SplashScreen from '@/components/layout/SplashScreen';\r\nimport BannerModal from '@/components/layout/BannerModal';\r\nimport LoadingScreen from '@/components/layout/LoadingScreen';\r\nimport LanguageSelector from '@/components/layout/LanguageSelector';\r\nimport HeaderTabs from '@/components/home/HeaderTabs';\r\nimport CategoryGrid from '@/components/home/CategoryGrid';\r\nimport BottomNavBar from '@/components/layout/BottomNavBar';\r\nimport ProductListModal from '@/components/modals/ProductListModal';\r\nimport ProductDetailModal from '@/components/modals/ProductDetailModal';\r\nimport GameModal from '@/components/modals/GameModal';\r\nimport CartSidebar from '@/components/cart/CartSidebar';\r\nimport ProfileSidebar from '@/components/profile/ProfileSidebar';\r\nimport AIChatSidebar from '@/components/ai/AIChatSidebar';\r\nimport SuggestionModal from '@/components/modals/SuggestionModal';\r\nimport EmailVerifiedPopup from '@/components/notifications/EmailVerifiedPopup';\r\nimport WaiterCallRateLimitModal from '@/components/modals/WaiterCallRateLimitModal';\r\nimport ImagePreloadContainer from '@/components/common/ImagePreloadContainer';\r\nimport type { MenuDto, CustomerInfoResponse, CategoryDto } from '@/types/api';\r\nimport { api } from '@/lib/api';\r\n\r\nexport default function CustomerMenu() {\r\n  const params = useParams();\r\n  const searchParams = useSearchParams();\r\n  const code = params.code as string;\r\n  const tableParam = searchParams.get('table');\r\n  const sessionParam = searchParams.get('session');\r\n  const joinRoomParam = searchParams.get('joinRoom');\r\n  const joinBackgammonParam = searchParams.get('joinBackgammon');\r\n\r\n  const { isTableMode, isSelfService, canCallWaiter, tableId: tableContextId } = useTable();\r\n  const { language } = useLanguage();\r\n  const { currentUser } = useAuth();\r\n\r\n  const {\r\n    setMenuData,\r\n    setCustomerData: setCustomerDataContext,\r\n    setCategoriesData: setCategoriesDataContext,\r\n    setCustomerCode,\r\n    setTableId,\r\n    tableId,\r\n    setProductTokenSettings,\r\n    setUserTokenBalance,\r\n    isGameModalOpen,\r\n    activeGame,\r\n    openGameModal,\r\n    closeProductListModal,\r\n    closeProductDetailModal,\r\n    closeGameModal,\r\n    setPendingJoinRoomId,\r\n    isProfileOpen,\r\n    openProfile,\r\n    closeProfile\r\n  } = useMenu();\r\n\r\n  // Table context state tracking\r\n  useEffect(() => {\r\n    // Context state is ready\r\n  }, [isTableMode, isSelfService, canCallWaiter, tableContextId, tableParam, sessionParam]);\r\n\r\n  const [showSplash, setShowSplash] = useState(true);\r\n  const [showBanner, setShowBanner] = useState(false);\r\n  const [menuDataLocal, setMenuDataLocal] = useState<MenuDto | null>(null);\r\n  const [customerData, setCustomerData] = useState<CustomerInfoResponse | null>(null);\r\n  const [categoriesData, setCategoriesData] = useState<CategoryDto[]>([]);\r\n  const [initialLoading, setInitialLoading] = useState(true); // Customer data i√ßin\r\n  const [dataLoading, setDataLoading] = useState(false); // Menu/categories i√ßin\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isCartOpen, setIsCartOpen] = useState(false);\r\n  const [isAIChatOpen, setIsAIChatOpen] = useState(false);\r\n  const [isSuggestionModalOpen, setIsSuggestionModalOpen] = useState(false);\r\n  const [rateLimitModal, setRateLimitModal] = useState<{\r\n    isOpen: boolean;\r\n    errorMessage: string;\r\n    remainingSeconds: number;\r\n    isRegistered: boolean;\r\n  }>({\r\n    isOpen: false,\r\n    errorMessage: '',\r\n    remainingSeconds: 0,\r\n    isRegistered: false,\r\n  });\r\n\r\n  // üîó SignalR: Token balance g√ºncelleme callback'i\r\n  const handleTokenBalanceUpdated = useCallback((data: { userId: number; currentTokens: number; message: string }) => {\r\n    // Kullanƒ±cƒ±nƒ±n token'ƒ±nƒ± kontrol et\r\n    const userData = localStorage.getItem('userData');\r\n    if (userData) {\r\n      const user = JSON.parse(userData);\r\n      const currentUserId = user.id || user.userId || user.Id;\r\n\r\n      if (currentUserId && currentUserId === data.userId) {\r\n        // Context'teki token balance'ƒ± g√ºncelle\r\n        setUserTokenBalance(data.currentTokens);\r\n\r\n        // Bildirim g√∂ster\r\n        if (data.message) {\r\n          // Custom event dispatch et - CartSidebar g√ºncellensin\r\n          window.dispatchEvent(new CustomEvent('tokenBalanceUpdated', {\r\n            detail: { balance: data.currentTokens, message: data.message }\r\n          }));\r\n        }\r\n      }\r\n    }\r\n  }, [setUserTokenBalance]);\r\n\r\n  // üîó SignalR baƒülantƒ±sƒ± - customerData y√ºklendikten sonra\r\n  useSignalR({\r\n    customerId: customerData?.customer.id,\r\n    onTokenBalanceUpdated: handleTokenBalanceUpdated,\r\n    enabled: !!customerData?.customer.id,\r\n  });\r\n\r\n  useEffect(() => {\r\n    // URL'den table parametresini context'e set et\r\n    if (tableParam) {\r\n      setTableId(tableParam);\r\n    }\r\n  }, [tableParam, setTableId]);\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      try {\r\n        // 1. √ñnce customer data'yƒ± al (logo i√ßin hƒ±zlƒ±)\r\n        setInitialLoading(true);\r\n        setCustomerCode(code); // Customer code'u context'e kaydet\r\n\r\n        const customerResponse = await fetch(`/api/customer/${code}`);\r\n\r\n        if (!customerResponse.ok) {\r\n          throw new Error('M√º≈üteri bilgisi y√ºklenemedi');\r\n        }\r\n\r\n        const customerInfo = await customerResponse.json();\r\n        setCustomerData(customerInfo);\r\n        setCustomerDataContext(customerInfo); // Context'e de set et\r\n        setInitialLoading(false); // Logo artƒ±k g√∂sterilebilir\r\n\r\n        // 1.5. Table parametresi varsa, masa doƒürulama yap ve ger√ßek masa adƒ±nƒ± kaydet\r\n        if (tableParam && customerInfo.customer.id) {\r\n          const tablesResponse = await fetch(`/api/tables/${customerInfo.customer.id}`);\r\n          if (tablesResponse.ok) {\r\n            const tables = await tablesResponse.json();\r\n            const matchedTable = tables.find(\r\n              (t: any) => t.secureId?.toLowerCase() === tableParam.toLowerCase() ||\r\n                         t.name?.toLowerCase() === tableParam.toLowerCase()\r\n            );\r\n\r\n            if (!matchedTable) {\r\n              // Ge√ßersiz masa kodu - table parametresi olmadan y√∂nlendir\r\n              window.location.href = `/${code}`;\r\n              return;\r\n            }\r\n\r\n            // Ger√ßek masa adƒ±nƒ± localStorage'a kaydet (sipari≈ü √∂zetinde g√∂stermek i√ßin)\r\n            const tableName = matchedTable.name || matchedTable.tableName || tableParam;\r\n            localStorage.setItem('currentTableName', tableName);\r\n          }\r\n        }\r\n\r\n        // 2. Sonra menu ve categories'i paralel al\r\n        setDataLoading(true);\r\n        const [menuResponse, categoriesResponse] = await Promise.all([\r\n          fetch(`/api/menu/${code}`),\r\n          fetch(`/api/categories/${code}`)\r\n        ]);\r\n\r\n        if (!menuResponse.ok || !categoriesResponse.ok) {\r\n          throw new Error('Veri y√ºklenemedi');\r\n        }\r\n\r\n        const [menuData, categoriesInfo] = await Promise.all([\r\n          menuResponse.json(),\r\n          categoriesResponse.json()\r\n        ]);\r\n\r\n        setMenuDataLocal(menuData);\r\n        setCategoriesData(categoriesInfo);\r\n        setMenuData(menuData); // Also set in context\r\n        setCategoriesDataContext(categoriesInfo); // Set categories in context\r\n\r\n        // 3. Token settings'i y√ºkle (sadece masa kodu varsa)\r\n        if (tableParam) {\r\n          try {\r\n            const tokenResponse = await fetch(`/api/token-settings/${code}`);\r\n            if (tokenResponse.ok) {\r\n              const tokenData = await tokenResponse.json();\r\n              const tokenMap: Record<number, any> = {};\r\n              tokenData.settings.forEach((setting: any) => {\r\n                // Hem productId hem sambaProductId ile e≈üle≈ütir\r\n                if (setting.productId) {\r\n                  tokenMap[setting.productId] = setting;\r\n                }\r\n                if (setting.sambaProductId) {\r\n                  tokenMap[setting.sambaProductId] = setting;\r\n                }\r\n              });\r\n              setProductTokenSettings(tokenMap);\r\n            }\r\n          } catch (tokenErr) {\r\n            console.error('Token settings load error:', tokenErr);\r\n            // Token hatasƒ± ana akƒ±≈üƒ± engellemesin\r\n          }\r\n        }\r\n\r\n        setDataLoading(false);\r\n        setError(null);\r\n      } catch (err) {\r\n        console.error('Data fetch error:', err);\r\n        setError(err instanceof Error ? err.message : 'Bir hata olu≈ütu');\r\n        setInitialLoading(false);\r\n        setDataLoading(false);\r\n      }\r\n    }\r\n\r\n    if (code) {\r\n      fetchData();\r\n    }\r\n  }, [code, setMenuData]);\r\n\r\n  // Banner'ƒ± splash ile beraber hazƒ±rla (z-index ile arka planda)\r\n  useEffect(() => {\r\n    if (!dataLoading && customerData?.customer.showBanner && customerData?.customer.banner) {\r\n      setShowBanner(true);\r\n    }\r\n  }, [dataLoading, customerData]);\r\n\r\n  // joinRoom parametresi kontrol√º - link ile gelen kullanƒ±cƒ±lar i√ßin\r\n  useEffect(() => {\r\n    // Splash ekranƒ± kapandƒ±ktan ve data y√ºklendikten sonra kontrol et\r\n    if (showSplash || initialLoading || !joinRoomParam) return;\r\n\r\n    // ========================================\r\n    // üîß TEST MODU: Authentication kontrol√º bypass\r\n    // ========================================\r\n    // const userNickname = currentUser?.nickName || currentUser?.nickname;\r\n    // if (!userNickname) {\r\n    //   // Giri≈ü yapmamƒ±≈ü - profil sidebar'ƒ± a√ß ve pending room ID'yi kaydet\r\n    //   setPendingJoinRoomId(joinRoomParam);\r\n    //   alert('Bu oyuna katƒ±lmak i√ßin √∂nce giri≈ü yapmalƒ±sƒ±nƒ±z.');\r\n    //   openProfile();\r\n    // } else {\r\n    //   // Giri≈ü yapmƒ±≈ü - pending room ID'yi kaydet ve oyun modalƒ±nƒ± a√ß\r\n    //   setPendingJoinRoomId(joinRoomParam);\r\n    //   openGameModal('okey');\r\n\r\n    //   // URL'den joinRoom parametresini temizle\r\n    //   const url = new URL(window.location.href);\r\n    //   url.searchParams.delete('joinRoom');\r\n    //   window.history.replaceState({}, '', url.toString());\r\n    // }\r\n\r\n    // TEST: Direkt pending room ID'yi kaydet ve oyun modalƒ±nƒ± a√ß\r\n    setPendingJoinRoomId(joinRoomParam);\r\n    openGameModal('okey');\r\n\r\n    // URL'den joinRoom parametresini temizle\r\n    const url = new URL(window.location.href);\r\n    url.searchParams.delete('joinRoom');\r\n    window.history.replaceState({}, '', url.toString());\r\n    // ========================================\r\n  }, [showSplash, initialLoading, joinRoomParam, currentUser, setPendingJoinRoomId, openProfile, openGameModal]);\r\n\r\n  // joinBackgammon parametresi kontrol√º - Tavla link ile gelen kullanƒ±cƒ±lar i√ßin\r\n  useEffect(() => {\r\n    // Splash ekranƒ± kapandƒ±ktan ve data y√ºklendikten sonra kontrol et\r\n    if (showSplash || initialLoading || !joinBackgammonParam) return;\r\n\r\n    // TEST: Direkt pending room ID'yi kaydet ve Tavla oyun modalƒ±nƒ± a√ß\r\n    setPendingJoinRoomId(joinBackgammonParam);\r\n    openGameModal('backgammon');\r\n\r\n    // URL'den joinBackgammon parametresini temizle\r\n    const url = new URL(window.location.href);\r\n    url.searchParams.delete('joinBackgammon');\r\n    window.history.replaceState({}, '', url.toString());\r\n  }, [showSplash, initialLoading, joinBackgammonParam, currentUser, setPendingJoinRoomId, openProfile, openGameModal]);\r\n\r\n  const handleSplashComplete = () => {\r\n    setShowSplash(false);\r\n  };\r\n\r\n  const handleImagesLoaded = () => {\r\n    // G√∂rseller arka planda y√ºklendi\r\n  };\r\n\r\n  const handleBannerClose = () => {\r\n    setShowBanner(false);\r\n  };\r\n\r\n  const handleWaiterCall = async () => {\r\n    if (!tableId) {\r\n      alert('Masa bilgisi bulunamadƒ±. L√ºtfen QR kodu tekrar okutun.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Get user ID if logged in\r\n      const userData = localStorage.getItem('userData');\r\n      const endUserId = userData ? JSON.parse(userData).id : null;\r\n\r\n      const response = await fetch('/api/waiter-call', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          CustomerCode: code,\r\n          TableName: tableId,\r\n          Message: 'Garson √ßaƒürƒ±sƒ±',\r\n          CallType: 'General',\r\n          EndUserId: endUserId,\r\n        }),\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (response.ok && result.success) {\r\n        showWaiterCallSuccess();\r\n      } else {\r\n        // Rate limit error check\r\n        if (result.isRateLimited) {\r\n          showRateLimitError(result.error, result.remainingSeconds, result.isRegistered || false);\r\n        } else {\r\n          throw new Error(result.error || 'Garson √ßaƒüƒ±rma i≈ülemi ba≈üarƒ±sƒ±z oldu.');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Garson √ßaƒüƒ±rma hatasƒ±:', error);\r\n      alert(error instanceof Error ? error.message : 'Garson √ßaƒüƒ±rma i≈ülemi ba≈üarƒ±sƒ±z oldu. L√ºtfen tekrar deneyin.');\r\n    }\r\n  };\r\n\r\n  const showWaiterCallSuccess = () => {\r\n    const message = document.createElement('div');\r\n    message.innerHTML = `\r\n      <div style=\"\r\n        position: fixed;\r\n        top: 50%;\r\n        left: 50%;\r\n        transform: translate(-50%, -50%);\r\n        background: rgba(76, 175, 80, 0.95);\r\n        color: white;\r\n        padding: 20px 30px;\r\n        border-radius: 15px;\r\n        text-align: center;\r\n        z-index: 10000;\r\n        font-size: 16px;\r\n        font-weight: 600;\r\n        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\r\n      \">\r\n        <div style=\"font-size: 24px; margin-bottom: 10px;\">‚úÖ</div>\r\n        <div>Garson √ßaƒüƒ±rƒ±ldƒ±!</div>\r\n        <div style=\"font-size: 14px; opacity: 0.9; margin-top: 5px;\">En kƒ±sa s√ºrede yanƒ±nƒ±zda olacak</div>\r\n      </div>\r\n    `;\r\n    document.body.appendChild(message);\r\n\r\n    setTimeout(() => {\r\n      if (document.body.contains(message)) {\r\n        document.body.removeChild(message);\r\n      }\r\n    }, 3000);\r\n  };\r\n\r\n  const showRateLimitError = (errorMessage: string, remainingSeconds: number, isRegistered: boolean) => {\r\n    setRateLimitModal({\r\n      isOpen: true,\r\n      errorMessage,\r\n      remainingSeconds,\r\n      isRegistered,\r\n    });\r\n  };\r\n\r\n  // ƒ∞lk y√ºkleme veya veri y√ºklenirken\r\n  if (initialLoading || dataLoading) {\r\n    const logoUrl = customerData?.customer.logo\r\n      ? customerData.customer.logo.startsWith('http')\r\n        ? customerData.customer.logo.replace('http://', 'https://')\r\n        : `https://api.canlimenu.com/Uploads/${customerData.customer.logo.replace('Uploads/', '')}`\r\n      : undefined;\r\n\r\n    const backgroundUrl = customerData?.customer.webBackground\r\n      ? customerData.customer.webBackground.startsWith('http')\r\n        ? customerData.customer.webBackground.replace('http://', 'https://')\r\n        : `https://api.canlimenu.com/Uploads/${customerData.customer.webBackground.replace('Uploads/', '')}`\r\n      : undefined;\r\n\r\n    return <LoadingScreen logoUrl={logoUrl} backgroundUrl={backgroundUrl} />;\r\n  }\r\n\r\n  if (error || !menuDataLocal) {\r\n    return (\r\n      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'center', minHeight: '100vh', background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' }}>\r\n        <div style={{ color: 'white', textAlign: 'center' }}>\r\n          <h1 style={{ fontSize: '24px', marginBottom: '10px' }}>‚ùå Hata</h1>\r\n          <p>{error || 'Men√º bulunamadƒ±'}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Menu listesini al\r\n  const categories = menuDataLocal.menu || [];\r\n\r\n  // Logo URL (customerData.customer'dan al - camelCase field'lar)\r\n  const logoUrl = customerData?.customer.logo\r\n    ? customerData.customer.logo.startsWith('http')\r\n      ? customerData.customer.logo.replace('http://', 'https://')\r\n      : `https://api.canlimenu.com/Uploads/${customerData.customer.logo.replace('Uploads/', '')}`\r\n    : menuDataLocal.customerLogo\r\n    ? menuDataLocal.customerLogo.startsWith('http')\r\n      ? menuDataLocal.customerLogo.replace('http://', 'https://')\r\n      : `https://api.canlimenu.com/Uploads/${menuDataLocal.customerLogo.replace('Uploads/', '')}`\r\n    : undefined;\r\n\r\n  // Background URL (customerData.customer.webBackground - camelCase)\r\n  const backgroundUrl = customerData?.customer.webBackground\r\n    ? customerData.customer.webBackground.startsWith('http')\r\n      ? customerData.customer.webBackground.replace('http://', 'https://')\r\n      : `https://api.canlimenu.com/Uploads/${customerData.customer.webBackground.replace('Uploads/', '')}`\r\n    : undefined;\r\n\r\n  // Banner URL\r\n  const bannerUrl = customerData?.customer.showBanner && customerData?.customer.banner\r\n    ? customerData.customer.banner.startsWith('http')\r\n      ? customerData.customer.banner.replace('http://', 'https://')\r\n      : `https://api.canlimenu.com/Uploads/${customerData.customer.banner.replace('Uploads/', '')}`\r\n    : undefined;\r\n\r\n  // Background style\r\n  const bgStyle = backgroundUrl\r\n    ? {\r\n        backgroundImage: `url('${backgroundUrl}')`,\r\n        backgroundPosition: 'center center',\r\n        backgroundSize: 'cover',\r\n        backgroundRepeat: 'no-repeat',\r\n        backgroundAttachment: 'fixed'\r\n      }\r\n    : { background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' };\r\n\r\n  // Kategorileri d√∂n√º≈üt√ºr - categoriesData'dan picture VE titleEnglish al\r\n  const categoryList = categories.map((cat) => {\r\n    // categoriesData'dan bu kategorinin picture'ƒ±nƒ± VE titleEnglish'ini bul\r\n    const categoryWithPicture = categoriesData.find((c) => c.category.sambaId === cat.sambaId);\r\n    let categoryImageUrl = '';\r\n\r\n    if (categoryWithPicture && categoryWithPicture.picture) {\r\n      // Picture varsa URL'i olu≈ütur\r\n      const picture = categoryWithPicture.picture;\r\n      if (picture.startsWith('http')) {\r\n        categoryImageUrl = picture.replace('http://', 'https://');\r\n      } else {\r\n        const picturePath = picture.startsWith('Uploads/')\r\n          ? picture.substring('Uploads/'.length)\r\n          : picture;\r\n        categoryImageUrl = `https://api.canlimenu.com/Uploads/${picturePath}`;\r\n      }\r\n    } else if (logoUrl) {\r\n      // Picture yoksa logo kullan\r\n      categoryImageUrl = logoUrl;\r\n    } else {\r\n      // Placeholder\r\n      categoryImageUrl = 'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"300\" height=\"300\"%3E%3Crect fill=\"%23667eea\" width=\"300\" height=\"300\"/%3E%3C/svg%3E';\r\n    }\r\n\r\n    // titleEnglish'i categoriesData'dan al (API'de var)\r\n    const titleEnglish = categoryWithPicture?.category?.titleEnglish || '';\r\n\r\n    return {\r\n      id: cat.sambaId,\r\n      name: cat.title,\r\n      nameEn: titleEnglish, // categoriesData'dan gelen titleEnglish\r\n      image: categoryImageUrl,\r\n    };\r\n  });\r\n\r\n  return (\r\n    <>\r\n      {/* Splash Screen with Liquid Morph Animation */}\r\n      {showSplash && logoUrl && (\r\n        <SplashScreen\r\n          logoUrl={logoUrl}\r\n          backgroundUrl={backgroundUrl}\r\n          onComplete={handleSplashComplete}\r\n        />\r\n      )}\r\n\r\n      {/* Banner Modal - Splash'den sonra g√∂ster, kapatƒ±lƒ±nca men√º g√∂r√ºns√ºn */}\r\n      {bannerUrl && (\r\n        <BannerModal\r\n          bannerUrl={bannerUrl}\r\n          isOpen={showBanner}\r\n          onClose={handleBannerClose}\r\n        />\r\n      )}\r\n\r\n      {/* Image Preload Container - EN √ñNCE render et, hemen y√ºklemeye ba≈ülasƒ±n */}\r\n      <ImagePreloadContainer\r\n        menuData={menuDataLocal}\r\n        categoriesData={categoriesData}\r\n        customerLogo={logoUrl}\r\n        backgroundUrl={backgroundUrl}\r\n        bannerUrl={bannerUrl}\r\n        onImagesLoaded={handleImagesLoaded}\r\n      />\r\n\r\n      {/* Main Content */}\r\n      <div className=\"main-container\" style={{ ...bgStyle, minHeight: '100vh' }}>\r\n        {/* Language Selector - Fixed Top Right */}\r\n        <LanguageSelector />\r\n\r\n        {/* Header Area - Logo/Tabs/Slider */}\r\n        <HeaderTabs customerCode={code} fallbackLogoUrl={logoUrl} />\r\n\r\n        {/* Categories Grid with Cascade Animation */}\r\n        <CategoryGrid categories={categoryList} />\r\n      </div>\r\n\r\n      {/* Bottom Navigation Bar - Fixed Bottom (Sadece Okey oyunu a√ßƒ±kken gizle) */}\r\n      {activeGame !== 'okey' && (\r\n        <BottomNavBar\r\n        onProfileClick={() => {\r\n          // Diƒüer sidebar'larƒ± kapat\r\n          setIsCartOpen(false);\r\n          setIsAIChatOpen(false);\r\n          // Bu sidebar'ƒ± a√ß/kapat\r\n          if (isProfileOpen) {\r\n            closeProfile();\r\n          } else {\r\n            openProfile();\r\n          }\r\n        }}\r\n        onAIClick={() => {\r\n          // Diƒüer sidebar'larƒ± kapat\r\n          setIsCartOpen(false);\r\n          closeProfile();\r\n          // Bu sidebar'ƒ± a√ß/kapat\r\n          setIsAIChatOpen(prev => !prev);\r\n        }}\r\n        onCartClick={() => {\r\n          // Diƒüer sidebar'larƒ± kapat\r\n          closeProfile();\r\n          setIsAIChatOpen(false);\r\n          // Bu sidebar'ƒ± a√ß/kapat\r\n          setIsCartOpen(prev => !prev);\r\n        }}\r\n        onWaiterCall={handleWaiterCall}\r\n        onGameClick={() => {\r\n          if (isGameModalOpen) {\r\n            // Modal a√ßƒ±ksa, kapat\r\n            closeGameModal();\r\n          } else {\r\n            // Modal kapalƒ±ysa, sidebar'larƒ± kapat ve modalƒ± a√ß\r\n            setIsCartOpen(false);\r\n            closeProfile();\r\n            setIsAIChatOpen(false);\r\n            openGameModal();\r\n          }\r\n        }}\r\n        onContactClick={() => {\r\n          if (customerData?.customer.phone) {\r\n            window.location.href = `tel:${customerData.customer.phone}`;\r\n          }\r\n        }}\r\n        onSuggestionClick={() => setIsSuggestionModalOpen(true)}\r\n        showAIChat={customerData?.customer.showAIChat ?? true}\r\n        showCart={isTableMode}\r\n        showWaiterCall={canCallWaiter}\r\n        tableId={tableId || undefined}\r\n        phone={customerData?.customer.phone}\r\n        cartItemCount={0}\r\n      />\r\n      )}\r\n\r\n      {/* Product Modals */}\r\n      <ProductListModal />\r\n      <ProductDetailModal />\r\n\r\n      {/* Game Modal */}\r\n      <GameModal />\r\n\r\n      {/* Cart Sidebar */}\r\n      {isTableMode && (\r\n        <CartSidebar\r\n          isOpen={isCartOpen}\r\n          onClose={() => setIsCartOpen(false)}\r\n          tableId={tableId || ''}\r\n          customerCode={code}\r\n        />\r\n      )}\r\n\r\n      {/* Profile Sidebar */}\r\n      <ProfileSidebar isOpen={isProfileOpen} onClose={closeProfile} customerCode={code} />\r\n\r\n      {/* AI Chat Sidebar */}\r\n      <AIChatSidebar\r\n        isOpen={isAIChatOpen}\r\n        onClose={() => setIsAIChatOpen(false)}\r\n        customerCode={code}\r\n        menuData={menuDataLocal ? {\r\n          customerCode: code,\r\n          customerTitle: menuDataLocal.customerTitle,\r\n          categories: menuDataLocal.menu.map(cat => ({\r\n            title: cat.title,\r\n            sambaId: cat.sambaId.toString(),\r\n            products: cat.products.map(p => ({\r\n              title: p.title,\r\n              price: p.price,\r\n              detail: p.detail || p.description || ''\r\n            }))\r\n          }))\r\n        } : undefined}\r\n      />\r\n\r\n      {/* Suggestion Modal */}\r\n      <SuggestionModal\r\n        isOpen={isSuggestionModalOpen}\r\n        onClose={() => setIsSuggestionModalOpen(false)}\r\n        venueCode={code}\r\n      />\r\n\r\n      {/* Email Verified Popup */}\r\n      <EmailVerifiedPopup />\r\n\r\n      {/* Waiter Call Rate Limit Modal */}\r\n      <WaiterCallRateLimitModal\r\n        isOpen={rateLimitModal.isOpen}\r\n        onClose={() => setRateLimitModal({ ...rateLimitModal, isOpen: false })}\r\n        errorMessage={rateLimitModal.errorMessage}\r\n        remainingSeconds={rateLimitModal.remainingSeconds}\r\n        isRegistered={rateLimitModal.isRegistered}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useEffect, useRef } from 'react';\r\nimport * as signalR from '@microsoft/signalr';\r\n\r\nconst HUB_URL = process.env.NEXT_PUBLIC_API_URL\r\n  ? `${process.env.NEXT_PUBLIC_API_URL}/apimenuhub`\r\n  : 'https://api.canlimenu.com/apimenuhub';\r\n\r\ninterface UseSignalROptions {\r\n  customerId?: number;\r\n  onTokenBalanceUpdated?: (data: { userId: number; currentTokens: number; message: string }) => void;\r\n  enabled?: boolean;\r\n}\r\n\r\nexport function useSignalR({ customerId, onTokenBalanceUpdated, enabled = true }: UseSignalROptions) {\r\n  const connectionRef = useRef<signalR.HubConnection | null>(null);\r\n  const reconnectTimeoutRef = useRef<NodeJS.Timeout | undefined>(undefined);\r\n\r\n  useEffect(() => {\r\n    if (!enabled) {\r\n      return;\r\n    }\r\n\r\n    // Baƒülantƒ± zaten varsa ve baƒülƒ±ysa, tekrar olu≈üturma\r\n    if (connectionRef.current?.state === signalR.HubConnectionState.Connected) {\r\n      console.log('üîó SignalR: Already connected');\r\n      return;\r\n    }\r\n\r\n    const connection = new signalR.HubConnectionBuilder()\r\n      .withUrl(HUB_URL, {\r\n        transport: signalR.HttpTransportType.WebSockets | signalR.HttpTransportType.LongPolling,\r\n      })\r\n      .withAutomaticReconnect([0, 2000, 10000, 30000])\r\n      .configureLogging(signalR.LogLevel.Error) // Sadece error'larƒ± g√∂ster\r\n      .build();\r\n\r\n    connectionRef.current = connection;\r\n\r\n    // Event handlers\r\n    connection.onclose(() => {\r\n      console.log('üîå SignalR: Connection closed');\r\n    });\r\n\r\n    connection.onreconnecting((error) => {\r\n      console.log('üîÑ SignalR: Reconnecting...', error);\r\n    });\r\n\r\n    connection.onreconnected((connectionId) => {\r\n      console.log('‚úÖ SignalR: Reconnected', connectionId);\r\n\r\n      // Customer grubuna yeniden katƒ±l\r\n      if (customerId && customerId > 0) {\r\n        connection.invoke('JoinCustomerGroup', customerId)\r\n          .catch(err => console.error('‚ùå SignalR: JoinCustomerGroup failed on reconnect', err));\r\n      }\r\n    });\r\n\r\n    // Bo≈ü event handler'lar (warning'leri √∂nlemek i√ßin)\r\n    connection.on('AdminApproveOrder', () => {\r\n      // Service ve APK i√ßin - Web UI kullanmƒ±yor\r\n    });\r\n\r\n    connection.on('OrderStatusUpdate', () => {\r\n      // APK i√ßin - Web UI kullanmƒ±yor\r\n    });\r\n\r\n    connection.on('OrderStatusChanged', () => {\r\n      // APK i√ßin - Web UI kullanmƒ±yor\r\n    });\r\n\r\n    connection.on('OrderProcessResult', () => {\r\n      // Service i√ßin - Web UI kullanmƒ±yor\r\n    });\r\n\r\n    connection.on('NewOrder', () => {\r\n      // Admin Panel i√ßin - Web UI kullanmƒ±yor\r\n    });\r\n\r\n    // ü™ô Token balance g√ºncelleme event'i\r\n    if (onTokenBalanceUpdated) {\r\n      connection.on('TokenBalanceUpdated', (data: { userId: number; currentTokens: number; message: string }) => {\r\n        console.log('ü™ô SignalR: TokenBalanceUpdated', data);\r\n        onTokenBalanceUpdated(data);\r\n      });\r\n    }\r\n\r\n    // Baƒülantƒ±yƒ± ba≈ülat\r\n    connection.start()\r\n      .then(() => {\r\n        console.log('‚úÖ SignalR: Connected successfully');\r\n\r\n        // Customer grubuna katƒ±l\r\n        if (customerId && customerId > 0) {\r\n          return connection.invoke('JoinCustomerGroup', customerId);\r\n        }\r\n      })\r\n      .then(() => {\r\n        if (customerId && customerId > 0) {\r\n          console.log(`‚úÖ SignalR: Joined customer group ${customerId}`);\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.error('‚ùå SignalR: Connection failed', err);\r\n      });\r\n\r\n    // Cleanup\r\n    return () => {\r\n      if (reconnectTimeoutRef.current) {\r\n        clearTimeout(reconnectTimeoutRef.current);\r\n      }\r\n\r\n      if (connectionRef.current) {\r\n        connectionRef.current.stop()\r\n          .then(() => console.log('üîå SignalR: Disconnected'))\r\n          .catch(err => console.error('‚ùå SignalR: Disconnect error', err));\r\n      }\r\n    };\r\n  }, [customerId, enabled, onTokenBalanceUpdated]);\r\n\r\n  return connectionRef.current;\r\n}\r\n","'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport Image from 'next/image';\r\n\r\ninterface SplashScreenProps {\r\n  logoUrl: string;\r\n  backgroundUrl?: string;\r\n  onComplete: () => void;\r\n}\r\n\r\nexport default function SplashScreen({ logoUrl, backgroundUrl, onComplete }: SplashScreenProps) {\r\n  const [isVisible, setIsVisible] = useState(true);\r\n  const [imageError, setImageError] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      // Add liquid-morph class after 600ms\r\n      const splash = document.querySelector('.splash-screen');\r\n      splash?.classList.add('liquid-morph');\r\n\r\n      // Hide after animation completes (600ms)\r\n      setTimeout(() => {\r\n        setIsVisible(false);\r\n        onComplete();\r\n      }, 600);\r\n    }, 600);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [onComplete]);\r\n\r\n  if (!isVisible) return null;\r\n\r\n  const bgStyle = backgroundUrl\r\n    ? {\r\n        backgroundImage: `url('${backgroundUrl}')`,\r\n        backgroundPosition: 'center center',\r\n        backgroundSize: 'cover',\r\n        backgroundRepeat: 'no-repeat'\r\n      }\r\n    : { background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' };\r\n\r\n  return (\r\n    <div className=\"splash-screen active\" style={bgStyle}>\r\n      <div className=\"splash-content\">\r\n        {!imageError ? (\r\n          <Image\r\n            src={logoUrl}\r\n            alt=\"Logo\"\r\n            width={350}\r\n            height={350}\r\n            className=\"splash-logo\"\r\n            priority\r\n            onError={() => setImageError(true)}\r\n          />\r\n        ) : (\r\n          <div style={{\r\n            width: '350px',\r\n            height: '350px',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            fontSize: '48px',\r\n            color: 'white',\r\n            fontWeight: 'bold'\r\n          }}>\r\n            LOGO\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useEffect } from 'react';\r\nimport Image from 'next/image';\r\n\r\ninterface BannerModalProps {\r\n  bannerUrl: string;\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport default function BannerModal({ bannerUrl, isOpen, onClose }: BannerModalProps) {\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      document.body.style.overflow = 'hidden';\r\n    } else {\r\n      document.body.style.overflow = '';\r\n    }\r\n\r\n    return () => {\r\n      document.body.style.overflow = '';\r\n    };\r\n  }, [isOpen]);\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"banner-overlay\"\r\n      style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        backgroundColor: 'rgba(0, 0, 0, 0.9)',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 9999,\r\n        opacity: 1,\r\n        transition: 'opacity 0.3s ease'\r\n      }}\r\n      onClick={onClose}\r\n    >\r\n      <div\r\n        className=\"banner-content\"\r\n        style={{\r\n          position: 'relative',\r\n          maxWidth: window.innerWidth <= 480 ? '95%' : '90%',\r\n          maxHeight: window.innerWidth <= 480 ? '80%' : '90%',\r\n          borderRadius: '12px',\r\n          overflow: 'hidden',\r\n          boxShadow: '0 10px 30px rgba(0, 0, 0, 0.5)',\r\n          transition: 'transform 0.3s ease'\r\n        }}\r\n        onClick={onClose}\r\n      >\r\n        <button\r\n          className=\"banner-close-btn\"\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            onClose();\r\n          }}\r\n          aria-label=\"Kapat\"\r\n          style={{\r\n            position: 'absolute',\r\n            top: '10px',\r\n            right: '10px',\r\n            width: '32px',\r\n            height: '32px',\r\n            background: 'rgba(0, 0, 0, 0.7)',\r\n            border: 'none',\r\n            borderRadius: '50%',\r\n            color: 'white',\r\n            fontSize: '20px',\r\n            fontWeight: 'bold',\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 10,\r\n            transition: 'background 0.2s ease, transform 0.2s ease'\r\n          }}\r\n          onMouseEnter={(e) => {\r\n            e.currentTarget.style.background = 'rgba(0, 0, 0, 0.9)';\r\n            e.currentTarget.style.transform = 'scale(1.1)';\r\n          }}\r\n          onMouseLeave={(e) => {\r\n            e.currentTarget.style.background = 'rgba(0, 0, 0, 0.7)';\r\n            e.currentTarget.style.transform = 'scale(1)';\r\n          }}\r\n        >\r\n          √ó\r\n        </button>\r\n        <img\r\n          src={bannerUrl}\r\n          alt=\"Banner\"\r\n          className=\"banner-image\"\r\n          loading=\"eager\"\r\n          fetchPriority=\"high\"\r\n          decoding=\"async\"\r\n          style={{\r\n            width: '100%',\r\n            height: 'auto',\r\n            display: 'block',\r\n            cursor: 'pointer',\r\n            maxHeight: '90vh',\r\n            objectFit: 'contain'\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport Image from 'next/image';\r\n\r\ninterface LoadingScreenProps {\r\n  logoUrl?: string;\r\n  backgroundUrl?: string;\r\n}\r\n\r\nexport default function LoadingScreen({ logoUrl, backgroundUrl }: LoadingScreenProps) {\r\n  const bgStyle = backgroundUrl\r\n    ? {\r\n        backgroundImage: `url('${backgroundUrl}')`,\r\n        backgroundPosition: 'center center',\r\n        backgroundSize: 'cover',\r\n        backgroundRepeat: 'no-repeat'\r\n      }\r\n    : { background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' };\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        ...bgStyle,\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        zIndex: 9998\r\n      }}\r\n    >\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n          gap: '20px'\r\n        }}\r\n      >\r\n        {logoUrl ? (\r\n          <div\r\n            style={{\r\n              animation: 'pulse 1s ease-in-out infinite',\r\n              transformOrigin: 'center'\r\n            }}\r\n          >\r\n            <Image\r\n              src={logoUrl}\r\n              alt=\"Logo\"\r\n              width={200}\r\n              height={200}\r\n              priority\r\n              style={{\r\n                objectFit: 'contain',\r\n                filter: 'drop-shadow(0 0 20px rgba(255,255,255,0.3))'\r\n              }}\r\n            />\r\n          </div>\r\n        ) : (\r\n          <div\r\n            style={{\r\n              width: '60px',\r\n              height: '60px',\r\n              border: '4px solid rgba(255, 255, 255, 0.3)',\r\n              borderTop: '4px solid white',\r\n              borderRadius: '50%',\r\n              animation: 'spin 1s linear infinite'\r\n            }}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <style jsx>{`\r\n        @keyframes pulse {\r\n          0%, 100% {\r\n            transform: scale(1);\r\n            opacity: 1;\r\n          }\r\n          50% {\r\n            transform: scale(1.05);\r\n            opacity: 0.8;\r\n          }\r\n        }\r\n\r\n        @keyframes spin {\r\n          0% {\r\n            transform: rotate(0deg);\r\n          }\r\n          100% {\r\n            transform: rotate(360deg);\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\n\r\nexport default function LanguageSelector() {\r\n  const { language, toggleLanguage } = useLanguage();\r\n\r\n  return (\r\n    <div className=\"language-selector\">\r\n      <button\r\n        id=\"languageToggle\"\r\n        className={`language-toggle ${language === 'en' ? 'active' : ''}`}\r\n        onClick={toggleLanguage}\r\n      >\r\n        <span id=\"languageText\">{language.toUpperCase()}</span>\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Image from 'next/image';\r\nimport type { Advertisement } from '@/types/api';\r\n\r\ninterface ImageSliderTabProps {\r\n  tab: Advertisement;\r\n}\r\n\r\nexport default function ImageSliderTab({ tab }: ImageSliderTabProps) {\r\n  const [currentSlide, setCurrentSlide] = useState(0);\r\n  const [images, setImages] = useState<string[]>([]);\r\n\r\n  useEffect(() => {\r\n    // Parse comma-separated image URLs\r\n    if (tab.imageUrl) {\r\n      const imageList = tab.imageUrl\r\n        .split(',')\r\n        .map((url) => url.trim())\r\n        .filter((url) => url)\r\n        .map((url) => {\r\n          // Convert to full URL if needed\r\n          if (!url.startsWith('http://') && !url.startsWith('https://')) {\r\n            const cleanPath = url.startsWith('Uploads/') ? url.substring(8) : url;\r\n            return `https://api.canlimenu.com/Uploads/${cleanPath}`;\r\n          }\r\n          return url.replace('http://', 'https://');\r\n        });\r\n      setImages(imageList);\r\n    }\r\n  }, [tab.imageUrl]);\r\n\r\n  // Auto-rotation for multiple images\r\n  useEffect(() => {\r\n    if (images.length <= 1) return;\r\n\r\n    const interval = setInterval(() => {\r\n      setCurrentSlide((prev) => (prev + 1) % images.length);\r\n    }, tab.sliderInterval || 8000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [images.length, tab.sliderInterval]);\r\n\r\n  if (images.length === 0) {\r\n    return (\r\n      <div className=\"header-content-image\">\r\n        <div style={{ textAlign: 'center', padding: '20px', color: 'rgba(255,255,255,0.7)' }}>\r\n          G√∂rsel bulunamadƒ±\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"header-content-image\">\r\n      <div className=\"header-image-slider\">\r\n        {images.map((img, idx) => (\r\n          <div\r\n            key={idx}\r\n            className={`header-image-slide ${idx === currentSlide ? 'active' : ''}`}\r\n            data-slide={idx}\r\n          >\r\n            <Image\r\n              src={img}\r\n              alt={`Slide ${idx + 1}`}\r\n              width={1920}\r\n              height={1080}\r\n              style={{ width: '100%', height: '100%', objectFit: 'cover' }}\r\n              loading=\"eager\"\r\n              fetchPriority=\"high\"\r\n            />\r\n          </div>\r\n        ))}\r\n\r\n        {/* Slider Dots */}\r\n        {images.length > 1 && (\r\n          <div className=\"header-slider-dots\">\r\n            {images.map((_, idx) => (\r\n              <span\r\n                key={idx}\r\n                className={`header-slider-dot ${idx === currentSlide ? 'active' : ''}`}\r\n                onClick={() => setCurrentSlide(idx)}\r\n                data-slide={idx}\r\n              />\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport type { Advertisement } from '@/types/api';\r\n\r\ninterface VideoTabProps {\r\n  tab: Advertisement;\r\n}\r\n\r\nexport default function VideoTab({ tab }: VideoTabProps) {\r\n  if (!tab.videoUrl) {\r\n    return (\r\n      <div className=\"header-content-video\">\r\n        <div style={{ textAlign: 'center', padding: '20px', color: 'rgba(255,255,255,0.7)' }}>\r\n          Video bulunamadƒ±\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"header-content-video\">\r\n      <video autoPlay loop muted playsInline style={{ width: '100%', height: '100%', objectFit: 'cover' }}>\r\n        <source src={tab.videoUrl} type=\"video/mp4\" />\r\n        Tarayƒ±cƒ±nƒ±z video oynatmayƒ± desteklemiyor.\r\n      </video>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport type { Advertisement, CampaignData } from '@/types/api';\r\n\r\ninterface CampaignTabProps {\r\n  tab: Advertisement;\r\n}\r\n\r\nexport default function CampaignTab({ tab }: CampaignTabProps) {\r\n  // Parse campaign text (can be JSON or plain text)\r\n  const parseCampaignText = (campaignText?: string): CampaignData => {\r\n    if (!campaignText) return { title: '', subtitle: '', ctaText: '' };\r\n\r\n    try {\r\n      const parsed = JSON.parse(campaignText);\r\n      return {\r\n        title: parsed.title || parsed.Title || '',\r\n        subtitle: parsed.subtitle || parsed.Subtitle || '',\r\n        ctaText: parsed.ctaText || parsed.CtaText || '',\r\n      };\r\n    } catch {\r\n      // Plain text - use as title\r\n      return {\r\n        title: campaignText,\r\n        subtitle: '',\r\n        ctaText: '',\r\n      };\r\n    }\r\n  };\r\n\r\n  const campaign = parseCampaignText(tab.campaignText);\r\n\r\n  const scrollToCategories = (e: React.MouseEvent) => {\r\n    e.preventDefault();\r\n    const categoriesGrid = document.querySelector('.categories-grid');\r\n    if (categoriesGrid) {\r\n      categoriesGrid.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"header-content-campaign\">\r\n      {campaign.title && <div className=\"header-campaign-title\">{campaign.title}</div>}\r\n      {campaign.subtitle && <div className=\"header-campaign-subtitle\">{campaign.subtitle}</div>}\r\n      {campaign.ctaText && (\r\n        <a href=\"#categories\" className=\"header-campaign-cta\" onClick={scrollToCategories}>\r\n          {campaign.ctaText}\r\n        </a>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","/**\r\n * Get localized title from object\r\n * Works with products, categories, portions, properties\r\n */\r\nexport function getTitle(\r\n  item: {\r\n    title?: string;\r\n    Title?: string;\r\n    titleEn?: string;\r\n    TitleEn?: string;\r\n    titleEnglish?: string;\r\n    TitleEnglish?: string;\r\n    name?: string;\r\n    nameEn?: string;\r\n  },\r\n  language: 'tr' | 'en'\r\n): string {\r\n  if (language === 'en') {\r\n    // Try English versions first (API uses titleEnglish, TitleEnglish)\r\n    const enTitle =\r\n      item.titleEnglish ||\r\n      item.TitleEnglish ||\r\n      item.titleEn ||\r\n      item.TitleEn ||\r\n      item.nameEn ||\r\n      item.title ||\r\n      item.Title ||\r\n      item.name ||\r\n      '';\r\n\r\n    // If English version exists and is not empty, use it\r\n    if (enTitle && enTitle.trim() !== '') {\r\n      return enTitle;\r\n    }\r\n  }\r\n\r\n  // Fallback to Turkish\r\n  return item.title || item.Title || item.name || '';\r\n}\r\n\r\n/**\r\n * Get localized description from product\r\n */\r\nexport function getDescription(\r\n  item: {\r\n    description?: string;\r\n    Description?: string;\r\n    descriptionEn?: string;\r\n    DescriptionEn?: string;\r\n    descriptionEnglish?: string;\r\n    DescriptionEnglish?: string;\r\n    detail?: string;\r\n    Detail?: string;\r\n    detailEn?: string;\r\n    DetailEn?: string;\r\n    detailEnglish?: string;\r\n    DetailEnglish?: string;\r\n  },\r\n  language: 'tr' | 'en'\r\n): string {\r\n  if (language === 'en') {\r\n    // Try English versions first (API uses detailEnglish, descriptionEnglish)\r\n    const enDesc =\r\n      item.detailEnglish ||\r\n      item.DetailEnglish ||\r\n      item.detailEn ||\r\n      item.DetailEn ||\r\n      item.descriptionEnglish ||\r\n      item.DescriptionEnglish ||\r\n      item.descriptionEn ||\r\n      item.DescriptionEn ||\r\n      item.detail ||\r\n      item.Detail ||\r\n      item.description ||\r\n      item.Description ||\r\n      '';\r\n\r\n    // If English version exists and is not empty, use it\r\n    if (enDesc && enDesc.trim() !== '') {\r\n      return enDesc;\r\n    }\r\n  }\r\n\r\n  // Fallback to Turkish\r\n  return item.detail || item.Detail || item.description || item.Description || '';\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Image from 'next/image';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\nimport { getTitle } from '@/utils/language';\r\nimport type { Advertisement, Product } from '@/types/api';\r\n\r\ninterface ProductsTabProps {\r\n  tab: Advertisement;\r\n}\r\n\r\nexport default function ProductsTab({ tab }: ProductsTabProps) {\r\n  const { language, t } = useLanguage();\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [productIds, setProductIds] = useState<number[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Parse product IDs from tab data\r\n  useEffect(() => {\r\n    if (tab.selectedProductIds) {\r\n      try {\r\n        const ids = JSON.parse(tab.selectedProductIds);\r\n        setProductIds(ids);\r\n      } catch (error) {\r\n        console.error('Failed to parse product IDs:', error);\r\n        setLoading(false);\r\n      }\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, [tab.selectedProductIds]);\r\n\r\n  // Load product details (from window.menuData if available, or fetch)\r\n  useEffect(() => {\r\n    if (productIds.length === 0) {\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    // Try to get products from global menuData\r\n    const loadProducts = async () => {\r\n      try {\r\n        // In a real app, you'd get this from context or props\r\n        // For now, we'll just create placeholders\r\n        const placeholders: Product[] = productIds.map((id) => ({\r\n          id,\r\n          sambaId: id,\r\n          title: t('productLoading'),\r\n          price: 0,\r\n          categoryId: 0,\r\n          orderNo: 0,\r\n        }));\r\n        setProducts(placeholders);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error('Failed to load products:', error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadProducts();\r\n  }, [productIds]);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"header-content-products\">\r\n        <div className=\"header-products-title\">\r\n          {tab.tabType === 'FavoriteProducts' ? t('featuredProducts') : t('bestSelling')}\r\n        </div>\r\n        <div className=\"header-products-scroll\">\r\n          {[1, 2, 3, 4].map((i) => (\r\n            <div key={i} className=\"header-product-card\" style={{ animation: 'pulse 1.5s ease-in-out infinite' }}>\r\n              <div style={{ width: '100%', height: '80px', background: 'rgba(255,255,255,0.1)', borderRadius: '8px' }} />\r\n              <div className=\"header-product-info\">\r\n                <div style={{ width: '80%', height: '12px', background: 'rgba(255,255,255,0.1)', borderRadius: '4px', marginBottom: '4px' }} />\r\n                <div style={{ width: '50%', height: '10px', background: 'rgba(255,255,255,0.1)', borderRadius: '4px' }} />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (products.length === 0) {\r\n    return (\r\n      <div className=\"header-content-products\">\r\n        <div style={{ textAlign: 'center', padding: '20px', color: 'rgba(255,255,255,0.7)' }}>\r\n          {t('noProductsFound')}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const title = tab.tabType === 'FavoriteProducts' ? t('featuredProducts') : t('bestSelling');\r\n\r\n  return (\r\n    <div className=\"header-content-products\">\r\n      <div className=\"header-products-title\">{title}</div>\r\n      <div className=\"header-products-scroll\">\r\n        {products.map((product) => {\r\n          const productTitle = getTitle(product, language);\r\n\r\n          return (\r\n            <div\r\n              key={product.id}\r\n              className=\"header-product-card\"\r\n              onClick={() => {\r\n                console.log('Product clicked:', product.id);\r\n                // TODO: Open product modal\r\n              }}\r\n            >\r\n              {product.picture ? (\r\n                <Image\r\n                  src={\r\n                    product.picture.startsWith('http')\r\n                      ? product.picture.replace('http://', 'https://')\r\n                      : `https://api.canlimenu.com/Uploads/${product.picture.replace('Uploads/', '')}`\r\n                  }\r\n                  alt={productTitle}\r\n                  width={100}\r\n                  height={80}\r\n                  className=\"header-product-image\"\r\n                  loading=\"eager\"\r\n                />\r\n              ) : (\r\n                <div className=\"header-product-image\" style={{ background: 'rgba(0,0,0,0.2)' }} />\r\n              )}\r\n              <div className=\"header-product-info\">\r\n                <div className=\"header-product-name\">{productTitle}</div>\r\n                <div className=\"header-product-price\">\r\n                  {product.price > 0 ? `${product.price.toFixed(2)} ‚Ç∫` : t('noPrice')}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport type { Advertisement } from '@/types/api';\r\nimport ImageSliderTab from './tabs/ImageSliderTab';\r\nimport VideoTab from './tabs/VideoTab';\r\nimport CampaignTab from './tabs/CampaignTab';\r\nimport ProductsTab from './tabs/ProductsTab';\r\n\r\ninterface HeaderTabsProps {\r\n  customerCode: string;\r\n  fallbackLogoUrl?: string;\r\n}\r\n\r\nexport default function HeaderTabs({ customerCode, fallbackLogoUrl }: HeaderTabsProps) {\r\n  const [tabs, setTabs] = useState<Advertisement[]>([]);\r\n  const [activeTabIndex, setActiveTabIndex] = useState(0);\r\n  const [loading, setLoading] = useState(true);\r\n  const autoRotateRef = useRef<NodeJS.Timeout | null>(null);\r\n  const touchStartX = useRef(0);\r\n  const touchEndX = useRef(0);\r\n\r\n  // Fetch tabs from API\r\n  useEffect(() => {\r\n    async function fetchTabs() {\r\n      try {\r\n        const response = await fetch(`/api/advertisements/${customerCode}`);\r\n        const result = await response.json();\r\n\r\n        if (result.success && result.data && result.data.length > 0) {\r\n          setTabs(result.data);\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to fetch header tabs:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    if (customerCode) {\r\n      fetchTabs();\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, [customerCode]);\r\n\r\n  // Auto-rotation\r\n  useEffect(() => {\r\n    if (tabs.length <= 1) return;\r\n\r\n    const startAutoRotation = () => {\r\n      autoRotateRef.current = setInterval(() => {\r\n        setActiveTabIndex((prev) => (prev + 1) % tabs.length);\r\n      }, 5000); // 5 seconds\r\n    };\r\n\r\n    startAutoRotation();\r\n\r\n    return () => {\r\n      if (autoRotateRef.current) {\r\n        clearInterval(autoRotateRef.current);\r\n      }\r\n    };\r\n  }, [tabs.length]);\r\n\r\n  // Touch events for swipe\r\n  const handleTouchStart = (e: React.TouchEvent) => {\r\n    touchStartX.current = e.touches[0].clientX;\r\n  };\r\n\r\n  const handleTouchEnd = (e: React.TouchEvent) => {\r\n    touchEndX.current = e.changedTouches[0].clientX;\r\n    handleSwipe();\r\n  };\r\n\r\n  const handleSwipe = () => {\r\n    const diff = touchStartX.current - touchEndX.current;\r\n    const threshold = 50;\r\n\r\n    if (Math.abs(diff) > threshold) {\r\n      if (diff > 0) {\r\n        // Swipe left - next tab\r\n        setActiveTabIndex((prev) => (prev + 1) % tabs.length);\r\n      } else {\r\n        // Swipe right - previous tab\r\n        setActiveTabIndex((prev) => (prev - 1 + tabs.length) % tabs.length);\r\n      }\r\n    }\r\n  };\r\n\r\n  const switchTab = (index: number) => {\r\n    setActiveTabIndex(index);\r\n    // Reset auto-rotation\r\n    if (autoRotateRef.current) {\r\n      clearInterval(autoRotateRef.current);\r\n    }\r\n  };\r\n\r\n  // Show fallback logo if no tabs\r\n  if (!loading && tabs.length === 0 && fallbackLogoUrl) {\r\n    return (\r\n      <div id=\"headerArea\" className=\"restaurant-info logo-container\">\r\n        <div className=\"header-tabs-wrapper\" style={{ display: 'flex' }}>\r\n          <div\r\n            className=\"header-content-image\"\r\n            style={{\r\n              position: 'relative',\r\n              width: '100%',\r\n              height: '100%',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n            }}\r\n          >\r\n            <img\r\n              src={fallbackLogoUrl}\r\n              alt=\"Logo\"\r\n              loading=\"eager\"\r\n              fetchPriority=\"high\"\r\n              style={{\r\n                maxWidth: '90%',\r\n                maxHeight: '90%',\r\n                objectFit: 'contain',\r\n                borderRadius: '12px',\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (loading || tabs.length === 0) return null;\r\n\r\n  return (\r\n    <div id=\"headerArea\" className=\"restaurant-info logo-container\">\r\n      <div className=\"header-tabs-wrapper\" style={{ display: 'flex' }}>\r\n        {/* Tab Content Slider */}\r\n        <div\r\n          className=\"header-tabs-slider\"\r\n          onTouchStart={handleTouchStart}\r\n          onTouchEnd={handleTouchEnd}\r\n        >\r\n          {tabs.map((tab, index) => (\r\n            <div\r\n              key={tab.id}\r\n              className={`header-tab-content ${index === activeTabIndex ? 'active' : ''}`}\r\n              style={{\r\n                position: index === activeTabIndex ? 'relative' : 'absolute',\r\n                visibility: index === activeTabIndex ? 'visible' : 'hidden',\r\n                opacity: index === activeTabIndex ? 1 : 0,\r\n                width: '100%',\r\n                height: '100%',\r\n              }}\r\n            >\r\n              {tab.tabType === 'Image' && <ImageSliderTab tab={tab} />}\r\n              {tab.tabType === 'Video' && <VideoTab tab={tab} />}\r\n              {tab.tabType === 'Campaign' && <CampaignTab tab={tab} />}\r\n              {(tab.tabType === 'FavoriteProducts' || tab.tabType === 'BestSellingProducts') && (\r\n                <ProductsTab tab={tab} />\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Slider Dots Navigation */}\r\n        {tabs.length > 1 && (\r\n          <div className=\"header-tabs-dots\">\r\n            {tabs.map((_, index) => (\r\n              <span\r\n                key={index}\r\n                className={`header-tab-dot ${index === activeTabIndex ? 'active' : ''}`}\r\n                onClick={() => switchTab(index)}\r\n                data-index={index}\r\n              />\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport Image from 'next/image';\r\nimport { useMenu } from '@/contexts/MenuContext';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\n\r\ninterface Category {\r\n  id: number;\r\n  name: string;\r\n  nameEn?: string;\r\n  image: string;\r\n}\r\n\r\ninterface CategoryGridProps {\r\n  categories: Category[];\r\n}\r\n\r\nexport default function CategoryGrid({ categories }: CategoryGridProps) {\r\n  const { menuData, customerData, openProductListModal } = useMenu();\r\n  const { language } = useLanguage();\r\n\r\n  // Font customization\r\n  const categoryFont = customerData?.customer.categoryFont || 'Inter, serif';\r\n\r\n  const handleCategoryClick = (e: React.MouseEvent<HTMLAnchorElement>, categoryId: number) => {\r\n    e.preventDefault();\r\n\r\n    // Find full category data from menuData\r\n    if (menuData?.menu) {\r\n      const fullCategory = menuData.menu.find((cat) => cat.sambaId === categoryId);\r\n      if (fullCategory) {\r\n        openProductListModal(fullCategory);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"categories-grid\">\r\n      {categories.map((category, index) => {\r\n        const displayName = language === 'en' && category.nameEn\r\n          ? category.nameEn\r\n          : category.name;\r\n\r\n        return (\r\n          <a\r\n            key={category.id}\r\n            href={`#${category.id}`}\r\n            className=\"category-card\"\r\n            style={{\r\n              animation: 'categoryAppear 0.6s ease-out backwards',\r\n              animationDelay: `${0.1 + index * 0.05}s`,\r\n            }}\r\n            onClick={(e) => handleCategoryClick(e, category.id)}\r\n          >\r\n            <Image\r\n              src={category.image}\r\n              alt={displayName}\r\n              width={300}\r\n              height={300}\r\n              className=\"card-image\"\r\n              priority={true}\r\n              unoptimized\r\n            />\r\n            <div className=\"card-content\">\r\n              <h3 className=\"card-title\" style={{ fontFamily: categoryFont }}>\r\n                {displayName}\r\n              </h3>\r\n            </div>\r\n          </a>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useLanguage } from '@/contexts/LanguageContext';\r\n\r\ninterface BottomNavBarProps {\r\n  onProfileClick?: () => void;\r\n  onAIClick?: () => void;\r\n  onCartClick?: () => void;\r\n  onWaiterCall?: () => void;\r\n  onGameClick?: () => void;\r\n  onContactClick?: () => void;\r\n  onSuggestionClick?: () => void;\r\n  showAIChat?: boolean;\r\n  showCart?: boolean;\r\n  showWaiterCall?: boolean;\r\n  cartItemCount?: number;\r\n  tableId?: string;\r\n  phone?: string;\r\n}\r\n\r\nexport default function BottomNavBar({\r\n  onProfileClick,\r\n  onAIClick,\r\n  onCartClick,\r\n  onWaiterCall,\r\n  onGameClick,\r\n  onContactClick,\r\n  onSuggestionClick,\r\n  showAIChat = true,\r\n  showCart = true,\r\n  showWaiterCall = false,\r\n  cartItemCount = 0,\r\n  tableId,\r\n  phone,\r\n}: BottomNavBarProps) {\r\n  const [showWaiterModal, setShowWaiterModal] = useState(false);\r\n  const { t } = useLanguage();\r\n\r\n  const handleWaiterClick = () => {\r\n    setShowWaiterModal(true);\r\n  };\r\n\r\n  const confirmWaiterCall = () => {\r\n    setShowWaiterModal(false);\r\n    if (onWaiterCall) {\r\n      onWaiterCall();\r\n    }\r\n  };\r\n\r\n  const NavButton = ({\r\n    icon,\r\n    label,\r\n    onClick,\r\n    gradient,\r\n    top = '0',\r\n    badge\r\n  }: {\r\n    icon: React.ReactNode;\r\n    label: string;\r\n    onClick?: () => void;\r\n    gradient: string;\r\n    top?: string;\r\n    badge?: number;\r\n  }) => (\r\n    <div\r\n      className=\"nav-item\"\r\n      onClick={onClick}\r\n      style={{\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        cursor: 'pointer',\r\n        padding: '8px',\r\n        borderRadius: '12px',\r\n        transition: 'all 0.3s ease',\r\n        position: 'relative',\r\n        top,\r\n      }}\r\n    >\r\n      <div\r\n        style={{\r\n          width: top !== '0' ? '50px' : '32px',\r\n          height: top !== '0' ? '50px' : '32px',\r\n          background: gradient,\r\n          borderRadius: '50%',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          marginBottom: '4px',\r\n          position: 'relative',\r\n          boxShadow: top !== '0' ? '0 4px 15px rgba(102, 126, 234, 0.3)' : 'none',\r\n        }}\r\n      >\r\n        {icon}\r\n        {badge !== undefined && badge > 0 && (\r\n          <div\r\n            style={{\r\n              position: 'absolute',\r\n              top: '-5px',\r\n              right: '-5px',\r\n              background: '#dc3545',\r\n              color: 'white',\r\n              borderRadius: '50%',\r\n              width: '18px',\r\n              height: '18px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              fontSize: '10px',\r\n              fontWeight: 700,\r\n              minWidth: '18px',\r\n            }}\r\n          >\r\n            {badge}\r\n          </div>\r\n        )}\r\n      </div>\r\n      <span\r\n        style={{\r\n          fontSize: top !== '0' ? '11px' : '11px',\r\n          color: top !== '0' ? '#667eea' : '#666',\r\n          fontWeight: top !== '0' ? 600 : 500,\r\n        }}\r\n      >\r\n        {label}\r\n      </span>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        id=\"bottomNavBar\"\r\n        style={{\r\n          position: 'fixed',\r\n          bottom: 0,\r\n          left: 0,\r\n          right: 0,\r\n          height: '80px',\r\n          background: 'rgba(255, 255, 255, 0.95)',\r\n          backdropFilter: 'blur(10px)',\r\n          borderTop: '1px solid rgba(0, 0, 0, 0.1)',\r\n          display: 'flex',\r\n          justifyContent: 'space-around',\r\n          alignItems: 'center',\r\n          zIndex: 999999,\r\n          boxShadow: '0 -2px 20px rgba(0, 0, 0, 0.1)',\r\n        }}\r\n      >\r\n        {/* Profil Butonu */}\r\n        <NavButton\r\n          icon={\r\n            <svg style={{ width: '18px', height: '18px', fill: 'white' }} viewBox=\"0 0 24 24\">\r\n              <path d=\"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\" />\r\n            </svg>\r\n          }\r\n          label={t('profile')}\r\n          onClick={onProfileClick}\r\n          gradient=\"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\"\r\n        />\r\n\r\n        {/* AI Asistan */}\r\n        {showAIChat && (\r\n          <NavButton\r\n            icon={\r\n              <svg style={{ width: '18px', height: '18px', fill: 'white' }} viewBox=\"0 0 24 24\">\r\n                <path d=\"M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z\" />\r\n              </svg>\r\n            }\r\n            label={t('aiAssistant')}\r\n            onClick={onAIClick}\r\n            gradient=\"linear-gradient(135deg, #3498db 0%, #2980b9 100%)\"\r\n          />\r\n        )}\r\n\r\n        {/* Garson √áaƒüƒ±r (sadece masa ID varsa) */}\r\n        {showWaiterCall && tableId && (\r\n          <NavButton\r\n            icon={\r\n              <svg style={{ width: '24px', height: '24px', fill: 'white' }} viewBox=\"0 0 24 24\">\r\n                <path d=\"M18.06 23H19.72C20.56 23 21.25 22.35 21.35 21.53L23 5.05H18V1H16.03V5.05H11.06L11.36 7.39C13.07 7.86 14.67 8.71 15.63 9.65C17.07 11.07 18.06 12.54 18.06 14.94V23M1 22V21H16.03V22C16.03 22.54 15.58 23 15.03 23H2C1.45 23 1 22.54 1 22M16.03 15C16.03 7 1 7 1 15H16.03M1 17H16V19H1V17Z\" />\r\n              </svg>\r\n            }\r\n            label={t('waiterCall')}\r\n            onClick={handleWaiterClick}\r\n            gradient=\"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\"\r\n            top=\"-15px\"\r\n          />\r\n        )}\r\n\r\n        {/* Oyun Butonu */}\r\n        <NavButton\r\n          icon={\r\n            <svg style={{ width: '18px', height: '18px', fill: 'white' }} viewBox=\"0 0 24 24\">\r\n              <path d=\"M7.97,16L5,19C4.67,19.3 4.23,19.5 3.75,19.5A1.75,1.75 0 0,1 2,17.75V17.5L3,10.12C3.21,7.81 5.14,6 7.5,6H16.5C18.86,6 20.79,7.81 21,10.12L22,17.5V17.75A1.75,1.75 0 0,1 20.25,19.5C19.77,19.5 19.33,19.3 19,19L16.03,16H7.97M7.5,8A0.5,0.5 0 0,0 7,8.5A0.5,0.5 0 0,0 7.5,9A0.5,0.5 0 0,0 8,8.5A0.5,0.5 0 0,0 7.5,8M16.5,8A0.5,0.5 0 0,0 16,8.5A0.5,0.5 0 0,0 16.5,9A0.5,0.5 0 0,0 17,8.5A0.5,0.5 0 0,0 16.5,8M8.5,11A1.5,1.5 0 0,0 7,12.5A1.5,1.5 0 0,0 8.5,14A1.5,1.5 0 0,0 10,12.5A1.5,1.5 0 0,0 8.5,11M15.5,11A1.5,1.5 0 0,0 14,12.5A1.5,1.5 0 0,0 15.5,14A1.5,1.5 0 0,0 17,12.5A1.5,1.5 0 0,0 15.5,11M12,13C12.27,13 12.5,13.14 12.65,13.35L15,16H9L11.35,13.35C11.5,13.14 11.73,13 12,13Z\" />\r\n            </svg>\r\n          }\r\n          label={t('games')}\r\n          onClick={onGameClick}\r\n          gradient=\"linear-gradient(135deg, #9c27b0 0%, #673ab7 100%)\"\r\n        />\r\n\r\n        {/* ƒ∞leti≈üim / Sepet / √ñneri */}\r\n        {showCart ? (\r\n          <NavButton\r\n            icon={\r\n              <svg style={{ width: '18px', height: '18px', fill: 'white' }} viewBox=\"0 0 24 24\">\r\n                <path d=\"M7 4V2C7 1.45 7.45 1 8 1H16C16.55 1 17 1.45 17 2V4H20C20.55 4 21 4.45 21 5S20.55 6 20 6H19V19C19 20.1 18.1 21 17 21H7C5.9 21 5 20.1 5 19V6H4C3.45 6 3 5.55 3 5S3.45 4 4 4H7ZM9 3V4H15V3H9ZM7 6V19H17V6H7Z\" />\r\n              </svg>\r\n            }\r\n            label={t('cart')}\r\n            onClick={onCartClick}\r\n            gradient=\"linear-gradient(135deg, #28a745 0%, #20c997 100%)\"\r\n            badge={cartItemCount}\r\n          />\r\n        ) : phone ? (\r\n          <NavButton\r\n            icon={\r\n              <svg style={{ width: '18px', height: '18px', fill: 'white' }} viewBox=\"0 0 24 24\">\r\n                <path d=\"M6.62,10.79C8.06,13.62 10.38,15.94 13.21,17.38L15.41,15.18C15.69,14.9 16.08,14.82 16.43,14.93C17.55,15.3 18.75,15.5 20,15.5A1,1 0 0,1 21,16.5V20A1,1 0 0,1 20,21A17,17 0 0,1 3,4A1,1 0 0,1 4,3H7.5A1,1 0 0,1 8.5,4C8.5,5.25 8.7,6.45 9.07,7.57C9.18,7.92 9.1,8.31 8.82,8.59L6.62,10.79Z\" />\r\n              </svg>\r\n            }\r\n            label={t('callUs')}\r\n            onClick={onContactClick}\r\n            gradient=\"linear-gradient(135deg, #28a745 0%, #20c997 100%)\"\r\n          />\r\n        ) : (\r\n          <NavButton\r\n            icon={\r\n              <svg style={{ width: '18px', height: '18px', fill: 'white' }} viewBox=\"0 0 24 24\">\r\n                <path d=\"M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M6,9H18V11H6M14,14H6V12H14M18,8H6V6H18\" />\r\n              </svg>\r\n            }\r\n            label={t('sendSuggestion')}\r\n            onClick={onSuggestionClick}\r\n            gradient=\"linear-gradient(135deg, #FF6B6B 0%, #FFE66D 100%)\"\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {/* Garson √áaƒüƒ±rma Onay Modal */}\r\n      {showWaiterModal && (\r\n        <div\r\n          style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            width: '100%',\r\n            height: '100%',\r\n            background: 'rgba(0, 0, 0, 0.6)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            zIndex: 99999,\r\n            animation: 'fadeIn 0.2s ease',\r\n          }}\r\n          onClick={() => setShowWaiterModal(false)}\r\n        >\r\n          <div\r\n            style={{\r\n              background: 'white',\r\n              borderRadius: '20px',\r\n              padding: '30px',\r\n              maxWidth: '400px',\r\n              width: '90%',\r\n              boxShadow: '0 10px 40px rgba(0, 0, 0, 0.3)',\r\n              animation: 'slideUp 0.3s ease',\r\n              textAlign: 'center',\r\n            }}\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <div style={{ fontSize: '60px', marginBottom: '20px' }}>üõéÔ∏è</div>\r\n            <h3\r\n              style={{\r\n                fontSize: '22px',\r\n                color: '#2d3748',\r\n                marginBottom: '15px',\r\n                fontWeight: 600,\r\n              }}\r\n            >\r\n              Garson √áaƒüƒ±rƒ±lsƒ±n Mƒ±?\r\n            </h3>\r\n            <p\r\n              style={{\r\n                color: '#718096',\r\n                fontSize: '15px',\r\n                marginBottom: '30px',\r\n                lineHeight: 1.5,\r\n              }}\r\n            >\r\n              Garsonunuz en kƒ±sa s√ºrede masanƒ±za gelecektir\r\n            </p>\r\n            <div style={{ display: 'flex', gap: '12px' }}>\r\n              <button\r\n                onClick={() => setShowWaiterModal(false)}\r\n                style={{\r\n                  flex: 1,\r\n                  padding: '14px 20px',\r\n                  background: '#e2e8f0',\r\n                  color: '#4a5568',\r\n                  border: 'none',\r\n                  borderRadius: '12px',\r\n                  fontSize: '16px',\r\n                  fontWeight: 600,\r\n                  cursor: 'pointer',\r\n                  transition: 'all 0.2s ease',\r\n                }}\r\n              >\r\n                ƒ∞ptal\r\n              </button>\r\n              <button\r\n                onClick={confirmWaiterCall}\r\n                style={{\r\n                  flex: 1,\r\n                  padding: '14px 20px',\r\n                  background: 'linear-gradient(135deg, #4ade80 0%, #22c55e 100%)',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '12px',\r\n                  fontSize: '16px',\r\n                  fontWeight: 600,\r\n                  cursor: 'pointer',\r\n                  transition: 'all 0.2s ease',\r\n                  boxShadow: '0 4px 12px rgba(74, 222, 128, 0.3)',\r\n                }}\r\n              >\r\n                Onayla\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <style jsx>{`\r\n        @keyframes fadeIn {\r\n          from {\r\n            opacity: 0;\r\n          }\r\n          to {\r\n            opacity: 1;\r\n          }\r\n        }\r\n\r\n        @keyframes slideUp {\r\n          from {\r\n            transform: translateY(30px);\r\n            opacity: 0;\r\n          }\r\n          to {\r\n            transform: translateY(0);\r\n            opacity: 1;\r\n          }\r\n        }\r\n      `}</style>\r\n    </>\r\n  );\r\n}\r\n","/**\r\n * Alerjen adƒ±na g√∂re emoji/icon d√∂nd√ºr√ºr\r\n * @param allergenName - Alerjen adƒ±\r\n * @returns Emoji icon\r\n */\r\nexport function getAllergenIcon(allergenName: string): string {\r\n  const name = allergenName.toLowerCase().trim();\r\n\r\n  // Gluten\r\n  if (name.includes('gluten') || name.includes('buƒüday') || name.includes('wheat')) return 'üåæ';\r\n\r\n  // S√ºt √ºr√ºnleri\r\n  if (name.includes('laktoz') || name.includes('s√ºt') || name.includes('milk') || name.includes('dairy')) return 'ü•õ';\r\n\r\n  // Yumurta\r\n  if (name.includes('yumurta') || name.includes('egg')) return 'ü•ö';\r\n\r\n  // Fƒ±ndƒ±k/Yerfƒ±stƒ±ƒüƒ±\r\n  if (name.includes('fƒ±ndƒ±k') || name.includes('fƒ±stƒ±k') || name.includes('nut') || name.includes('hazelnut') || name.includes('peanut')) return 'ü•ú';\r\n\r\n  // Balƒ±k\r\n  if (name.includes('balƒ±k') || name.includes('fish')) return 'üêü';\r\n\r\n  // Deniz √ºr√ºnleri\r\n  if (name.includes('karides') || name.includes('deniz') || name.includes('shellfish') || name.includes('seafood')) return 'ü¶ê';\r\n\r\n  // Soya\r\n  if (name.includes('soya') || name.includes('soy')) return 'ü´ò';\r\n\r\n  // Susam\r\n  if (name.includes('susam') || name.includes('sesame')) return 'üå∞';\r\n\r\n  // Kereviz\r\n  if (name.includes('kereviz') || name.includes('celery')) return 'ü•¨';\r\n\r\n  // Hardal\r\n  if (name.includes('hardal') || name.includes('mustard')) return 'üå∂Ô∏è';\r\n\r\n  // Default - √ºnlem i≈üareti\r\n  return '‚ö†Ô∏è';\r\n}\r\n\r\n/**\r\n * Kullanƒ±cƒ±nƒ±n alerjanlarƒ± ile √ºr√ºn√ºn alerjanlarƒ±nƒ± kar≈üƒ±la≈ütƒ±rƒ±r\r\n * @param productAllergens - √úr√ºn√ºn alerjenler string'i (virg√ºlle ayrƒ±lmƒ±≈ü veya JSON)\r\n * @param userAllergies - Kullanƒ±cƒ±nƒ±n alerjileri array'i\r\n * @returns Alerjan uyarƒ± objesi veya null\r\n */\r\nexport function checkProductAllergens(\r\n  productAllergens: string | undefined,\r\n  userAllergies: string[]\r\n): { allergens: string[]; icons: string; text: string } | null {\r\n  // Kullanƒ±cƒ±nƒ±n alerjisi yoksa kontrol etme\r\n  if (!userAllergies || userAllergies.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  // √úr√ºn√ºn alerjanlarƒ±nƒ± al\r\n  if (!productAllergens || productAllergens.trim() === '') {\r\n    return null;\r\n  }\r\n\r\n  let productAllergensList: string[] = [];\r\n  try {\r\n    productAllergensList = JSON.parse(productAllergens);\r\n  } catch (e) {\r\n    // String olarak geldiyse virg√ºlle ayƒ±r\r\n    productAllergensList = productAllergens.split(',').map(a => a.trim()).filter(a => a);\r\n  }\r\n\r\n  // E≈üle≈üen alerjanlarƒ± bul\r\n  const matchedAllergens = productAllergensList.filter(allergen => {\r\n    return userAllergies.some(userAllergy => {\r\n      // \"Diƒüer: xyz\" formatƒ±nƒ± temizle\r\n      const cleanUserAllergy = userAllergy.replace('Diƒüer: ', '').toLowerCase().trim();\r\n      const cleanProductAllergen = allergen.toLowerCase().trim();\r\n      return cleanUserAllergy === cleanProductAllergen || cleanProductAllergen.includes(cleanUserAllergy);\r\n    });\r\n  });\r\n\r\n  // E≈üle≈üme varsa uyarƒ± d√∂nd√ºr\r\n  if (matchedAllergens.length > 0) {\r\n    const allergenText = matchedAllergens.join(', ');\r\n    const icons = matchedAllergens.map(allergen => getAllergenIcon(allergen)).join(' ');\r\n\r\n    return {\r\n      allergens: matchedAllergens,\r\n      icons,\r\n      text: allergenText\r\n    };\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\n/**\r\n * Kullanƒ±cƒ±nƒ±n alerji listesini localStorage'dan al\r\n * @returns Alerji listesi array\r\n */\r\nexport function getUserAllergies(): string[] {\r\n  try {\r\n    const userData = localStorage.getItem('userData');\r\n    if (!userData) return [];\r\n\r\n    const user = JSON.parse(userData);\r\n    if (!user.allergies) return [];\r\n\r\n    // JSON array olarak geliyorsa\r\n    if (Array.isArray(user.allergies)) {\r\n      return user.allergies;\r\n    }\r\n\r\n    // String olarak geliyorsa parse et\r\n    if (typeof user.allergies === 'string') {\r\n      try {\r\n        const parsed = JSON.parse(user.allergies);\r\n        if (Array.isArray(parsed)) {\r\n          return parsed;\r\n        }\r\n        // Tek bir string ise array'e √ßevir\r\n        return [user.allergies];\r\n      } catch {\r\n        // JSON deƒüilse tek bir string olarak d√∂nd√ºr\r\n        return [user.allergies];\r\n      }\r\n    }\r\n\r\n    return [];\r\n  } catch (error) {\r\n    console.error('Alerji bilgisi alƒ±namadƒ±:', error);\r\n    return [];\r\n  }\r\n}\r\n","'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { checkProductAllergens, getUserAllergies } from '@/utils/allergens';\r\n\r\ninterface AllergenWarningProps {\r\n  productAllergens?: string;\r\n  className?: string;\r\n}\r\n\r\nexport default function AllergenWarning({ productAllergens, className = '' }: AllergenWarningProps) {\r\n  const [warning, setWarning] = useState<{ allergens: string[]; icons: string; text: string } | null>(null);\r\n\r\n  useEffect(() => {\r\n    const userAllergies = getUserAllergies();\r\n    const result = checkProductAllergens(productAllergens, userAllergies);\r\n    setWarning(result);\r\n  }, [productAllergens]);\r\n\r\n  if (!warning) return null;\r\n\r\n  return (\r\n    <span\r\n      className={`allergen-warning ${className}`}\r\n      title={`‚ö†Ô∏è Alerjen: ${warning.text}`}\r\n    >\r\n      {warning.icons}\r\n    </span>\r\n  );\r\n}\r\n","'use client';\n\nimport { useEffect, useState, useRef } from 'react';\nimport { useMenu } from '@/contexts/MenuContext';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { getTitle, getDescription } from '@/utils/language';\nimport AllergenWarning from '@/components/common/AllergenWarning';\n\nexport default function ProductListModal() {\n  const {\n    menuData,\n    customerData,\n    categoriesData,\n    selectedCategory,\n    isProductListModalOpen,\n    closeProductListModal,\n    openProductDetailModal,\n    isTableMode,\n    cartKey,\n    productTokenSettings,\n  } = useMenu();\n  const { language, t } = useLanguage();\n\n  const [activeCategory, setActiveCategory] = useState(selectedCategory);\n  const [cartItems, setCartItems] = useState<any[]>([]);\n  const sliderRef = useRef<HTMLDivElement>(null);\n  const productListRef = useRef<HTMLDivElement>(null);\n  const touchStartX = useRef<number>(0);\n  const touchEndX = useRef<number>(0);\n\n  // Load cart items from localStorage\n  useEffect(() => {\n    const loadCart = () => {\n      if (isTableMode && cartKey) {\n        const savedCart = localStorage.getItem(`cart_${cartKey}`);\n        setCartItems(savedCart ? JSON.parse(savedCart) : []);\n      }\n    };\n\n    loadCart();\n\n    // Listen for cart updates\n    const handleCartUpdate = () => {\n      loadCart();\n    };\n\n    window.addEventListener('cartUpdated', handleCartUpdate);\n    return () => window.removeEventListener('cartUpdated', handleCartUpdate);\n  }, [isTableMode, cartKey]);\n\n  const getCartQuantity = (productId: number) => {\n    const item = cartItems.find((item: any) => item.productId === productId);\n    return item ? item.quantity : 0;\n  };\n\n  const handleAddToCart = (product: any, e: React.MouseEvent) => {\n    e.stopPropagation();\n    if (!isTableMode || !cartKey) return;\n\n    const savedCart = localStorage.getItem(`cart_${cartKey}`);\n    let items = savedCart ? JSON.parse(savedCart) : [];\n\n    const existingItemIndex = items.findIndex(\n      (item: any) => item.productId === product.id\n    );\n\n    if (existingItemIndex >= 0) {\n      items[existingItemIndex].quantity += 1;\n    } else {\n      const productImageUrl = getImageUrl(product.picture, customerLogo);\n      const productName = getTitle(product, language);\n      items.push({\n        id: Date.now(),\n        productId: product.id,\n        sambaId: product.sambaId,\n        name: productName,\n        price: product.price,\n        quantity: 1,\n        image: productImageUrl,\n      });\n    }\n\n    localStorage.setItem(`cart_${cartKey}`, JSON.stringify(items));\n    setCartItems(items);\n\n    // Dispatch event to update cart sidebar\n    window.dispatchEvent(new Event('cartUpdated'));\n\n    // Success feedback\n    const btn = e.currentTarget as HTMLButtonElement;\n    const originalHTML = btn.innerHTML;\n    const originalBg = btn.style.background;\n    btn.innerHTML = '<i class=\"fas fa-check\"></i> Eklendi!';\n    btn.style.background = 'linear-gradient(135deg, #28a745, #20c997)';\n\n    setTimeout(() => {\n      btn.innerHTML = originalHTML;\n      btn.style.background = originalBg;\n    }, 1500);\n  };\n\n  useEffect(() => {\n    if (selectedCategory) {\n      setActiveCategory(selectedCategory);\n    }\n  }, [selectedCategory]);\n\n  useEffect(() => {\n    const handleEsc = (e: KeyboardEvent) => {\n      if (e.key === 'Escape' && isProductListModalOpen) {\n        closeProductListModal();\n      }\n    };\n    document.addEventListener('keydown', handleEsc);\n    return () => document.removeEventListener('keydown', handleEsc);\n  }, [isProductListModalOpen, closeProductListModal]);\n\n  // Swipe handling for category switching\n  const handleTouchStart = (e: React.TouchEvent) => {\n    touchStartX.current = e.changedTouches[0].screenX;\n  };\n\n  const handleTouchEnd = (e: React.TouchEvent) => {\n    touchEndX.current = e.changedTouches[0].screenX;\n    handleSwipe();\n  };\n\n  const handleSwipe = () => {\n    const swipeThreshold = 50;\n    const diff = touchStartX.current - touchEndX.current;\n\n    if (Math.abs(diff) > swipeThreshold && categories.length > 0) {\n      const currentIndex = categories.findIndex((cat) => cat.sambaId === activeCategory?.sambaId);\n\n      if (currentIndex !== -1) {\n        if (diff > 0) {\n          // Swipe left - next category\n          const nextIndex = (currentIndex + 1) % categories.length;\n          switchCategory(categories[nextIndex]);\n        } else {\n          // Swipe right - previous category\n          const prevIndex = (currentIndex - 1 + categories.length) % categories.length;\n          switchCategory(categories[prevIndex]);\n        }\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (sliderRef.current && activeCategory && menuData?.menu) {\n      const categoryIndex = menuData.menu.findIndex((cat) => cat.sambaId === activeCategory.sambaId);\n      if (categoryIndex !== -1) {\n        const categoryElements = sliderRef.current.querySelectorAll('.category-item');\n        const activeElement = categoryElements[categoryIndex] as HTMLElement;\n        if (activeElement) {\n          setTimeout(() => {\n            const scrollLeft = activeElement.offsetLeft - sliderRef.current!.offsetWidth / 2 + activeElement.offsetWidth / 2;\n            sliderRef.current?.scrollTo({ left: scrollLeft, behavior: 'smooth' });\n          }, 100);\n        }\n      }\n    }\n  }, [activeCategory, menuData]);\n\n  const categories = menuData?.menu || [];\n\n  const switchCategory = (newCategory: typeof activeCategory) => {\n    setActiveCategory(newCategory);\n  };\n\n  const getImageUrl = (picture?: string, fallbackLogo?: string) => {\n    if (!picture) {\n      return fallbackLogo || 'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"300\" height=\"300\"%3E%3Crect fill=\"%23667eea\" width=\"300\" height=\"300\"/%3E%3C/svg%3E';\n    }\n    if (picture.startsWith('http')) {\n      return picture.replace('http://', 'https://');\n    }\n    const cleanPath = picture.startsWith('Uploads/') ? picture.substring(8) : picture;\n    return 'https://api.canlimenu.com/Uploads/' + cleanPath;\n  };\n\n  const customerLogo = menuData?.customerLogo ? getImageUrl(menuData.customerLogo) : undefined;\n\n  // Background URL\n  const backgroundUrl = customerData?.customer.webBackground\n    ? customerData.customer.webBackground.startsWith('http')\n      ? customerData.customer.webBackground.replace('http://', 'https://')\n      : `https://api.canlimenu.com/Uploads/${customerData.customer.webBackground.replace('Uploads/', '')}`\n    : undefined;\n\n  const containerStyle = backgroundUrl\n    ? {\n        backgroundImage: `url('${backgroundUrl}')`,\n        backgroundPosition: 'center center',\n        backgroundSize: 'cover',\n        backgroundRepeat: 'no-repeat',\n      }\n    : { background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' };\n\n  // Font ve renk customization\n  const productFont = customerData?.customer.productFont || 'Inter, sans-serif';\n  const productTitleColor = customerData?.customer.productTitleColor || '#FFFFFF';\n  const productDescriptionColor = customerData?.customer.productDescriptionColor || 'rgba(255, 255, 255, 0.88)';\n\n  const titleStyle = {\n    fontFamily: productFont,\n    color: productTitleColor,\n  };\n\n  const descriptionStyle = {\n    fontFamily: productFont,\n    color: productDescriptionColor,\n  };\n\n  return (\n    <>\n      <div\n        className=\"product-modal-overlay\"\n        onClick={closeProductListModal}\n        style={{\n          display: isProductListModalOpen ? 'block' : 'none',\n          opacity: isProductListModalOpen ? 1 : 0,\n        }}\n      />\n\n      <div\n        className=\"product-modal-container\"\n        style={{\n          ...containerStyle,\n          display: isProductListModalOpen ? 'flex' : 'none',\n          opacity: isProductListModalOpen ? 1 : 0,\n          transform: isProductListModalOpen ? 'translateX(-50%) translateY(0)' : 'translateX(-50%) translateY(20px)',\n        }}\n      >\n        <div className=\"page-content\">\n          <div className=\"container page-header\" style={{ marginBottom: 0, paddingBottom: 0 }}>\n            <a href=\"#\" onClick={(e) => { e.preventDefault(); closeProductListModal(); }} style={{ fontSize: '20px', color: 'white' }}>\n              <i className=\"fa-solid fa-caret-left\"></i> {t('back')}\n            </a>\n          </div>\n\n          <div className=\"container\" style={{ paddingBottom: 0 }}>\n            <div className=\"current-category-title\">\n              <h2 id=\"modalCategoryTitle\">\n                {(() => {\n                  if (!activeCategory) return '';\n                  // activeCategory i√ßin titleEnglish'i categoriesData'dan al\n                  const activeCatData = categoriesData.find((c) => c.category.sambaId === activeCategory.sambaId);\n                  const titleEnglish = activeCatData?.category?.titleEnglish || '';\n                  return language === 'en' && titleEnglish ? titleEnglish : activeCategory.title;\n                })()}\n              </h2>\n            </div>\n          </div>\n\n          <div className=\"container\" style={{ paddingBottom: 0, overflowX: 'visible' }}>\n            <div className=\"category-slider-section\">\n              <div className=\"category-slider\" id=\"modalCategorySlider\" ref={sliderRef}>\n                {categories.map((cat) => {\n                  // categoriesData'dan bu kategorinin picture'ƒ±nƒ± VE titleEnglish'ini bul\n                  const categoryWithPicture = categoriesData.find((c) => c.category.sambaId === cat.sambaId);\n                  let categoryImageUrl = '';\n\n                  if (categoryWithPicture && categoryWithPicture.picture) {\n                    // Picture varsa URL'i olu≈ütur\n                    const picture = categoryWithPicture.picture;\n                    if (picture.startsWith('http')) {\n                      categoryImageUrl = picture.replace('http://', 'https://');\n                    } else {\n                      const picturePath = picture.startsWith('Uploads/')\n                        ? picture.substring('Uploads/'.length)\n                        : picture;\n                      categoryImageUrl = `https://api.canlimenu.com/Uploads/${picturePath}`;\n                    }\n                  } else if (customerLogo) {\n                    // Picture yoksa logo kullan\n                    categoryImageUrl = customerLogo;\n                  } else {\n                    // Placeholder\n                    categoryImageUrl = 'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"300\" height=\"300\"%3E%3Crect fill=\"%23667eea\" width=\"300\" height=\"300\"/%3E%3C/svg%3E';\n                  }\n\n                  const isActive = cat.sambaId === activeCategory?.sambaId;\n                  // titleEnglish'i categoriesData'dan al ve dile g√∂re se√ß\n                  const titleEnglish = categoryWithPicture?.category?.titleEnglish || '';\n                  const categoryName = language === 'en' && titleEnglish ? titleEnglish : cat.title;\n\n                  return (\n                    <a\n                      key={cat.sambaId}\n                      href=\"#\"\n                      className={'category-item category-slide' + (isActive ? ' active' : '')}\n                      data-category-id={cat.sambaId}\n                      onClick={(e) => {\n                        e.preventDefault();\n                        switchCategory(cat);\n                      }}\n                    >\n                      <div className=\"image-box\">\n                        <img src={categoryImageUrl} alt={categoryName} loading=\"eager\" />\n                      </div>\n                      <div className=\"category-title\">{categoryName}</div>\n                    </a>\n                  );\n                })}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"container\" style={{ paddingTop: 0, paddingBottom: '120px' }}>\n            <div\n              className=\"serach-area\"\n              id=\"modalProductList\"\n              onTouchStart={handleTouchStart}\n              onTouchEnd={handleTouchEnd}\n            >\n              {/* ‚ö° T√úM KATEGORƒ∞LERƒ∞ RENDER ET - Eski sistem gibi DOM cache */}\n              {categories.map((category) => {\n                const products = category.products || [];\n                const isActive = category.sambaId === activeCategory?.sambaId;\n\n                return (\n                  <div\n                    key={`category-container-${category.sambaId}`}\n                    data-category-container={`cat_${category.sambaId}`}\n                    style={{ display: isActive ? 'block' : 'none' }}\n                  >\n                    {products.length === 0 ? (\n                      <div style={{ padding: '50px', textAlign: 'center', color: 'white' }}>\n                        {t('noProductsInCategory')}\n                      </div>\n                    ) : (\n                      <div className=\"product-list-container\">\n                        <div className=\"products-no-tabs-wrapper\">\n                          {products.map((product) => {\n                    const productImageUrl = getImageUrl(product.picture, customerLogo);\n                    const productTitle = getTitle(product, language);\n                    const productDetail = getDescription(product, language);\n\n                    return (\n                      <div\n                        key={product.id}\n                        className=\"product-card product-item\"\n                        style={{ cursor: 'pointer', position: 'relative' }}\n                        data-product-id={product.id}\n                        data-samba-product-id={product.sambaId}\n                        onClick={() => openProductDetailModal(product)}\n                      >\n                        {isTableMode && getCartQuantity(product.id) > 0 && (\n                          <span className=\"cart-badge\" style={{\n                            position: 'absolute',\n                            top: '8px',\n                            right: '8px',\n                            background: '#dc3545',\n                            color: 'white',\n                            borderRadius: '50%',\n                            width: '24px',\n                            height: '24px',\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                            fontSize: '12px',\n                            fontWeight: 700,\n                            zIndex: 10,\n                            boxShadow: '0 2px 4px rgba(0,0,0,0.2)',\n                          }}>\n                            {getCartQuantity(product.id)}\n                          </span>\n                        )}\n                        {/* Token Earn Badge - Sol √ºstte */}\n                        {isTableMode && (() => {\n                          const tokenSetting = productTokenSettings[product.id] || productTokenSettings[product.sambaId];\n                          if (!tokenSetting || !tokenSetting.earnTokens || tokenSetting.earnTokens <= 0) return null;\n\n                          return (\n                            <div style={{\n                              position: 'absolute',\n                              top: '10px',\n                              left: '10px',\n                              zIndex: 10,\n                              pointerEvents: 'none',\n                            }}>\n                              <span style={{\n                                display: 'inline-flex',\n                                alignItems: 'center',\n                                gap: '6px',\n                                padding: '6px 12px',\n                                background: 'linear-gradient(135deg, #ffc107 0%, #ff9800 100%)',\n                                color: 'white',\n                                borderRadius: '20px',\n                                fontSize: '12px',\n                                fontWeight: 700,\n                                boxShadow: '0 4px 12px rgba(255, 193, 7, 0.4), 0 2px 4px rgba(0, 0, 0, 0.2)',\n                                border: '2px solid rgba(255, 255, 255, 0.3)',\n                              }}>\n                                +{tokenSetting.earnTokens} jeton\n                              </span>\n                            </div>\n                          );\n                        })()}\n                        <div className=\"product-content\">\n                          <div className=\"product-image\" style={{ position: 'relative' }}>\n                            <AllergenWarning productAllergens={product.allergens} className=\"allergen-on-image\" />\n                            {productImageUrl ? (\n                              <img\n                                src={productImageUrl}\n                                alt={productTitle}\n                                loading=\"eager\"\n                                decoding=\"async\"\n                              />\n                            ) : (\n                              <div className=\"no-image-placeholder\">üçΩÔ∏è</div>\n                            )}\n                            <div className=\"product-header\">\n                              <h3 className=\"product-name product-title\" data-title-tr={product.title} data-title-en={product.titleEn || product.title} style={titleStyle}>\n                                {productTitle}\n                              </h3>\n                            </div>\n                          </div>\n                          <div className=\"product-info\">\n                            {product.price > 0 && (\n                              <div className=\"price-container moved\">\n                                <div className=\"product-price price\">\n                                  <span className=\"kdv-label\"><span>KDV</span><span>Dahil</span></span>\n                                  <span className=\"price-value\" style={{fontFamily: productFont}}>\n                                    {product.price.toFixed(2)} ‚Ç∫\n                                    {/* Token Redeem Badge - Fiyatƒ±n yanƒ±nda */}\n                                    {isTableMode && (() => {\n                                      const tokenSetting = productTokenSettings[product.id] || productTokenSettings[product.sambaId];\n                                      if (!tokenSetting || !tokenSetting.redeemTokens || tokenSetting.redeemTokens <= 0) return null;\n\n                                      return (\n                                        <span style={{\n                                          display: 'inline-flex',\n                                          alignItems: 'center',\n                                          gap: '4px',\n                                          marginLeft: '8px',\n                                          padding: '4px 10px',\n                                          background: 'linear-gradient(135deg, #28a745 0%, #20c997 100%)',\n                                          color: 'white',\n                                          borderRadius: '12px',\n                                          fontSize: '11px',\n                                          fontWeight: 600,\n                                          boxShadow: '0 2px 6px rgba(40, 167, 69, 0.3)',\n                                          border: '1px solid rgba(255, 255, 255, 0.2)',\n                                        }}>\n                                          {tokenSetting.redeemTokens} jeton ile\n                                        </span>\n                                      );\n                                    })()}\n                                  </span>\n                                </div>\n                              </div>\n                            )}\n                            {productDetail && (\n                              <p className=\"product-detail\" data-detail-tr={product.detail} data-detail-en={product.detailEn || product.DetailEn || product.detail} style={descriptionStyle}>\n                                {productDetail}\n                              </p>\n                            )}\n                            {isTableMode && (\n                              <button\n                                type=\"button\"\n                                className=\"add-to-cart-btn\"\n                                onClick={(e) => handleAddToCart(product, e)}\n                                style={{\n                                  width: '100%',\n                                  padding: '10px',\n                                  marginTop: '8px',\n                                  background: 'linear-gradient(135deg, #f39c12 0%, #e67e22 100%)',\n                                  color: 'white',\n                                  border: 'none',\n                                  borderRadius: '8px',\n                                  fontSize: '13px',\n                                  fontWeight: 600,\n                                  cursor: 'pointer',\n                                  display: 'flex',\n                                  alignItems: 'center',\n                                  justifyContent: 'center',\n                                  gap: '6px',\n                                }}\n                              >\n                                <i className=\"fas fa-shopping-cart\"></i>\n                                {t('addToCart')}\n                              </button>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                          );\n                        })}\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useMenu } from '@/contexts/MenuContext';\nimport { useLanguage } from '@/contexts/LanguageContext';\nimport { getTitle, getDescription } from '@/utils/language';\nimport { saveCart, loadCart } from '@/utils/cartUtils';\nimport AllergenWarning from '@/components/common/AllergenWarning';\n\nexport default function ProductDetailModal() {\n  const { menuData, customerData, selectedProduct, isProductDetailModalOpen, closeProductDetailModal, isTableMode, cartKey, productTokenSettings } = useMenu();\n  const { language, t } = useLanguage();\n  const [quantity, setQuantity] = useState(1);\n\n  // Font ve renk customization\n  const productFont = customerData?.customer.productFont || 'Inter, sans-serif';\n  const productTitleColor = customerData?.customer.productTitleColor || '#FFFFFF';\n  const productDescriptionColor = customerData?.customer.productDescriptionColor || 'rgba(255, 255, 255, 0.88)';\n\n  // Modal her a√ßƒ±ldƒ±ƒüƒ±nda quantity'yi sƒ±fƒ±rla\n  useEffect(() => {\n    if (isProductDetailModalOpen) {\n      setQuantity(1);\n    }\n  }, [isProductDetailModalOpen]);\n\n  useEffect(() => {\n    const handleEsc = (e: KeyboardEvent) => {\n      if (e.key === 'Escape' && isProductDetailModalOpen) {\n        closeProductDetailModal();\n      }\n    };\n    document.addEventListener('keydown', handleEsc);\n    return () => document.removeEventListener('keydown', handleEsc);\n  }, [isProductDetailModalOpen, closeProductDetailModal]);\n\n  const handleAddToCart = () => {\n    if (!selectedProduct || !isTableMode || !cartKey || !menuData) return;\n\n    // Customer code al (menuData'dan)\n    const customerCode = menuData.customerTitle || 'unknown';\n\n    // Mevcut sepeti y√ºkle (cartUtils ile - otomatik temizlik var)\n    let cartItems = loadCart(cartKey, customerCode);\n\n    // √úr√ºn zaten sepette var mƒ±?\n    const productId = selectedProduct.Id ?? selectedProduct.id;\n    const existingItemIndex = cartItems.findIndex(\n      (item: any) => item.productId === productId\n    );\n\n    if (existingItemIndex >= 0) {\n      // Varsa miktarƒ± artƒ±r\n      cartItems[existingItemIndex].quantity += quantity;\n    } else {\n      // Yoksa yeni ekle\n      const productName = getTitle(selectedProduct, language);\n      cartItems.push({\n        id: Date.now(),\n        productId: productId,\n        sambaId: selectedProduct.SambaId ?? selectedProduct.sambaId,\n        name: productName,\n        price: selectedProduct.Price ?? selectedProduct.price ?? 0,\n        quantity: quantity,\n        image: selectedProduct.Picture ?? selectedProduct.picture,\n      });\n    }\n\n    // Sepeti kaydet (cartUtils ile - customerCode ve timestamp ile)\n    saveCart(cartKey, cartItems, customerCode);\n\n    // Dispatch event to update cart sidebar\n    window.dispatchEvent(new Event('cartUpdated'));\n\n    // Success feedback\n    const productName = getTitle(selectedProduct, language);\n    alert(`${productName} ${t('addedToCart')}`);\n\n    // Modal'ƒ± kapat\n    closeProductDetailModal();\n  };\n\n  if (!isProductDetailModalOpen || !selectedProduct) return null;\n\n  const getImageUrl = (picture?: string) => {\n    if (!picture) {\n      const customerLogo = menuData?.customerLogo;\n      if (customerLogo) {\n        if (customerLogo.startsWith('http')) {\n          return customerLogo.replace('http://', 'https://');\n        }\n        const cleanPath = customerLogo.startsWith('Uploads/') ? customerLogo.substring(8) : customerLogo;\n        return `https://api.canlimenu.com/Uploads/${cleanPath}`;\n      }\n      return 'data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" width=\"800\" height=\"600\"%3E%3Crect fill=\"%23667eea\" width=\"800\" height=\"600\"/%3E%3C/svg%3E';\n    }\n    if (picture.startsWith('http')) {\n      return picture.replace('http://', 'https://');\n    }\n    const cleanPath = picture.startsWith('Uploads/') ? picture.substring(8) : picture;\n    return `https://api.canlimenu.com/Uploads/${cleanPath}`;\n  };\n\n  const productImageUrl = getImageUrl(selectedProduct.Picture);\n  const productTitle = getTitle(selectedProduct, language);\n  const productDescription = getDescription(selectedProduct, language);\n  const productDetail = getDescription(selectedProduct, language);\n\n  return (\n    <div\n      className=\"single-product-modal\"\n      style={{\n        display: isProductDetailModalOpen ? 'flex' : 'none',\n      }}\n    >\n      <div className=\"modal-overlay\" onClick={closeProductDetailModal} />\n\n      <div className=\"modal-content\">\n        <button className=\"modal-close\" onClick={closeProductDetailModal} aria-label={t('close')}>\n          <i className=\"fa-solid fa-xmark\"></i>\n        </button>\n\n        <div className=\"modal-image-container\" style={{ position: 'relative' }}>\n          <AllergenWarning productAllergens={selectedProduct.Allergens ?? selectedProduct.allergens} className=\"allergen-on-image\" />\n          <img\n            src={productImageUrl}\n            alt={productTitle}\n            className=\"modal-product-image\"\n            loading=\"eager\"\n          />\n        </div>\n\n        <div className=\"modal-info-container\">\n          <h1 className=\"modal-product-title\" style={{ fontFamily: productFont, color: productTitleColor }}>\n            {productTitle}\n          </h1>\n\n          {productDescription && (\n            <p className=\"modal-product-description\" style={{ fontFamily: productFont, color: productDescriptionColor }}>\n              {productDescription}\n            </p>\n          )}\n\n          {productDetail && (\n            <div className=\"modal-product-detail\">\n              <p style={{ fontFamily: productFont, color: productDescriptionColor }}>\n                {productDetail}\n              </p>\n            </div>\n          )}\n\n          {/* Jeton Bilgisi */}\n          {isTableMode && (() => {\n            const productId = selectedProduct.Id ?? selectedProduct.id;\n            const sambaId = selectedProduct.SambaId ?? selectedProduct.sambaId;\n            const tokenSetting = (productId && productTokenSettings[productId]) || (sambaId && productTokenSettings[sambaId]);\n            const hasEarn = tokenSetting && tokenSetting.earnTokens > 0;\n            const hasRedeem = tokenSetting && tokenSetting.redeemTokens > 0;\n\n            if (!hasEarn && !hasRedeem) return null;\n\n            return (\n              <div style={{ marginBottom: '18px' }}>\n                {hasEarn && (\n                  <div style={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '8px',\n                    padding: '10px 14px',\n                    borderRadius: '10px',\n                    background: 'linear-gradient(135deg, rgba(255, 193, 7, 0.2), rgba(255, 152, 0, 0.15))',\n                    border: '1px solid rgba(255, 193, 7, 0.3)',\n                    backdropFilter: 'blur(10px)',\n                    marginBottom: hasRedeem ? '8px' : '0',\n                  }}>\n                    <span style={{ fontSize: '20px' }}>ü™ô</span>\n                    <span style={{ color: 'white', fontSize: '0.95rem', fontWeight: 500 }}>\n                      {t('earnTokensMessage').replace('{count}', String(tokenSetting.earnTokens))}\n                    </span>\n                  </div>\n                )}\n                {hasRedeem && (\n                  <div style={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '8px',\n                    padding: '10px 14px',\n                    borderRadius: '10px',\n                    background: 'linear-gradient(135deg, rgba(40, 167, 69, 0.2), rgba(32, 201, 151, 0.15))',\n                    border: '1px solid rgba(40, 167, 69, 0.3)',\n                    backdropFilter: 'blur(10px)',\n                  }}>\n                    <span style={{ fontSize: '20px' }}>ü™ô</span>\n                    <span style={{ color: 'white', fontSize: '0.95rem', fontWeight: 500 }}>\n                      {t('redeemTokensMessage').replace('{count}', String(tokenSetting.redeemTokens))}\n                    </span>\n                  </div>\n                )}\n              </div>\n            );\n          })()}\n\n          <div className=\"modal-product-price\">\n            {(selectedProduct.Price ?? selectedProduct.price ?? 0) > 0 ? `${(selectedProduct.Price ?? selectedProduct.price ?? 0).toFixed(2)} TL` : t('noPriceInfo')}\n          </div>\n\n          {isTableMode && (\n            <>\n              {/* Quantity Selector */}\n              <div\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  gap: '15px',\n                  margin: '20px 0',\n                }}\n              >\n                <button\n                  onClick={() => setQuantity(Math.max(1, quantity - 1))}\n                  style={{\n                    width: '40px',\n                    height: '40px',\n                    border: '2px solid #ddd',\n                    background: 'white',\n                    borderRadius: '8px',\n                    cursor: 'pointer',\n                    fontSize: '18px',\n                    fontWeight: 600,\n                    color: '#666',\n                  }}\n                >\n                  -\n                </button>\n                <span\n                  style={{\n                    fontSize: '20px',\n                    fontWeight: 600,\n                    minWidth: '40px',\n                    textAlign: 'center',\n                    color: 'white',\n                  }}\n                >\n                  {quantity}\n                </span>\n                <button\n                  onClick={() => setQuantity(quantity + 1)}\n                  style={{\n                    width: '40px',\n                    height: '40px',\n                    border: '2px solid #28a745',\n                    background: '#28a745',\n                    color: 'white',\n                    borderRadius: '8px',\n                    cursor: 'pointer',\n                    fontSize: '18px',\n                    fontWeight: 600,\n                  }}\n                >\n                  +\n                </button>\n              </div>\n\n              {/* Add to Cart Button */}\n              <button className=\"modal-add-to-cart-btn\" onClick={handleAddToCart}>\n                <i className=\"fa-solid fa-cart-plus\"></i>\n                <span>{t('addToCart')}</span>\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import tr from '@/locales/tr.json';\r\nimport en from '@/locales/en.json';\r\n\r\nexport type Locale = 'tr' | 'en';\r\nexport type TranslationKey = string;\r\n\r\nconst translations = {\r\n  tr,\r\n  en,\r\n};\r\n\r\n/**\r\n * Nested object'ten deep key ile deƒüer almak i√ßin yardƒ±mcƒ± fonksiyon\r\n * √ñrnek: get(obj, 'api.errors.general') => obj.api.errors.general\r\n */\r\nfunction getNestedValue(obj: any, key: string): string {\r\n  return key.split('.').reduce((acc, part) => acc?.[part], obj) || key;\r\n}\r\n\r\n/**\r\n * √áeviri fonksiyonu\r\n * @param locale - Dil kodu ('tr' veya 'en')\r\n * @param key - √áeviri anahtarƒ± (√∂rn: 'api.errors.general')\r\n * @param params - Opsiyonel parametreler i√ßin object\r\n * @returns √áevrilmi≈ü metin\r\n */\r\nexport function t(locale: Locale, key: TranslationKey, params?: Record<string, string | number>): string {\r\n  const translation = getNestedValue(translations[locale], key);\r\n\r\n  if (!params) {\r\n    return translation;\r\n  }\r\n\r\n  // Parametreleri {{param}} formatƒ±nda deƒüi≈ütir\r\n  return Object.entries(params).reduce((text, [key, value]) => {\r\n    return text.replace(new RegExp(`{{${key}}}`, 'g'), String(value));\r\n  }, translation);\r\n}\r\n\r\n/**\r\n * Varsayƒ±lan dil\r\n */\r\nexport const DEFAULT_LOCALE: Locale = 'tr';\r\n\r\n/**\r\n * Tarayƒ±cƒ± dilini tespit et\r\n */\r\nexport function detectBrowserLocale(): Locale {\r\n  if (typeof window === 'undefined') {\r\n    return DEFAULT_LOCALE;\r\n  }\r\n\r\n  const browserLang = navigator.language.split('-')[0];\r\n  return (browserLang === 'en' || browserLang === 'tr') ? browserLang as Locale : DEFAULT_LOCALE;\r\n}\r\n\r\n/**\r\n * Locale'i localStorage'a kaydet\r\n */\r\nexport function saveLocale(locale: Locale): void {\r\n  if (typeof window !== 'undefined') {\r\n    localStorage.setItem('locale', locale);\r\n  }\r\n}\r\n\r\n/**\r\n * Locale'i localStorage'dan oku\r\n */\r\nexport function loadLocale(): Locale {\r\n  if (typeof window === 'undefined') {\r\n    return DEFAULT_LOCALE;\r\n  }\r\n\r\n  const stored = localStorage.getItem('locale');\r\n  return (stored === 'tr' || stored === 'en') ? stored : detectBrowserLocale();\r\n}\r\n","// Game API - Leaderboard ve oyun i≈ülemleri\r\nimport { t, loadLocale } from './i18n';\r\n\r\nexport interface LeaderboardEntry {\r\n  rank: number;\r\n  playerNickname: string;\r\n  score: number;\r\n  playedAt: string;\r\n  playedAtFormatted?: string;\r\n  deviceType?: string;\r\n  gameData?: string;\r\n}\r\n\r\nexport interface SubmitScoreDto {\r\n  GameType: string;\r\n  PlayerNickname: string;\r\n  Score: number;\r\n  GameData?: string;\r\n  Duration?: number;\r\n  DeviceType?: string;\r\n  VenueCode?: string;\r\n  EndUserId?: number;\r\n}\r\n\r\n/**\r\n * Skor submit et (leaderboard'a kaydet)\r\n * Next.js API route √ºzerinden proxy edilir\r\n */\r\nexport async function submitScore(data: SubmitScoreDto): Promise<{ success: boolean; message?: string }> {\r\n  const locale = loadLocale();\r\n\r\n  try {\r\n    const response = await fetch('/api/game/submit', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n        'Accept-Language': locale,\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n\r\n    const result = await response.json();\r\n\r\n    if (response.ok && result.success) {\r\n      return { success: true, message: result.message || t(locale, 'api.success.scoreSubmitted') };\r\n    } else {\r\n      console.error('‚ùå Skor kaydedilemedi:', result);\r\n      return { success: false, message: result.message || t(locale, 'game.errors.scoreNotSubmitted') };\r\n    }\r\n  } catch (error) {\r\n    console.error('‚ùå Skor submit hatasƒ±:', error);\r\n    return { success: false, message: t(locale, 'game.messages.connectionError') };\r\n  }\r\n}\r\n\r\n/**\r\n * Oyun i√ßin top skorlarƒ± getir\r\n * Next.js API route √ºzerinden proxy edilir\r\n */\r\nexport async function getLeaderboard(\r\n  gameType: string,\r\n  count: number = 10\r\n): Promise<LeaderboardEntry[]> {\r\n  const locale = loadLocale();\r\n\r\n  try {\r\n    const response = await fetch(`/api/game/leaderboard/${gameType}/${count}`, {\r\n      headers: {\r\n        'Accept-Language': locale,\r\n      },\r\n    });\r\n\r\n    if (response.ok) {\r\n      const data = await response.json();\r\n      return data;\r\n    } else {\r\n      console.error('‚ùå', t(locale, 'game.errors.leaderboardNotLoaded'));\r\n      return [];\r\n    }\r\n  } catch (error) {\r\n    console.error('‚ùå Leaderboard fetch hatasƒ±:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n * Oyuncu istatistiklerini getir\r\n * Next.js API route √ºzerinden proxy edilir\r\n */\r\nexport async function getPlayerStats(nickname: string): Promise<any> {\r\n  const locale = loadLocale();\r\n\r\n  try {\r\n    const response = await fetch(`/api/game/player/${encodeURIComponent(nickname)}/stats`, {\r\n      headers: {\r\n        'Accept-Language': locale,\r\n      },\r\n    });\r\n\r\n    if (response.ok) {\r\n      const data = await response.json();\r\n      return data;\r\n    } else {\r\n      console.error('‚ùå', t(locale, 'game.errors.playerStatsNotLoaded'));\r\n      return null;\r\n    }\r\n  } catch (error) {\r\n    console.error('‚ùå Player stats fetch hatasƒ±:', error);\r\n    return null;\r\n  }\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { submitScore, getLeaderboard, type LeaderboardEntry } from '@/lib/gameApi';\r\n\r\n// Tile interface\r\ninterface Tile {\r\n  id: number;\r\n  value: number;\r\n  x: number;\r\n  y: number;\r\n  previousPosition?: { x: number; y: number };\r\n  mergedFrom?: Tile[];\r\n  isNew?: boolean;\r\n  isMerged?: boolean;\r\n}\r\n\r\n// Grid class\r\nclass Grid {\r\n  size: number;\r\n  cells: (Tile | null)[][];\r\n\r\n  constructor(size: number) {\r\n    this.size = size;\r\n    this.cells = [];\r\n    for (let x = 0; x < size; x++) {\r\n      this.cells[x] = [];\r\n      for (let y = 0; y < size; y++) {\r\n        this.cells[x][y] = null;\r\n      }\r\n    }\r\n  }\r\n\r\n  randomAvailableCell(): { x: number; y: number } | null {\r\n    const cells = this.availableCells();\r\n    if (cells.length) {\r\n      return cells[Math.floor(Math.random() * cells.length)];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  availableCells(): { x: number; y: number }[] {\r\n    const cells: { x: number; y: number }[] = [];\r\n    for (let x = 0; x < this.size; x++) {\r\n      for (let y = 0; y < this.size; y++) {\r\n        if (!this.cells[x][y]) {\r\n          cells.push({ x, y });\r\n        }\r\n      }\r\n    }\r\n    return cells;\r\n  }\r\n\r\n  cellsAvailable(): boolean {\r\n    return this.availableCells().length > 0;\r\n  }\r\n\r\n  cellContent(position: { x: number; y: number }): Tile | null {\r\n    if (this.withinBounds(position)) {\r\n      return this.cells[position.x][position.y];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  insertTile(tile: Tile): void {\r\n    this.cells[tile.x][tile.y] = tile;\r\n  }\r\n\r\n  removeTile(tile: Tile): void {\r\n    this.cells[tile.x][tile.y] = null;\r\n  }\r\n\r\n  withinBounds(position: { x: number; y: number }): boolean {\r\n    return position.x >= 0 && position.x < this.size &&\r\n           position.y >= 0 && position.y < this.size;\r\n  }\r\n\r\n  serialize(): { position: { x: number; y: number }; value: number }[] {\r\n    const result: { position: { x: number; y: number }; value: number }[] = [];\r\n    for (let x = 0; x < this.size; x++) {\r\n      for (let y = 0; y < this.size; y++) {\r\n        const tile = this.cells[x][y];\r\n        if (tile) {\r\n          result.push({ position: { x, y }, value: tile.value });\r\n        }\r\n      }\r\n    }\r\n    return result;\r\n  }\r\n}\r\n\r\ninterface Game2048Props {\r\n  onGameOver?: (score: number) => void;\r\n  onGameWon?: (score: number) => void;\r\n  playerNickname?: string;\r\n  customerCode?: string;\r\n}\r\n\r\nexport default function Game2048({ onGameOver, onGameWon, playerNickname: initialNickname, customerCode }: Game2048Props) {\r\n  const [grid, setGrid] = useState<Grid>(new Grid(4));\r\n  const [tiles, setTiles] = useState<Tile[]>([]);\r\n  const [score, setScore] = useState(0);\r\n  const [bestScore, setBestScore] = useState(0);\r\n  const [gameOver, setGameOver] = useState(false);\r\n  const [gameWon, setGameWon] = useState(false);\r\n  const [showMessage, setShowMessage] = useState(false);\r\n  const [showNicknameModal, setShowNicknameModal] = useState(false);\r\n  const [nickname, setNickname] = useState('');\r\n  const [leaderboard, setLeaderboard] = useState<LeaderboardEntry[]>([]);\r\n  const [scoreSubmitted, setScoreSubmitted] = useState(false);\r\n  const [showLeaderboard, setShowLeaderboard] = useState(true);\r\n  const [scoreIncrement, setScoreIncrement] = useState(0);\r\n  const [windowWidth, setWindowWidth] = useState(typeof window !== 'undefined' ? window.innerWidth : 1024);\r\n  const tileIdCounter = useRef(0);\r\n\r\n  // Load best score and leaderboard\r\n  useEffect(() => {\r\n    const saved = localStorage.getItem('bestScore_2048');\r\n    if (saved) {\r\n      setBestScore(parseInt(saved));\r\n    }\r\n\r\n    const savedVisibility = localStorage.getItem('leaderboardVisibility_2048');\r\n    if (savedVisibility !== null) {\r\n      setShowLeaderboard(savedVisibility === 'true');\r\n    }\r\n\r\n    loadLeaderboard();\r\n    restoreGameState();\r\n\r\n    // Nickname kontrol√º\r\n    console.log('üéÆ Game2048 mounted - initialNickname:', initialNickname);\r\n\r\n    // √ñNCE: initialNickname bo≈ü string ise localStorage'ƒ± temizle (logout yapƒ±lmƒ±≈ü demektir)\r\n    if (initialNickname === '') {\r\n      console.log('üóëÔ∏è Logout tespit edildi - localStorage temizleniyor');\r\n      localStorage.removeItem('playerNickname_2048');\r\n    }\r\n\r\n    // Nickname kontrol√º (retry yok, direkt kontrol)\r\n    if (initialNickname !== undefined && initialNickname.trim()) {\r\n      // Giri≈ü yapmƒ±≈ü kullanƒ±cƒ± ‚Üí nickname kullan\r\n      console.log('‚úÖ Giri≈ü yapmƒ±≈ü kullanƒ±cƒ±:', initialNickname);\r\n      setNickname(initialNickname);\r\n      localStorage.setItem('playerNickname_2048', initialNickname);\r\n    } else {\r\n      // LocalStorage'a bak\r\n      const savedNickname = localStorage.getItem('playerNickname_2048');\r\n      if (savedNickname && savedNickname.trim()) {\r\n        console.log('üì¶ LocalStorage nickname:', savedNickname);\r\n        setNickname(savedNickname);\r\n      } else {\r\n        // Nickname yok ‚Üí Modal g√∂ster\r\n        console.log('‚ö†Ô∏è Nickname yok - Modal g√∂steriliyor');\r\n        setShowNicknameModal(true);\r\n      }\r\n    }\r\n  }, [initialNickname]);\r\n\r\n  // Window resize listener for responsive tile positioning\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      setWindowWidth(window.innerWidth);\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  const loadLeaderboard = async () => {\r\n    const data = await getLeaderboard('2048', 10);\r\n    setLeaderboard(data);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (score > bestScore) {\r\n      setBestScore(score);\r\n      localStorage.setItem('bestScore_2048', score.toString());\r\n    }\r\n  }, [score, bestScore]);\r\n\r\n  useEffect(() => {\r\n    if (tiles.length > 0 && !gameOver && !gameWon) {\r\n      saveGameState();\r\n    }\r\n  }, [tiles, score, gameOver, gameWon]);\r\n\r\n  const saveGameState = () => {\r\n    const state = {\r\n      grid: grid.serialize(),\r\n      score,\r\n      timestamp: Date.now()\r\n    };\r\n    localStorage.setItem('gameState_2048', JSON.stringify(state));\r\n  };\r\n\r\n  const restoreGameState = () => {\r\n    const saved = localStorage.getItem('gameState_2048');\r\n    if (saved) {\r\n      try {\r\n        const state = JSON.parse(saved);\r\n        if (Date.now() - state.timestamp < 3600000) {\r\n          const newGrid = new Grid(4);\r\n          state.grid.forEach((item: any) => {\r\n            const tile: Tile = {\r\n              id: tileIdCounter.current++,\r\n              value: item.value,\r\n              x: item.position.x,\r\n              y: item.position.y\r\n            };\r\n            newGrid.insertTile(tile);\r\n          });\r\n          setGrid(newGrid);\r\n          setScore(state.score);\r\n          return;\r\n        }\r\n      } catch (e) {\r\n        console.error('Failed to restore game state', e);\r\n      }\r\n    }\r\n    initGame();\r\n  };\r\n\r\n  const initGame = useCallback(() => {\r\n    const newGrid = new Grid(4);\r\n    setGrid(newGrid);\r\n    setTiles([]);\r\n    setScore(0);\r\n    setGameOver(false);\r\n    setGameWon(false);\r\n    setShowMessage(false);\r\n    setScoreSubmitted(false);\r\n    setScoreIncrement(0);\r\n    tileIdCounter.current = 0;\r\n\r\n    localStorage.removeItem('gameState_2048');\r\n\r\n    setTimeout(() => {\r\n      addStartTiles(newGrid);\r\n    }, 100);\r\n  }, []);\r\n\r\n  const addStartTiles = (currentGrid: Grid) => {\r\n    addRandomTile(currentGrid);\r\n    setTimeout(() => addRandomTile(currentGrid), 100);\r\n  };\r\n\r\n  const addRandomTile = (currentGrid: Grid) => {\r\n    const cell = currentGrid.randomAvailableCell();\r\n    if (cell) {\r\n      const value = Math.random() < 0.9 ? 2 : 4;\r\n      const tile: Tile = {\r\n        id: tileIdCounter.current++,\r\n        value,\r\n        x: cell.x,\r\n        y: cell.y,\r\n        isNew: true\r\n      };\r\n      currentGrid.insertTile(tile);\r\n      setTiles(prev => [...prev.filter(t => currentGrid.cellContent({ x: t.x, y: t.y })), tile]);\r\n    }\r\n  };\r\n\r\n  const getVector = (direction: number): { x: number; y: number } => {\r\n    const map: { [key: number]: { x: number; y: number } } = {\r\n      0: { x: 0, y: -1 },  // Yukarƒ±\r\n      1: { x: 1, y: 0 },   // Saƒüa\r\n      2: { x: 0, y: 1 },   // A≈üaƒüƒ±\r\n      3: { x: -1, y: 0 }   // Sola\r\n    };\r\n    return map[direction];\r\n  };\r\n\r\n  const buildTraversals = (vector: { x: number; y: number }): { x: number[]; y: number[] } => {\r\n    const traversals = { x: [] as number[], y: [] as number[] };\r\n\r\n    for (let pos = 0; pos < grid.size; pos++) {\r\n      traversals.x.push(pos);\r\n      traversals.y.push(pos);\r\n    }\r\n\r\n    if (vector.x === 1) traversals.x = traversals.x.reverse();\r\n    if (vector.y === 1) traversals.y = traversals.y.reverse();\r\n\r\n    return traversals;\r\n  };\r\n\r\n  const findFarthestPosition = (\r\n    cell: { x: number; y: number },\r\n    vector: { x: number; y: number },\r\n    currentGrid: Grid\r\n  ): { farthest: { x: number; y: number }; next: { x: number; y: number } } => {\r\n    let previous: { x: number; y: number };\r\n    let next = { x: cell.x, y: cell.y };\r\n\r\n    do {\r\n      previous = next;\r\n      next = { x: previous.x + vector.x, y: previous.y + vector.y };\r\n    } while (currentGrid.withinBounds(next) && !currentGrid.cellContent(next));\r\n\r\n    return {\r\n      farthest: previous,\r\n      next: next\r\n    };\r\n  };\r\n\r\n  const move = (direction: number) => {\r\n    if (gameOver || gameWon) return;\r\n\r\n    const vector = getVector(direction);\r\n    const traversals = buildTraversals(vector);\r\n    let moved = false;\r\n    let addedScore = 0;\r\n\r\n    // Prepare tiles: clear merged status\r\n    grid.cells.forEach((row) => {\r\n      row.forEach((tile) => {\r\n        if (tile) {\r\n          (tile as any).mergedFrom = null;\r\n          tile.previousPosition = { x: tile.x, y: tile.y };\r\n        }\r\n      });\r\n    });\r\n\r\n    // Traverse in the right direction and move tiles\r\n    traversals.x.forEach(x => {\r\n      traversals.y.forEach(y => {\r\n        const tile = grid.cellContent({ x, y });\r\n        if (tile) {\r\n          const positions = findFarthestPosition({ x, y }, vector, grid);\r\n          const next = grid.cellContent(positions.next);\r\n\r\n          // Only one merger per row traversal\r\n          if (next && next.value === tile.value && !(next as any).mergedFrom) {\r\n            const merged: Tile = {\r\n              id: tileIdCounter.current++,\r\n              value: tile.value * 2,\r\n              x: positions.next.x,\r\n              y: positions.next.y,\r\n              mergedFrom: [tile, next],\r\n              isMerged: true\r\n            };\r\n\r\n            grid.removeTile(tile);\r\n            grid.removeTile(next);\r\n            grid.insertTile(merged);\r\n\r\n            // Update tile position for animation\r\n            tile.x = positions.next.x;\r\n            tile.y = positions.next.y;\r\n\r\n            // Update the score\r\n            addedScore += merged.value;\r\n\r\n            // The mighty 2048 tile\r\n            if (merged.value === 2048 && !gameWon) {\r\n              const finalScore = score + addedScore;\r\n              setTimeout(() => {\r\n                setGameWon(true);\r\n                setShowMessage(true);\r\n                handleGameEnd(finalScore, true);\r\n              }, 200);\r\n            }\r\n\r\n            moved = true;\r\n          } else {\r\n            // Move tile to farthest position\r\n            if (positions.farthest.x !== x || positions.farthest.y !== y) {\r\n              grid.removeTile(tile);\r\n              tile.x = positions.farthest.x;\r\n              tile.y = positions.farthest.y;\r\n              grid.insertTile(tile);\r\n              moved = true;\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n    if (moved) {\r\n      // Add a random tile\r\n      addRandomTile(grid);\r\n\r\n      // Collect all tiles from grid for rendering\r\n      const allTiles: Tile[] = [];\r\n      for (let x = 0; x < 4; x++) {\r\n        for (let y = 0; y < 4; y++) {\r\n          const tile = grid.cells[x][y];\r\n          if (tile) {\r\n            allTiles.push(tile);\r\n          }\r\n        }\r\n      }\r\n\r\n      setTiles([...allTiles]);\r\n\r\n      // Score'u g√ºncelle\r\n      const newScore = score + addedScore;\r\n      if (addedScore > 0) {\r\n        setScore(newScore);\r\n        setScoreIncrement(addedScore);\r\n        setTimeout(() => setScoreIncrement(0), 600);\r\n      }\r\n\r\n      // Clear animation flags after animations complete\r\n      setTimeout(() => {\r\n        grid.cells.forEach((row) => {\r\n          row.forEach((tile) => {\r\n            if (tile) {\r\n              tile.isNew = false;\r\n              tile.isMerged = false;\r\n            }\r\n          });\r\n        });\r\n      }, 400);\r\n\r\n      // Check if game over\r\n      if (!movesAvailable(grid)) {\r\n        setTimeout(() => {\r\n          setGameOver(true);\r\n          setShowMessage(true);\r\n          handleGameEnd(newScore, false);\r\n        }, 200);\r\n      }\r\n    }\r\n  };\r\n\r\n  const movesAvailable = (currentGrid: Grid): boolean => {\r\n    return currentGrid.cellsAvailable() || tileMatchesAvailable(currentGrid);\r\n  };\r\n\r\n  const tileMatchesAvailable = (currentGrid: Grid): boolean => {\r\n    for (let x = 0; x < currentGrid.size; x++) {\r\n      for (let y = 0; y < currentGrid.size; y++) {\r\n        const tile = currentGrid.cellContent({ x, y });\r\n        if (tile) {\r\n          for (let direction = 0; direction < 4; direction++) {\r\n            const vector = getVector(direction);\r\n            const cell = { x: x + vector.x, y: y + vector.y };\r\n            const other = currentGrid.cellContent(cell);\r\n            if (other && other.value === tile.value) {\r\n              return true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      const keyMap: { [key: string]: number } = {\r\n        'ArrowUp': 0,\r\n        'w': 0,\r\n        'W': 0,\r\n        'ArrowRight': 1,\r\n        'd': 1,\r\n        'D': 1,\r\n        'ArrowDown': 2,\r\n        's': 2,\r\n        'S': 2,\r\n        'ArrowLeft': 3,\r\n        'a': 3,\r\n        'A': 3\r\n      };\r\n\r\n      if (keyMap[e.key] !== undefined) {\r\n        e.preventDefault();\r\n        move(keyMap[e.key]);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => window.removeEventListener('keydown', handleKeyDown);\r\n  }, [grid, gameOver, gameWon, score]);\r\n\r\n  const touchStart = useRef({ x: 0, y: 0 });\r\n  const handleTouchStart = (e: React.TouchEvent) => {\r\n    touchStart.current = {\r\n      x: e.touches[0].clientX,\r\n      y: e.touches[0].clientY\r\n    };\r\n  };\r\n\r\n  const handleTouchEnd = (e: React.TouchEvent) => {\r\n    const touchEnd = {\r\n      x: e.changedTouches[0].clientX,\r\n      y: e.changedTouches[0].clientY\r\n    };\r\n\r\n    const dx = touchEnd.x - touchStart.current.x;\r\n    const dy = touchEnd.y - touchStart.current.y;\r\n    const minSwipeDistance = 30;\r\n\r\n    if (Math.abs(dx) < minSwipeDistance && Math.abs(dy) < minSwipeDistance) {\r\n      return;\r\n    }\r\n\r\n    if (Math.abs(dx) > Math.abs(dy)) {\r\n      move(dx > 0 ? 1 : 3);\r\n    } else {\r\n      move(dy > 0 ? 2 : 0);\r\n    }\r\n  };\r\n\r\n  const getTilePosition = (x: number, y: number) => {\r\n    let gap = 10;\r\n\r\n    if (windowWidth <= 360) {\r\n      gap = 6;\r\n    } else if (windowWidth <= 480) {\r\n      gap = 8;\r\n    } else if (windowWidth <= 768) {\r\n      gap = 10;\r\n    }\r\n\r\n    // Tile boyutunu CSS ile aynƒ± ≈üekilde hesapla\r\n    // CSS: width: calc((100vw - XXpx) / 4)\r\n    let boardWidth = windowWidth;\r\n    let totalPadding = 0;\r\n\r\n    if (windowWidth <= 360) {\r\n      // Board: width: calc(100vw - 20px), padding: 10px\r\n      boardWidth = windowWidth - 20;\r\n      totalPadding = 20; // 10px * 2\r\n      const innerWidth = boardWidth - totalPadding;\r\n      const tileSize = (innerWidth - gap * 3) / 4;\r\n      const step = tileSize + gap;\r\n      return { transform: `translate(${x * step}px, ${y * step}px)` };\r\n    } else if (windowWidth <= 480) {\r\n      // Board: width: calc(100vw - 30px), padding: 12px\r\n      boardWidth = windowWidth - 30;\r\n      totalPadding = 24; // 12px * 2\r\n      const innerWidth = boardWidth - totalPadding;\r\n      const tileSize = (innerWidth - gap * 3) / 4;\r\n      const step = tileSize + gap;\r\n      return { transform: `translate(${x * step}px, ${y * step}px)` };\r\n    } else if (windowWidth <= 768) {\r\n      // Board: width: min(calc(100vw - 40px), 450px), padding: 15px\r\n      boardWidth = Math.min(windowWidth - 40, 450);\r\n      totalPadding = 30; // 15px * 2\r\n      const innerWidth = boardWidth - totalPadding;\r\n      const tileSize = (innerWidth - gap * 3) / 4;\r\n      const step = tileSize + gap;\r\n      return { transform: `translate(${x * step}px, ${y * step}px)` };\r\n    }\r\n\r\n    // Desktop: 480px board, 15px padding, 450px inner\r\n    const tileSize = (450 - gap * 3) / 4; // (450 - 30) / 4 = 105px\r\n    const step = tileSize + gap; // 105 + 10 = 115px\r\n\r\n    return {\r\n      transform: `translate(${x * step}px, ${y * step}px)`\r\n    };\r\n  };\r\n\r\n  const handleGameEnd = async (finalScore: number, won: boolean) => {\r\n    if (won) {\r\n      onGameWon?.(finalScore);\r\n    } else {\r\n      onGameOver?.(finalScore);\r\n    }\r\n\r\n    if (!nickname && finalScore > 0) {\r\n      setShowNicknameModal(true);\r\n    } else if (nickname && finalScore > 0 && !scoreSubmitted) {\r\n      await submitPlayerScore(finalScore);\r\n    }\r\n  };\r\n\r\n  const submitPlayerScore = async (finalScore: number) => {\r\n    if (!finalScore || scoreSubmitted) return;\r\n\r\n    const result = await submitScore({\r\n      GameType: '2048',\r\n      PlayerNickname: nickname,\r\n      Score: finalScore,\r\n      DeviceType: /mobile/i.test(navigator.userAgent) ? 'Mobile' : 'Desktop',\r\n      VenueCode: customerCode || 'demo',\r\n    });\r\n\r\n    if (result.success) {\r\n      setScoreSubmitted(true);\r\n      await loadLeaderboard();\r\n    }\r\n  };\r\n\r\n  const handleNicknameSubmit = async () => {\r\n    if (!nickname.trim()) {\r\n      alert('L√ºtfen bir takma ad girin!');\r\n      return;\r\n    }\r\n\r\n    if (nickname.trim().length < 2) {\r\n      alert('Takma ad en az 2 karakter olmalƒ±dƒ±r!');\r\n      return;\r\n    }\r\n\r\n    localStorage.setItem('playerNickname_2048', nickname.trim());\r\n    setShowNicknameModal(false);\r\n\r\n    // Oyunu ba≈ülat\r\n    initGame();\r\n\r\n    await submitPlayerScore(score);\r\n  };\r\n\r\n  const toggleLeaderboard = () => {\r\n    const newValue = !showLeaderboard;\r\n    setShowLeaderboard(newValue);\r\n    localStorage.setItem('leaderboardVisibility_2048', newValue.toString());\r\n  };\r\n\r\n  return (\r\n    <div className=\"game-2048-container\">\r\n      {/* Header */}\r\n      <div className=\"game-2048-header\">\r\n        <h1 className=\"game-2048-title\">2048</h1>\r\n        <div className=\"game-2048-scores\">\r\n          <div className=\"game-2048-score-box\">\r\n            <div className=\"game-2048-score-label\">Skor</div>\r\n            <div className=\"game-2048-score-value\">{score.toLocaleString('tr-TR')}</div>\r\n            {scoreIncrement > 0 && (\r\n              <div className=\"game-2048-score-increment\">\r\n                +{scoreIncrement.toLocaleString('tr-TR')}\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"game-2048-score-box\" style={{ background: 'linear-gradient(135deg, rgba(255, 193, 7, 0.9), rgba(255, 152, 0, 0.9))' }}>\r\n            <div className=\"game-2048-score-label\">En ƒ∞yi</div>\r\n            <div className=\"game-2048-score-value\">{bestScore.toLocaleString('tr-TR')}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Controls */}\r\n      <div className=\"game-2048-controls\">\r\n        <p className=\"game-2048-instructions\">\r\n          Karolarƒ± birle≈ütirerek <strong style={{ color: '#667eea' }}>2048</strong> sayƒ±sƒ±na ula≈ü!\r\n        </p>\r\n      </div>\r\n\r\n      {/* Game Board */}\r\n      <div\r\n        className=\"game-2048-board\"\r\n        onTouchStart={handleTouchStart}\r\n        onTouchEnd={handleTouchEnd}\r\n      >\r\n        {/* Grid Background */}\r\n        <div className=\"game-2048-grid-bg\">\r\n          {Array.from({ length: 16 }).map((_, i) => (\r\n            <div key={i} className=\"game-2048-grid-cell\" />\r\n          ))}\r\n        </div>\r\n\r\n        {/* Tiles */}\r\n        <div className=\"game-2048-tiles\">\r\n          {tiles.map((tile) => (\r\n            <div\r\n              key={tile.id}\r\n              className=\"game-2048-tile\"\r\n              style={getTilePosition(tile.x, tile.y)}\r\n            >\r\n              <div className={`game-2048-tile-inner tile-${tile.value} ${tile.isNew ? 'tile-new' : ''} ${tile.isMerged ? 'tile-merged' : ''}`}>\r\n                {tile.value}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Game Over/Won Message */}\r\n        {showMessage && (\r\n          <div className=\"game-2048-message\">\r\n            <h2 className={`game-2048-message-title ${gameWon ? 'won' : 'lost'}`}>\r\n              {gameWon ? 'Kazandƒ±n! üéâ' : 'Oyun Bitti!'}\r\n            </h2>\r\n            <p className=\"game-2048-message-score\">\r\n              Skorun: <strong style={{ color: '#ffd700', fontSize: '32px' }}>{score.toLocaleString('tr-TR')}</strong>\r\n            </p>\r\n            <button onClick={initGame} className=\"game-2048-message-btn\">\r\n              Tekrar Oyna\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Leaderboard Toggle */}\r\n      {leaderboard.length > 0 && (\r\n        <div className=\"game-leaderboard-toggle\">\r\n          <button onClick={toggleLeaderboard} className=\"game-leaderboard-toggle-btn\">\r\n            {showLeaderboard ? 'üèÜ Sƒ±ralamayƒ± Gizle' : 'üèÜ Sƒ±ralamayƒ± G√∂ster'}\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Leaderboard */}\r\n      {showLeaderboard && leaderboard.length > 0 && (\r\n        <div className=\"game-leaderboard\">\r\n          <h3 className=\"game-leaderboard-title\">üèÜ En ƒ∞yi Skorlar</h3>\r\n          <div className=\"game-leaderboard-list\">\r\n            {leaderboard.slice(0, 5).map((entry) => (\r\n              <div key={entry.rank} className=\"game-leaderboard-item\">\r\n                <div className=\"game-leaderboard-info\">\r\n                  <div className={`game-leaderboard-rank rank-${entry.rank <= 3 ? entry.rank : 'other'}`}>\r\n                    {entry.rank === 1 ? 'ü•á' : entry.rank === 2 ? 'ü•à' : entry.rank === 3 ? 'ü•â' : entry.rank}\r\n                  </div>\r\n                  <span className=\"game-leaderboard-name\">{entry.playerNickname}</span>\r\n                </div>\r\n                <span className=\"game-leaderboard-score\">\r\n                  {entry.score.toLocaleString()}\r\n                </span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Nickname Modal */}\r\n      {showNicknameModal && (\r\n        <div className=\"game-nickname-modal\">\r\n          <div className=\"game-nickname-modal-content\">\r\n            <h2 className=\"game-nickname-modal-title\">üéÆ Skorunu Kaydet</h2>\r\n            <p className=\"game-nickname-modal-desc\">\r\n              Sƒ±ralama tablosuna girmek i√ßin bir takma ad girin:\r\n            </p>\r\n            <input\r\n              type=\"text\"\r\n              value={nickname}\r\n              onChange={(e) => setNickname(e.target.value)}\r\n              placeholder=\"Takma adƒ±n\"\r\n              maxLength={20}\r\n              className=\"game-nickname-input\"\r\n              onKeyDown={(e) => e.key === 'Enter' && handleNicknameSubmit()}\r\n            />\r\n            <div className=\"game-nickname-buttons\">\r\n              <button onClick={handleNicknameSubmit} className=\"game-nickname-btn primary\">\r\n                Kaydet\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport * as signalR from '@microsoft/signalr';\r\n\r\ninterface RockPaperScissorsProps {\r\n  onClose?: () => void;\r\n  playerNickname?: string;\r\n  customerCode?: string;\r\n}\r\n\r\ninterface Player {\r\n  id: string;\r\n  name: string;\r\n  score: number;\r\n  choice?: 'rock' | 'paper' | 'scissors';\r\n}\r\n\r\ninterface GameSettings {\r\n  maxRounds: number;\r\n  maxPlayers: number;\r\n  isTournament?: boolean;\r\n}\r\n\r\ntype GameMode = 'normal' | 'tournament';\r\ntype GameState = 'setup' | 'waiting' | 'playing' | 'result' | 'finished';\r\n\r\nexport default function RockPaperScissors({ onClose, playerNickname, customerCode }: RockPaperScissorsProps) {\r\n  // Connection state\r\n  const [connection, setConnection] = useState<signalR.HubConnection | null>(null);\r\n  const [isConnected, setIsConnected] = useState(false);\r\n\r\n  // Game setup state\r\n  const [gameState, setGameState] = useState<GameState>('setup');\r\n  const [nickname, setNickname] = useState(playerNickname || '');\r\n  const [gameMode, setGameMode] = useState<GameMode>('normal');\r\n  const [maxRounds, setMaxRounds] = useState(5);\r\n  const [showInLobby, setShowInLobby] = useState(true);\r\n\r\n  // Game state\r\n  const [roomId, setRoomId] = useState<string>('');\r\n  const [playerId, setPlayerId] = useState<string>('');\r\n  const [players, setPlayers] = useState<Player[]>([]);\r\n  const [currentRound, setCurrentRound] = useState(1);\r\n  const [myChoice, setMyChoice] = useState<'rock' | 'paper' | 'scissors' | null>(null);\r\n  const [isHost, setIsHost] = useState(false);\r\n  const [waitingText, setWaitingText] = useState('Bekliyor...');\r\n\r\n  // Result state\r\n  const [showResult, setShowResult] = useState(false);\r\n  const [resultText, setResultText] = useState('');\r\n  const [resultClass, setResultClass] = useState('');\r\n  const [playerChoices, setPlayerChoices] = useState<{[key: string]: 'rock' | 'paper' | 'scissors'}>({});\r\n\r\n  // Game over state\r\n  const [showGameOver, setShowGameOver] = useState(false);\r\n  const [gameOverMessage, setGameOverMessage] = useState('');\r\n  const [finalScores, setFinalScores] = useState<Player[]>([]);\r\n\r\n  const connectionRef = useRef<signalR.HubConnection | null>(null);\r\n\r\n  // SignalR Connection Setup\r\n  useEffect(() => {\r\n    const setupConnection = async () => {\r\n      const hubUrl = 'https://game.canlimenu.com/gamehub';\r\n\r\n      const newConnection = new signalR.HubConnectionBuilder()\r\n        .withUrl(hubUrl, {\r\n          transport: signalR.HttpTransportType.WebSockets,\r\n          skipNegotiation: true\r\n        })\r\n        .withAutomaticReconnect({\r\n          nextRetryDelayInMilliseconds: () => {\r\n            return Math.random() * 10000;\r\n          }\r\n        })\r\n        .configureLogging(signalR.LogLevel.Error)\r\n        .build();\r\n\r\n      // Event handlers\r\n      newConnection.on('RoomCreated', handleRoomCreated);\r\n      newConnection.on('GameJoined', handleGameJoined);\r\n      newConnection.on('JoinedRoom', handleJoinedRoom);\r\n      newConnection.on('PlayerJoined', handlePlayerJoined);\r\n      newConnection.on('PlayerLeft', handlePlayerLeft);\r\n      newConnection.on('GameStarted', handleGameStarted);\r\n      newConnection.on('RoundStarted', handleRoundStarted);\r\n      newConnection.on('PlayerMadeChoice', handlePlayerMadeChoice);\r\n      newConnection.on('RoundResult', handleRoundResult);\r\n      newConnection.on('GameFinished', handleGameFinished);\r\n      newConnection.on('Error', handleError);\r\n\r\n      try {\r\n        await newConnection.start();\r\n        console.log('SignalR Connected');\r\n        setIsConnected(true);\r\n        setConnection(newConnection);\r\n        connectionRef.current = newConnection;\r\n\r\n        // Generate player ID\r\n        const newPlayerId = generatePlayerId();\r\n        setPlayerId(newPlayerId);\r\n\r\n      } catch (err) {\r\n        console.error('SignalR Connection Error:', err);\r\n      }\r\n    };\r\n\r\n    setupConnection();\r\n\r\n    return () => {\r\n      if (connectionRef.current) {\r\n        connectionRef.current.stop();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Helper Functions\r\n  const generatePlayerId = () => {\r\n    return 'player_' + Math.random().toString(36).substr(2, 9);\r\n  };\r\n\r\n  const generateRoomId = () => {\r\n    return Math.floor(1000 + Math.random() * 9000).toString();\r\n  };\r\n\r\n  const getChoiceIcon = (choice: 'rock' | 'paper' | 'scissors') => {\r\n    switch (choice) {\r\n      case 'rock': return '‚úä';\r\n      case 'paper': return '‚úã';\r\n      case 'scissors': return '‚úåÔ∏è';\r\n    }\r\n  };\r\n\r\n  const getChoiceText = (choice: 'rock' | 'paper' | 'scissors') => {\r\n    switch (choice) {\r\n      case 'rock': return 'Ta≈ü';\r\n      case 'paper': return 'Kaƒüƒ±t';\r\n      case 'scissors': return 'Makas';\r\n    }\r\n  };\r\n\r\n  // Event Handlers\r\n  const handleRoomCreated = (data: any) => {\r\n    console.log('Room created:', data);\r\n    if (data.success) {\r\n      setRoomId(data.roomId);\r\n      setGameState('waiting');\r\n      setIsHost(true);\r\n      setWaitingText('Diƒüer oyuncularƒ±n katƒ±lmasƒ± bekleniyor...');\r\n    } else {\r\n      alert(data.message || 'Oyun olu≈üturulamadƒ±');\r\n    }\r\n  };\r\n\r\n  const handleGameJoined = (data: any) => {\r\n    console.log('Game joined:', data);\r\n    if (data.success) {\r\n      setRoomId(data.roomId);\r\n      setGameState('waiting');\r\n      setIsHost(false);\r\n    }\r\n  };\r\n\r\n  const handleJoinedRoom = (data: any) => {\r\n    console.log('Joined room:', data);\r\n    if (data.players) {\r\n      setPlayers(data.players);\r\n    }\r\n  };\r\n\r\n  const handlePlayerJoined = (data: any) => {\r\n    console.log('Player joined:', data);\r\n    if (data.players) {\r\n      setPlayers(data.players);\r\n    }\r\n  };\r\n\r\n  const handlePlayerLeft = (data: any) => {\r\n    console.log('Player left:', data);\r\n    if (data.players) {\r\n      setPlayers(data.players);\r\n    }\r\n  };\r\n\r\n  const handleGameStarted = (data: any) => {\r\n    console.log('Game started:', data);\r\n    setGameState('playing');\r\n    setCurrentRound(1);\r\n  };\r\n\r\n  const handleRoundStarted = (data: any) => {\r\n    console.log('Round started:', data);\r\n    setGameState('playing');\r\n    setMyChoice(null);\r\n    setShowResult(false);\r\n    setPlayerChoices({});\r\n  };\r\n\r\n  const handlePlayerMadeChoice = (data: any) => {\r\n    console.log('Player made choice:', data);\r\n    // Don't show opponent's choice yet\r\n  };\r\n\r\n  const handleRoundResult = (data: any) => {\r\n    console.log('Round result:', data);\r\n    const { result, players: playerData } = data;\r\n\r\n    setShowResult(true);\r\n\r\n    let resultClass = 'draw';\r\n    let resultText = result.resultText;\r\n\r\n    if (!result.isDraw) {\r\n      if (result.winnerId === playerId) {\r\n        resultClass = 'win';\r\n        resultText = 'üéâ Kazandƒ±nƒ±z!';\r\n      } else {\r\n        resultClass = 'lose';\r\n        resultText = 'üò¢ Kaybettiniz!';\r\n      }\r\n    } else {\r\n      resultText = 'ü§ù Berabere!';\r\n    }\r\n\r\n    setResultText(resultText);\r\n    setResultClass(resultClass);\r\n\r\n    // Update player choices\r\n    if (result.choices) {\r\n      setPlayerChoices(result.choices);\r\n    }\r\n\r\n    // Update scores\r\n    if (playerData) {\r\n      setPlayers(playerData);\r\n    }\r\n\r\n    setGameState('result');\r\n  };\r\n\r\n  const handleGameFinished = (data: any) => {\r\n    console.log('Game finished:', data);\r\n    const { winner, finalScores: scores } = data;\r\n\r\n    setGameState('finished');\r\n    setFinalScores(scores || players);\r\n\r\n    if (winner) {\r\n      if (winner.id === playerId) {\r\n        setGameOverMessage('üéä Tebrikler! Oyunu Kazandƒ±nƒ±z! üéä');\r\n      } else {\r\n        setGameOverMessage(`üèÜ ${winner.name} Oyunu Kazandƒ±!`);\r\n      }\r\n    } else {\r\n      setGameOverMessage('ü§ù Oyun Berabere Bitti!');\r\n    }\r\n\r\n    setShowGameOver(true);\r\n  };\r\n\r\n  const handleError = (data: any) => {\r\n    console.error('Game error:', data);\r\n    alert(data.message || 'Bir hata olu≈ütu');\r\n  };\r\n\r\n  // Action Handlers\r\n  const handleCreateGame = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!nickname.trim()) {\r\n      alert('L√ºtfen bir takma ad girin');\r\n      return;\r\n    }\r\n\r\n    if (!connection || connection.state !== signalR.HubConnectionState.Connected) {\r\n      alert('Baƒülantƒ± kurulamadƒ±. L√ºtfen sayfayƒ± yenileyin.');\r\n      return;\r\n    }\r\n\r\n    const newRoomId = generateRoomId();\r\n    const venueCode = customerCode || 'demo';\r\n\r\n    const settings: GameSettings = {\r\n      maxRounds: maxRounds,\r\n      maxPlayers: gameMode === 'tournament' ? 4 : 2,\r\n      isTournament: gameMode === 'tournament'\r\n    };\r\n\r\n    try {\r\n      if (gameMode === 'tournament') {\r\n        await connection.invoke('CreateTournament', newRoomId, venueCode, playerId, nickname, 4, showInLobby);\r\n      } else {\r\n        await connection.invoke('CreateRoom', newRoomId, venueCode, playerId, nickname, settings, showInLobby);\r\n      }\r\n    } catch (error) {\r\n      console.error('Create game error:', error);\r\n      alert('Oyun olu≈üturulamadƒ±');\r\n    }\r\n  };\r\n\r\n  const handleStartGame = async () => {\r\n    if (!connection || !isHost) return;\r\n\r\n    try {\r\n      await connection.invoke('StartGame', roomId);\r\n    } catch (error) {\r\n      console.error('Start game error:', error);\r\n    }\r\n  };\r\n\r\n  const handleMakeChoice = async (choice: 'rock' | 'paper' | 'scissors') => {\r\n    if (myChoice || !connection) return;\r\n\r\n    setMyChoice(choice);\r\n\r\n    try {\r\n      await connection.invoke('MakeChoice', roomId, playerId, choice);\r\n    } catch (error) {\r\n      console.error('Make choice error:', error);\r\n    }\r\n  };\r\n\r\n  const handleLeaveGame = async () => {\r\n    if (!connection) return;\r\n\r\n    try {\r\n      await connection.invoke('LeaveRoom', roomId, playerId);\r\n      setGameState('setup');\r\n      setRoomId('');\r\n      setPlayers([]);\r\n    } catch (error) {\r\n      console.error('Leave game error:', error);\r\n    }\r\n  };\r\n\r\n  const handlePlayAgain = () => {\r\n    setShowGameOver(false);\r\n    setGameState('setup');\r\n    setRoomId('');\r\n    setPlayers([]);\r\n    setMyChoice(null);\r\n    setShowResult(false);\r\n    setCurrentRound(1);\r\n  };\r\n\r\n  // Get current player and opponent\r\n  const me = players.find(p => p.id === playerId);\r\n  const opponent = players.find(p => p.id !== playerId);\r\n\r\n  // Render Setup Modal\r\n  if (gameState === 'setup') {\r\n    return (\r\n      <div className=\"rps-setup-modal\">\r\n        <h2>Ta≈ü Kaƒüƒ±t Makas</h2>\r\n        <form onSubmit={handleCreateGame}>\r\n          <div className=\"rps-form-group\">\r\n            <label htmlFor=\"nickname\">Takma Ad</label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"nickname\"\r\n              value={nickname}\r\n              onChange={(e) => setNickname(e.target.value)}\r\n              placeholder=\"Takma adƒ±nƒ±zƒ± girin\"\r\n              maxLength={20}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {/* Lobby Visibility Switch */}\r\n          <div className=\"rps-lobby-switch-container\">\r\n            <div className=\"rps-lobby-switch-label\">\r\n              <div className=\"rps-lobby-switch-title\">üèõÔ∏è Lobby'de G√∂ster</div>\r\n              <div className=\"rps-lobby-switch-desc\">\r\n                Diƒüer oyuncular oyununuza katƒ±labilir\r\n              </div>\r\n            </div>\r\n            <label className=\"rps-toggle-switch\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={showInLobby}\r\n                onChange={(e) => setShowInLobby(e.target.checked)}\r\n              />\r\n              <span className=\"rps-toggle-slider\"></span>\r\n            </label>\r\n          </div>\r\n\r\n          {/* Game Mode */}\r\n          <div className=\"rps-mode-container\">\r\n            <div className=\"rps-mode-title\">Oyun Modu</div>\r\n            <div className=\"rps-mode-buttons\">\r\n              <button\r\n                type=\"button\"\r\n                className={`rps-mode-btn ${gameMode === 'normal' ? 'active' : ''}`}\r\n                onClick={() => setGameMode('normal')}\r\n              >\r\n                Normal Oyun (2 Ki≈üi)\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className={`rps-mode-btn ${gameMode === 'tournament' ? 'active' : ''}`}\r\n                onClick={() => setGameMode('tournament')}\r\n              >\r\n                Turnuva (4 Ki≈üi)\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Rounds Selection (only for normal mode) */}\r\n          {gameMode === 'normal' && (\r\n            <div className=\"rps-rounds-container\">\r\n              <div className=\"rps-rounds-title\">Ka√ß El Oynanacak?</div>\r\n              <div className=\"rps-round-buttons\">\r\n                {[3, 5, 7, 10].map(rounds => (\r\n                  <button\r\n                    key={rounds}\r\n                    type=\"button\"\r\n                    className={`rps-round-btn ${maxRounds === rounds ? 'active' : ''}`}\r\n                    onClick={() => setMaxRounds(rounds)}\r\n                  >\r\n                    {rounds} El\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Tournament Info */}\r\n          {gameMode === 'tournament' && (\r\n            <div className=\"rps-mode-container\">\r\n              <div className=\"rps-mode-title\">Turnuva (4 Ki≈üi)</div>\r\n              <div style={{\r\n                background: 'rgba(52, 152, 219, 0.1)',\r\n                padding: '15px',\r\n                borderRadius: '8px',\r\n                borderLeft: '4px solid #3498db'\r\n              }}>\r\n                <p style={{ margin: '5px 0', fontSize: '14px', color: '#bdc3c7' }}>\r\n                  ‚Ä¢ Her ma√ß 5 el (best of 5)\r\n                </p>\r\n                <p style={{ margin: '5px 0', fontSize: '14px', color: '#bdc3c7' }}>\r\n                  ‚Ä¢ E≈üle≈ümeler sƒ±rayla oynanƒ±r\r\n                </p>\r\n                <p style={{ margin: '5px 0', fontSize: '14px', color: '#bdc3c7' }}>\r\n                  ‚Ä¢ Diƒüer oyuncular izleyebilir\r\n                </p>\r\n                <p style={{ margin: '5px 0', fontSize: '14px', color: '#bdc3c7' }}>\r\n                  ‚Ä¢ Final sƒ±ralamasƒ± g√∂sterilir\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <button type=\"submit\" className=\"rps-create-game-btn\" disabled={!isConnected}>\r\n            {isConnected ? 'Oyun Olu≈ütur' : 'Baƒülanƒ±yor...'}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Render Game Board\r\n  return (\r\n    <div className=\"rps-game-container\">\r\n      {/* Room Info */}\r\n      {roomId && (\r\n        <div className=\"rps-room-info\">\r\n          <div className=\"rps-room-code\">{roomId}</div>\r\n          <div>Oyun Kodu ile arkada≈ülarƒ±nƒ±zƒ± davet edin!</div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Players Section */}\r\n      <div className=\"rps-players-section\">\r\n        <div className={`rps-player-card ${gameState === 'playing' && me ? 'active' : ''}`}>\r\n          <div className=\"rps-player-name\">{me?.name || 'Bekliyor...'}</div>\r\n          <div className=\"rps-player-score\">{me?.score || 0}</div>\r\n        </div>\r\n\r\n        <div className=\"rps-vs-text\">VS</div>\r\n\r\n        <div className={`rps-player-card ${gameState === 'playing' && opponent ? 'active' : ''}`}>\r\n          <div className=\"rps-player-name\">{opponent?.name || 'Bekliyor...'}</div>\r\n          <div className=\"rps-player-score\">{opponent?.score || 0}</div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Waiting Section */}\r\n      {gameState === 'waiting' && (\r\n        <div className=\"rps-waiting-section\" style={{ display: 'block' }}>\r\n          <div className=\"rps-waiting-text\">{waitingText}</div>\r\n          <div className=\"rps-spinner\"></div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Choice Section */}\r\n      {gameState === 'playing' && !showResult && (\r\n        <div className=\"rps-choice-section\">\r\n          <div className=\"rps-round-info\">Raund {currentRound} / {maxRounds}</div>\r\n          <div className=\"rps-choices-container\">\r\n            <button\r\n              className={`rps-choice-btn ${myChoice === 'rock' ? 'selected' : ''} ${myChoice ? 'disabled' : ''}`}\r\n              onClick={() => handleMakeChoice('rock')}\r\n              disabled={!!myChoice}\r\n            >\r\n              <div className=\"rps-choice-icon\">‚úä</div>\r\n              <div className=\"rps-choice-text\">Ta≈ü</div>\r\n            </button>\r\n            <button\r\n              className={`rps-choice-btn ${myChoice === 'paper' ? 'selected' : ''} ${myChoice ? 'disabled' : ''}`}\r\n              onClick={() => handleMakeChoice('paper')}\r\n              disabled={!!myChoice}\r\n            >\r\n              <div className=\"rps-choice-icon\">‚úã</div>\r\n              <div className=\"rps-choice-text\">Kaƒüƒ±t</div>\r\n            </button>\r\n            <button\r\n              className={`rps-choice-btn ${myChoice === 'scissors' ? 'selected' : ''} ${myChoice ? 'disabled' : ''}`}\r\n              onClick={() => handleMakeChoice('scissors')}\r\n              disabled={!!myChoice}\r\n            >\r\n              <div className=\"rps-choice-icon\">‚úåÔ∏è</div>\r\n              <div className=\"rps-choice-text\">Makas</div>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Result Section */}\r\n      {showResult && (\r\n        <div className=\"rps-result-section\" style={{ display: 'block' }}>\r\n          <div className={`rps-result-text ${resultClass}`}>{resultText}</div>\r\n          <div className=\"rps-player-choices\">\r\n            {players.map(player => (\r\n              <div key={player.id} className=\"rps-player-choice\">\r\n                <div className=\"rps-player-choice-name\">{player.name}</div>\r\n                <div className=\"rps-player-choice-icon\">\r\n                  {playerChoices[player.id] ? getChoiceIcon(playerChoices[player.id]) : '?'}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Game Controls */}\r\n      <div className=\"rps-game-controls\">\r\n        {gameState === 'waiting' && isHost && players.length >= 2 && (\r\n          <button className=\"rps-control-btn start\" onClick={handleStartGame}>\r\n            Oyunu Ba≈ülat\r\n          </button>\r\n        )}\r\n        <button className=\"rps-control-btn leave\" onClick={handleLeaveGame}>\r\n          Odadan Ayrƒ±l\r\n        </button>\r\n        {onClose && (\r\n          <button className=\"rps-control-btn back\" onClick={onClose}>\r\n            Geri\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Game Over Modal */}\r\n      {showGameOver && (\r\n        <div className=\"rps-game-over-modal\">\r\n          <div className=\"rps-game-over-content\">\r\n            <div className=\"rps-game-over-title\">üéÆ Oyun Bitti!</div>\r\n            <div className=\"rps-game-over-message\">{gameOverMessage}</div>\r\n            <div className=\"rps-game-over-scores\">\r\n              <h3 style={{ marginBottom: '15px', color: '#776e65' }}>Final Skorlarƒ±:</h3>\r\n              {finalScores.map((player, index) => (\r\n                <div key={player.id} style={{\r\n                  padding: '10px',\r\n                  margin: '5px 0',\r\n                  background: player.id === playerId ? 'rgba(52, 152, 219, 0.2)' : 'transparent',\r\n                  borderRadius: '5px'\r\n                }}>\r\n                  {index + 1}. {player.name}: {player.score} puan\r\n                </div>\r\n              ))}\r\n            </div>\r\n            <div className=\"rps-game-over-controls\">\r\n              <button className=\"rps-play-again-btn\" onClick={handlePlayAgain}>\r\n                üîÑ Tekrar Oyna\r\n              </button>\r\n              {onClose && (\r\n                <button\r\n                  className=\"rps-control-btn back\"\r\n                  onClick={onClose}\r\n                  style={{ padding: '15px 30px', fontSize: '16px' }}\r\n                >\r\n                  Ana Men√ºye D√∂n\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport * as signalR from '@microsoft/signalr';\r\nimport type { UserData } from '@/contexts/UserContext';\r\n\r\ninterface QuizProps {\r\n  onClose?: () => void;\r\n  currentUser: UserData | null;\r\n  customerCode?: string;\r\n}\r\n\r\ninterface Player {\r\n  id: string;\r\n  name: string;\r\n  score: number;\r\n  answered?: boolean;\r\n}\r\n\r\ninterface Question {\r\n  id: string;\r\n  text: string;\r\n  answers: string[];\r\n  correctAnswerIndex?: number;\r\n}\r\n\r\ninterface QuizSettings {\r\n  questionCount: number;\r\n  maxPlayers: number;\r\n}\r\n\r\ntype GameState = 'setup' | 'waiting' | 'playing' | 'results' | 'finished';\r\n\r\nexport default function Quiz({ onClose, currentUser, customerCode }: QuizProps) {\r\n  // Connection state\r\n  const [connection, setConnection] = useState<signalR.HubConnection | null>(null);\r\n  const [isConnected, setIsConnected] = useState(false);\r\n\r\n  // Game setup state\r\n  const [gameState, setGameState] = useState<GameState>('setup');\r\n  const [questionCount, setQuestionCount] = useState(10);\r\n  const [showInLobby, setShowInLobby] = useState(true);\r\n\r\n  const timeLimit = 20; // Sabit s√ºre: 20 saniye\r\n  const nickname = currentUser?.nickName || currentUser?.nickname || currentUser?.firstName || 'Oyuncu'; // EndUser nickname'i\r\n\r\n  // Game state\r\n  const [roomId, setRoomId] = useState<string>('');\r\n  const [playerId, setPlayerId] = useState<string>('');\r\n  const [players, setPlayers] = useState<Player[]>([]);\r\n  const [isHost, setIsHost] = useState(false);\r\n\r\n  // Question state\r\n  const [currentQuestion, setCurrentQuestion] = useState<Question | null>(null);\r\n  const [currentQuestionNumber, setCurrentQuestionNumber] = useState(0);\r\n  const [totalQuestions, setTotalQuestions] = useState(questionCount);\r\n  const [selectedAnswer, setSelectedAnswer] = useState<number | null>(null);\r\n  const [correctAnswerIndex, setCorrectAnswerIndex] = useState<number | null>(null);\r\n  const [showQuestionResult, setShowQuestionResult] = useState(false);\r\n\r\n  // Timer state\r\n  const [timeRemaining, setTimeRemaining] = useState(timeLimit);\r\n  const [timerInterval, setTimerInterval] = useState<NodeJS.Timeout | null>(null);\r\n\r\n  // Game over state\r\n  const [showGameOver, setShowGameOver] = useState(false);\r\n  const [gameOverMessage, setGameOverMessage] = useState('');\r\n  const [finalScores, setFinalScores] = useState<Player[]>([]);\r\n\r\n  const connectionRef = useRef<signalR.HubConnection | null>(null);\r\n\r\n  // SignalR Connection Setup\r\n  useEffect(() => {\r\n    const setupConnection = async () => {\r\n      const hubUrl = 'https://game.canlimenu.com/gamehub';\r\n\r\n      const newConnection = new signalR.HubConnectionBuilder()\r\n        .withUrl(hubUrl, {\r\n          transport: signalR.HttpTransportType.WebSockets,\r\n          skipNegotiation: true\r\n        })\r\n        .withAutomaticReconnect()\r\n        .configureLogging(signalR.LogLevel.Error)\r\n        .build();\r\n\r\n      // Event handlers\r\n      newConnection.on('QuizRoomCreated', handleQuizRoomCreated);\r\n      newConnection.on('QuizJoined', handleQuizJoined);\r\n      newConnection.on('PlayerJoinedQuiz', handlePlayerJoined);\r\n      newConnection.on('QuizStarted', handleQuizStarted);\r\n      newConnection.on('NextQuestion', handleNextQuestion);\r\n      newConnection.on('AnswerSubmitted', handleAnswerSubmitted);\r\n      newConnection.on('QuestionResults', handleQuestionResults);\r\n      newConnection.on('QuizFinished', handleQuizFinished);\r\n      newConnection.on('PlayerLeft', handlePlayerLeft);\r\n      newConnection.on('Error', handleError);\r\n\r\n      try {\r\n        await newConnection.start();\r\n        console.log('SignalR Connected');\r\n        setIsConnected(true);\r\n        setConnection(newConnection);\r\n        connectionRef.current = newConnection;\r\n\r\n        // Generate player ID\r\n        const newPlayerId = generatePlayerId();\r\n        setPlayerId(newPlayerId);\r\n\r\n      } catch (err) {\r\n        console.error('SignalR Connection Error:', err);\r\n      }\r\n    };\r\n\r\n    setupConnection();\r\n\r\n    return () => {\r\n      if (timerInterval) {\r\n        clearInterval(timerInterval);\r\n      }\r\n      if (connectionRef.current) {\r\n        connectionRef.current.stop();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Timer Effect\r\n  useEffect(() => {\r\n    if (gameState === 'playing' && !showQuestionResult && timeRemaining > 0) {\r\n      const interval = setInterval(() => {\r\n        setTimeRemaining(prev => {\r\n          if (prev <= 1) {\r\n            clearInterval(interval);\r\n            // Auto-submit if time runs out\r\n            if (selectedAnswer === null && connection) {\r\n              handleSubmitAnswer(-1); // -1 indicates timeout\r\n            }\r\n            return 0;\r\n          }\r\n          return prev - 1;\r\n        });\r\n      }, 1000);\r\n      setTimerInterval(interval);\r\n\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [gameState, showQuestionResult, timeRemaining]);\r\n\r\n  // Helper Functions\r\n  const generatePlayerId = () => {\r\n    return 'player_' + Math.random().toString(36).substr(2, 9);\r\n  };\r\n\r\n  const generateRoomId = () => {\r\n    return Math.floor(1000 + Math.random() * 9000).toString();\r\n  };\r\n\r\n  // Event Handlers\r\n  const handleQuizRoomCreated = (data: any) => {\r\n    console.log('Quiz room created:', data);\r\n    if (data.success) {\r\n      setRoomId(data.roomId);\r\n      setGameState('waiting');\r\n      setIsHost(true);\r\n    } else {\r\n      alert(data.message || 'Quiz olu≈üturulamadƒ±');\r\n    }\r\n  };\r\n\r\n  const handleQuizJoined = (data: any) => {\r\n    console.log('Quiz joined:', data);\r\n    if (data.success) {\r\n      setRoomId(data.roomId);\r\n      setGameState('waiting');\r\n      setIsHost(false);\r\n    }\r\n  };\r\n\r\n  const handlePlayerJoined = (data: any) => {\r\n    console.log('Player joined:', data);\r\n    if (data.players) {\r\n      setPlayers(data.players);\r\n    }\r\n  };\r\n\r\n  const handlePlayerLeft = (data: any) => {\r\n    console.log('Player left:', data);\r\n    if (data.players) {\r\n      setPlayers(data.players);\r\n    }\r\n  };\r\n\r\n  const handleQuizStarted = (data: any) => {\r\n    console.log('Quiz started:', data);\r\n    setGameState('playing');\r\n    setTotalQuestions(data.totalQuestions || questionCount);\r\n  };\r\n\r\n  const handleNextQuestion = (data: any) => {\r\n    console.log('Next question:', data);\r\n    const { question, questionNumber } = data;\r\n\r\n    setCurrentQuestion({\r\n      id: question.id,\r\n      text: question.text,\r\n      answers: question.answers\r\n    });\r\n    setCurrentQuestionNumber(questionNumber);\r\n    setSelectedAnswer(null);\r\n    setCorrectAnswerIndex(null);\r\n    setShowQuestionResult(false);\r\n    setTimeRemaining(timeLimit);\r\n\r\n    // Reset player answered status\r\n    setPlayers(prev => prev.map(p => ({ ...p, answered: false })));\r\n  };\r\n\r\n  const handleAnswerSubmitted = (data: any) => {\r\n    console.log('Answer submitted:', data);\r\n    // Update player answered status\r\n    setPlayers(prev => prev.map(p =>\r\n      p.id === data.playerId ? { ...p, answered: true } : p\r\n    ));\r\n  };\r\n\r\n  const handleQuestionResults = (data: any) => {\r\n    console.log('Question results:', data);\r\n    const { correctAnswer, players: updatedPlayers } = data;\r\n\r\n    setCorrectAnswerIndex(correctAnswer);\r\n    setShowQuestionResult(true);\r\n    setPlayers(updatedPlayers);\r\n\r\n    // Clear timer\r\n    if (timerInterval) {\r\n      clearInterval(timerInterval);\r\n    }\r\n  };\r\n\r\n  const handleQuizFinished = (data: any) => {\r\n    console.log('Quiz finished:', data);\r\n    const { winner, finalScores: scores } = data;\r\n\r\n    setGameState('finished');\r\n    setFinalScores(scores || players);\r\n\r\n    if (winner) {\r\n      if (winner.id === playerId) {\r\n        setGameOverMessage('üéä Tebrikler! Quizi Kazandƒ±nƒ±z! üéä');\r\n      } else {\r\n        setGameOverMessage(`üèÜ ${winner.name} Quizi Kazandƒ±!`);\r\n      }\r\n    } else {\r\n      setGameOverMessage('Quiz Tamamlandƒ±!');\r\n    }\r\n\r\n    setShowGameOver(true);\r\n  };\r\n\r\n  const handleError = (data: any) => {\r\n    console.error('Quiz error:', data);\r\n    alert(data.message || 'Bir hata olu≈ütu');\r\n  };\r\n\r\n  // Action Handlers\r\n  const handleCreateQuiz = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!connection || connection.state !== signalR.HubConnectionState.Connected) {\r\n      alert('Baƒülantƒ± kurulamadƒ±. L√ºtfen sayfayƒ± yenileyin.');\r\n      return;\r\n    }\r\n\r\n    const newRoomId = generateRoomId();\r\n    const venueCode = customerCode || 'demo';\r\n\r\n    const settings: QuizSettings = {\r\n      questionCount,\r\n      maxPlayers: 8\r\n    };\r\n\r\n    try {\r\n      await connection.invoke('CreateQuizRoom', newRoomId, venueCode, playerId, nickname, settings, showInLobby);\r\n    } catch (error) {\r\n      console.error('Create quiz error:', error);\r\n      alert('Quiz olu≈üturulamadƒ±');\r\n    }\r\n  };\r\n\r\n  const handleStartQuiz = async () => {\r\n    if (!connection || !isHost) return;\r\n\r\n    try {\r\n      await connection.invoke('StartQuiz', roomId);\r\n    } catch (error) {\r\n      console.error('Start quiz error:', error);\r\n    }\r\n  };\r\n\r\n  const handleSubmitAnswer = async (answerIndex: number) => {\r\n    if (selectedAnswer !== null || !connection) return;\r\n\r\n    setSelectedAnswer(answerIndex);\r\n\r\n    try {\r\n      await connection.invoke('SubmitAnswer', roomId, playerId, answerIndex);\r\n    } catch (error) {\r\n      console.error('Submit answer error:', error);\r\n    }\r\n  };\r\n\r\n  const handleLeaveQuiz = async () => {\r\n    if (!connection) return;\r\n\r\n    try {\r\n      await connection.invoke('LeaveRoom', roomId, playerId);\r\n      setGameState('setup');\r\n      setRoomId('');\r\n      setPlayers([]);\r\n    } catch (error) {\r\n      console.error('Leave quiz error:', error);\r\n    }\r\n  };\r\n\r\n  const handlePlayAgain = () => {\r\n    setShowGameOver(false);\r\n    setGameState('setup');\r\n    setRoomId('');\r\n    setPlayers([]);\r\n    setCurrentQuestion(null);\r\n    setCurrentQuestionNumber(0);\r\n    setSelectedAnswer(null);\r\n    setCorrectAnswerIndex(null);\r\n  };\r\n\r\n  // Get current player\r\n  const me = players.find(p => p.id === playerId);\r\n\r\n  // Render Setup Modal\r\n  if (gameState === 'setup') {\r\n    // Giri≈ü kontrol√º - √úye olmayan oynayamasƒ±n\r\n    if (!nickname || !(currentUser?.nickName || currentUser?.nickname)) {\r\n      return (\r\n        <div className=\"quiz-setup-modal\">\r\n          <h2>üìö Bilgi Yarƒ±≈ümasƒ±</h2>\r\n          <div style={{\r\n            textAlign: 'center',\r\n            padding: '40px 20px',\r\n            color: '#ecf0f1'\r\n          }}>\r\n            <div style={{ fontSize: '48px', marginBottom: '20px' }}>üîí</div>\r\n            <p style={{ fontSize: '18px', marginBottom: '10px' }}>\r\n              Quiz oynamak i√ßin giri≈ü yapmalƒ±sƒ±nƒ±z\r\n            </p>\r\n            <p style={{ fontSize: '14px', color: '#95a5a6' }}>\r\n              L√ºtfen √∂nce hesabƒ±nƒ±za giri≈ü yapƒ±n\r\n            </p>\r\n            {onClose && (\r\n              <button\r\n                onClick={onClose}\r\n                style={{\r\n                  marginTop: '20px',\r\n                  padding: '12px 24px',\r\n                  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '8px',\r\n                  fontSize: '16px',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                Geri D√∂n\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"quiz-setup-modal\">\r\n        <h2>üìö Bilgi Yarƒ±≈ümasƒ±</h2>\r\n        <form onSubmit={handleCreateQuiz}>\r\n          {/* Kullanƒ±cƒ± bilgisi */}\r\n          <div style={{\r\n            marginBottom: '20px',\r\n            padding: '15px',\r\n            background: 'rgba(102, 126, 234, 0.1)',\r\n            borderRadius: '8px',\r\n            textAlign: 'center'\r\n          }}>\r\n            <div style={{ fontSize: '14px', color: '#bdc3c7', marginBottom: '5px' }}>\r\n              Oyuncu\r\n            </div>\r\n            <div style={{ fontSize: '18px', fontWeight: 'bold', color: '#667eea' }}>\r\n              {nickname}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Lobby Visibility */}\r\n          <div className=\"rps-lobby-switch-container\">\r\n            <div className=\"rps-lobby-switch-label\">\r\n              <div className=\"rps-lobby-switch-title\">üèõÔ∏è Lobby'de G√∂ster</div>\r\n              <div className=\"rps-lobby-switch-desc\">\r\n                Diƒüer oyuncular quiz'inize katƒ±labilir\r\n              </div>\r\n            </div>\r\n            <label className=\"rps-toggle-switch\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={showInLobby}\r\n                onChange={(e) => setShowInLobby(e.target.checked)}\r\n              />\r\n              <span className=\"rps-toggle-slider\"></span>\r\n            </label>\r\n          </div>\r\n\r\n          {/* Quiz Options */}\r\n          <div className=\"quiz-options\">\r\n            <div className=\"quiz-option-row\">\r\n              <div className=\"quiz-option-group\">\r\n                <label>Soru Sayƒ±sƒ±</label>\r\n                <select value={questionCount} onChange={(e) => setQuestionCount(Number(e.target.value))}>\r\n                  <option value=\"5\">5 Soru</option>\r\n                  <option value=\"10\">10 Soru</option>\r\n                  <option value=\"15\">15 Soru</option>\r\n                  <option value=\"20\">20 Soru</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <button type=\"submit\" className=\"quiz-create-game-btn\" disabled={!isConnected}>\r\n            {isConnected ? 'Quiz Olu≈ütur' : 'Baƒülanƒ±yor...'}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Render Game Board\r\n  return (\r\n    <div className=\"quiz-game-container\">\r\n      {/* Header */}\r\n      {roomId && (\r\n        <div className=\"quiz-header\">\r\n          <div className=\"quiz-room-code\">Oda: {roomId}</div>\r\n          <div className=\"quiz-question-counter\">\r\n            Soru {currentQuestionNumber} / {totalQuestions}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Waiting Section */}\r\n      {gameState === 'waiting' && (\r\n        <div className=\"quiz-waiting-section\">\r\n          <div className=\"quiz-waiting-text\">\r\n            {isHost ? 'Diƒüer oyuncularƒ±n katƒ±lmasƒ± bekleniyor...' : 'Host tarafƒ±ndan quiz\\'in ba≈ülatƒ±lmasƒ± bekleniyor...'}\r\n          </div>\r\n          <div className=\"quiz-spinner\"></div>\r\n\r\n          {/* QR Code Section */}\r\n          {roomId && (\r\n            <div style={{\r\n              marginTop: '30px',\r\n              padding: '20px',\r\n              background: 'rgba(255, 255, 255, 0.05)',\r\n              borderRadius: '12px',\r\n              textAlign: 'center'\r\n            }}>\r\n              <div style={{\r\n                marginBottom: '15px',\r\n                fontSize: '16px',\r\n                fontWeight: 'bold',\r\n                color: '#ecf0f1'\r\n              }}>\r\n                QR Kodu taratarak quiz'e katƒ±lƒ±n\r\n              </div>\r\n\r\n              {/* QR Code Image */}\r\n              <div style={{\r\n                background: 'white',\r\n                padding: '15px',\r\n                borderRadius: '8px',\r\n                display: 'inline-block',\r\n                marginBottom: '15px'\r\n              }}>\r\n                <img\r\n                  src={`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(\r\n                    typeof window !== 'undefined'\r\n                      ? `${window.location.origin}/quiz?roomId=${roomId}`\r\n                      : ''\r\n                  )}`}\r\n                  alt=\"QR Kod\"\r\n                  style={{ display: 'block', width: '200px', height: '200px' }}\r\n                />\r\n              </div>\r\n\r\n              {/* Share Link */}\r\n              <div style={{ marginTop: '15px' }}>\r\n                <div style={{\r\n                  fontSize: '14px',\r\n                  color: '#bdc3c7',\r\n                  marginBottom: '8px'\r\n                }}>\r\n                  Quiz linkini payla≈ü:\r\n                </div>\r\n                <div\r\n                  onClick={() => {\r\n                    if (typeof window !== 'undefined') {\r\n                      const link = `${window.location.origin}/quiz?roomId=${roomId}`;\r\n                      navigator.clipboard.writeText(link);\r\n                      alert('Link kopyalandƒ±!');\r\n                    }\r\n                  }}\r\n                  style={{\r\n                    background: '#2c3e50',\r\n                    padding: '8px',\r\n                    borderRadius: '5px',\r\n                    fontSize: '12px',\r\n                    wordBreak: 'break-all',\r\n                    color: '#3498db',\r\n                    cursor: 'pointer'\r\n                  }}\r\n                >\r\n                  {typeof window !== 'undefined' ? `${window.location.origin}/quiz?roomId=${roomId}` : ''}\r\n                </div>\r\n                <div style={{\r\n                  fontSize: '12px',\r\n                  color: '#95a5a6',\r\n                  marginTop: '5px'\r\n                }}>\r\n                  Linke tƒ±klayarak kopyalayƒ±n\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Players List */}\r\n          {players.length > 0 && (\r\n            <div className=\"quiz-players-section\" style={{ marginTop: '30px' }}>\r\n              <div className=\"quiz-players-title\">\r\n                Katƒ±lƒ±mcƒ±lar ({players.length}/8)\r\n              </div>\r\n              <div className=\"quiz-players-list\">\r\n                {players.map(player => (\r\n                  <div key={player.id} className={`quiz-player-card ${player.id === playerId ? 'me' : ''}`}>\r\n                    <div className=\"quiz-player-name\">{player.name}</div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Question Section */}\r\n      {gameState === 'playing' && currentQuestion && (\r\n        <>\r\n          <div className=\"quiz-question-section\">\r\n            <div className=\"quiz-question-header\">\r\n              <div className={timeRemaining <= 5 ? 'quiz-timer warning' : 'quiz-timer'}>\r\n                ‚è±Ô∏è {timeRemaining}s\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"quiz-question-text\">{currentQuestion.text}</div>\r\n\r\n            <div className=\"quiz-answers-grid\">\r\n              {currentQuestion.answers.map((answer, index) => {\r\n                let buttonClass = 'quiz-answer-btn';\r\n\r\n                if (showQuestionResult) {\r\n                  if (index === correctAnswerIndex) {\r\n                    buttonClass += ' correct';\r\n                  } else if (index === selectedAnswer && index !== correctAnswerIndex) {\r\n                    buttonClass += ' incorrect';\r\n                  }\r\n                  buttonClass += ' disabled';\r\n                } else {\r\n                  if (index === selectedAnswer) {\r\n                    buttonClass += ' selected';\r\n                  }\r\n                  if (selectedAnswer !== null) {\r\n                    buttonClass += ' disabled';\r\n                  }\r\n                }\r\n\r\n                return (\r\n                  <button\r\n                    key={index}\r\n                    className={buttonClass}\r\n                    onClick={() => handleSubmitAnswer(index)}\r\n                    disabled={selectedAnswer !== null}\r\n                  >\r\n                    {answer}\r\n                  </button>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Players Who Answered */}\r\n          <div className=\"quiz-players-section\">\r\n            <div className=\"quiz-players-title\">\r\n              Katƒ±lƒ±mcƒ±lar ({players.filter(p => p.answered).length}/{players.length} cevapladƒ±)\r\n            </div>\r\n            <div className=\"quiz-players-list\">\r\n              {players.map(player => (\r\n                <div\r\n                  key={player.id}\r\n                  className={`quiz-player-card ${player.id === playerId ? 'me' : ''} ${player.answered ? 'answered' : ''}`}\r\n                >\r\n                  <div className=\"quiz-player-name\">\r\n                    {player.name} {player.answered && '‚úì'}\r\n                  </div>\r\n                  <div className=\"quiz-player-score\">{player.score}</div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {/* Scoreboard */}\r\n      {gameState === 'results' && (\r\n        <div className=\"quiz-scoreboard\">\r\n          <div className=\"quiz-scoreboard-title\">üèÜ Skor Tablosu</div>\r\n          <ul className=\"quiz-scoreboard-list\">\r\n            {players\r\n              .sort((a, b) => b.score - a.score)\r\n              .map((player, index) => (\r\n                <li\r\n                  key={player.id}\r\n                  className={`quiz-scoreboard-item rank-${index + 1 <= 3 ? index + 1 : ''}`}\r\n                >\r\n                  <span className=\"quiz-rank\">{index + 1}.</span>\r\n                  <span className=\"quiz-player-info\">{player.name}</span>\r\n                  <span className=\"quiz-score\">{player.score}</span>\r\n                </li>\r\n              ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n\r\n      {/* Controls */}\r\n      <div className=\"quiz-controls\">\r\n        {gameState === 'waiting' && isHost && players.length >= 2 && (\r\n          <button className=\"quiz-control-btn start\" onClick={handleStartQuiz}>\r\n            Quiz'i Ba≈ülat\r\n          </button>\r\n        )}\r\n        <button className=\"quiz-control-btn leave\" onClick={handleLeaveQuiz}>\r\n          Odadan Ayrƒ±l\r\n        </button>\r\n        {onClose && (\r\n          <button className=\"rps-control-btn back\" onClick={onClose}>\r\n            Geri\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Game Over Modal */}\r\n      {showGameOver && (\r\n        <div className=\"quiz-game-over-modal\">\r\n          <div className=\"quiz-game-over-content\">\r\n            <div className=\"quiz-game-over-title\">üéì Quiz Tamamlandƒ±!</div>\r\n            <div className=\"quiz-game-over-message\">{gameOverMessage}</div>\r\n\r\n            {/* Final Scoreboard */}\r\n            <div className=\"quiz-scoreboard\" style={{ marginBottom: '20px' }}>\r\n              <div className=\"quiz-scoreboard-title\">Final Sƒ±ralamasƒ±</div>\r\n              <ul className=\"quiz-scoreboard-list\">\r\n                {finalScores\r\n                  .sort((a, b) => b.score - a.score)\r\n                  .map((player, index) => (\r\n                    <li\r\n                      key={player.id}\r\n                      className={`quiz-scoreboard-item rank-${index + 1 <= 3 ? index + 1 : ''}`}\r\n                      style={{\r\n                        background: player.id === playerId ? 'rgba(102, 126, 234, 0.3)' : undefined\r\n                      }}\r\n                    >\r\n                      <span className=\"quiz-rank\">\r\n                        {index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : `${index + 1}.`}\r\n                      </span>\r\n                      <span className=\"quiz-player-info\">{player.name}</span>\r\n                      <span className=\"quiz-score\">{player.score}</span>\r\n                    </li>\r\n                  ))}\r\n              </ul>\r\n            </div>\r\n\r\n            <div className=\"quiz-game-over-controls\">\r\n              <button className=\"quiz-play-again-btn\" onClick={handlePlayAgain}>\r\n                üîÑ Tekrar Oyna\r\n              </button>\r\n              {onClose && (\r\n                <button\r\n                  className=\"rps-control-btn back\"\r\n                  onClick={onClose}\r\n                  style={{ padding: '15px 30px', fontSize: '16px' }}\r\n                >\r\n                  Ana Men√ºye D√∂n\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useMenu } from '@/contexts/MenuContext';\r\nimport { useAuth } from '@/contexts/UserContext';\r\nimport Game2048 from '@/components/games/Game2048';\r\nimport RockPaperScissors from '@/components/games/RockPaperScissors';\r\nimport Quiz from '@/components/games/Quiz';\r\n\r\nexport default function GameModal() {\r\n  const {\r\n    isGameModalOpen,\r\n    selectedGame,\r\n    activeGame,\r\n    setActiveGame,\r\n    closeGameModal,\r\n    customerCode,\r\n  } = useMenu();\r\n  const { currentUser } = useAuth();\r\n\r\n  const [playerNickname, setPlayerNickname] = useState('');\r\n  const [isClosing, setIsClosing] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isGameModalOpen) {\r\n      setActiveGame(selectedGame);\r\n      setIsClosing(false);\r\n\r\n      // Arka plan scroll'unu engelle\r\n      document.body.style.overflow = 'hidden';\r\n    } else {\r\n      // Modal kapandƒ±ƒüƒ±nda scroll'u geri a√ß\r\n      document.body.style.overflow = 'unset';\r\n    }\r\n\r\n    return () => {\r\n      document.body.style.overflow = 'unset';\r\n    };\r\n  }, [isGameModalOpen, selectedGame]);\r\n\r\n  // ESC tu≈üu ile kapatma\r\n  useEffect(() => {\r\n    const handleEsc = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape' && isGameModalOpen) {\r\n        handleClose();\r\n      }\r\n    };\r\n    document.addEventListener('keydown', handleEsc);\r\n    return () => document.removeEventListener('keydown', handleEsc);\r\n  }, [isGameModalOpen]);\r\n\r\n  const handleClose = () => {\r\n    setIsClosing(true);\r\n    setTimeout(() => {\r\n      closeGameModal();\r\n      setIsClosing(false);\r\n    }, 300);\r\n  };\r\n\r\n  const handleGameSelect = (game: '2048' | 'rps' | 'quiz') => {\r\n    setActiveGame(game);\r\n  };\r\n\r\n  const handleBackToSelection = () => {\r\n    setActiveGame(null);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Modal Container */}\r\n      <div\r\n        className={`game-modal-container ${isGameModalOpen ? 'show' : ''} ${isClosing ? 'closing' : ''}`}\r\n      >\r\n        {/* Close Button */}\r\n        <button className=\"game-modal-close-btn\" onClick={handleClose}>\r\n          √ó\r\n        </button>\r\n\r\n        {/* Game Selection */}\r\n        {!activeGame && (\r\n          <div className=\"games-container\">\r\n            {/* Header */}\r\n            <div className=\"games-header\">\r\n              <h2>üéÆ Oyunlar</h2>\r\n              <p>Bu mekandaki oyuncularla e≈üle≈ü!</p>\r\n              <small>Sadece bu mekan m√º≈üterilerine √∂zel!</small>\r\n            </div>\r\n\r\n            {/* 3'l√º Oyun Grid */}\r\n            <div className=\"games-grid\">\r\n              <button className=\"game-card-btn\" onClick={() => handleGameSelect('2048')}>\r\n                <i className=\"game-icon\">üî¢</i>\r\n                <h3>2048</h3>\r\n                <p className=\"player-count\">(Tek ki≈üilik)</p>\r\n              </button>\r\n\r\n              <button className=\"game-card-btn\" onClick={() => handleGameSelect('rps')}>\r\n                <i className=\"game-icon\">‚úä</i>\r\n                <h3>Ta≈ü Kaƒüƒ±t Makas</h3>\r\n                <p className=\"player-count\">(2-4 ki≈üilik)</p>\r\n              </button>\r\n\r\n              <button\r\n                className=\"game-card-btn\"\r\n                onClick={() => {\r\n                  // ========================================\r\n                  // üîß TEST MODU: Giri≈ü kontrol√º devre dƒ±≈üƒ±\r\n                  // ========================================\r\n                  // const userNickname = currentUser?.nickName || currentUser?.nickname;\r\n                  // if (!userNickname) {\r\n                  //   const onay = confirm('Quiz olu≈üturmak i√ßin giri≈ü yapmalƒ±sƒ±nƒ±z. Profilim sayfasƒ±na gitmek ister misiniz?');\r\n                  //   if (onay) {\r\n                  //     closeGameModal();\r\n                  //     openProfile();\r\n                  //   }\r\n                  //   return;\r\n                  // }\r\n                  // ========================================\r\n                  handleGameSelect('quiz');\r\n                }}\r\n                style={{ position: 'relative' }}\r\n              >\r\n                <i className=\"game-icon\">üìö</i>\r\n                <h3>Bilgi Yarƒ±≈ümasƒ±</h3>\r\n                <p className=\"player-count\">(2-8 ki≈üilik)</p>\r\n                {/* TEST MODU: Lock icon gizli */}\r\n                {/* {!(currentUser?.nickName || currentUser?.nickname) && (\r\n                  <div style={{\r\n                    position: 'absolute',\r\n                    top: '8px',\r\n                    right: '8px',\r\n                    fontSize: '16px'\r\n                  }}>üîí</div>\r\n                )} */}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Active Game */}\r\n        {activeGame && (\r\n          <div style={{ width: '100%', height: '100vh', display: 'flex', flexDirection: 'column' }}>\r\n            {/* Back to selection button */}\r\n            <button\r\n              onClick={handleBackToSelection}\r\n              style={{\r\n                width: '100%',\r\n                padding: '15px 20px',\r\n                background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n                color: 'white',\r\n                border: 'none',\r\n                fontSize: '16px',\r\n                fontWeight: 600,\r\n                cursor: 'pointer',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                gap: '10px',\r\n                transition: 'all 0.3s ease',\r\n                flexShrink: 0,\r\n              }}\r\n              onMouseEnter={(e) => {\r\n                e.currentTarget.style.background = 'linear-gradient(135deg, #764ba2 0%, #667eea 100%)';\r\n              }}\r\n              onMouseLeave={(e) => {\r\n                e.currentTarget.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';\r\n              }}\r\n            >\r\n              <span>‚Üê</span>\r\n              <span>Oyun Se√ßimine D√∂n</span>\r\n            </button>\r\n\r\n            {/* Game Component */}\r\n            {activeGame === '2048' && (\r\n              <div style={{ width: '100%', flex: 1, overflow: 'auto', padding: '10px 20px' }}>\r\n                <Game2048\r\n                  onGameOver={() => {}}\r\n                  onGameWon={() => {}}\r\n                  playerNickname={playerNickname}\r\n                  customerCode={customerCode || undefined}\r\n                />\r\n              </div>\r\n            )}\r\n            {activeGame === 'rps' && (\r\n              <div style={{ width: '100%', flex: 1, overflow: 'auto', padding: '10px 20px' }}>\r\n                <RockPaperScissors\r\n                  onClose={handleBackToSelection}\r\n                  playerNickname={playerNickname}\r\n                  customerCode={customerCode || undefined}\r\n                />\r\n              </div>\r\n            )}\r\n            {activeGame === 'quiz' && (\r\n              <div style={{ width: '100%', flex: 1, overflow: 'auto', padding: '10px 20px' }}>\r\n                <Quiz\r\n                  onClose={handleBackToSelection}\r\n                  currentUser={currentUser}\r\n                  customerCode={customerCode || undefined}\r\n                />\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { useMenu } from '@/contexts/MenuContext';\r\nimport { saveCart as saveCartToStorage, loadCart as loadCartFromStorage, clearCart as clearCartFromStorage } from '@/utils/cartUtils';\r\n\r\ninterface CartItem {\r\n  id: number;\r\n  productId: number;\r\n  name: string;\r\n  price: number;\r\n  quantity: number;\r\n  image?: string;\r\n  note?: string;\r\n  sambaId?: number;\r\n  tokenQuantity?: number; // Ka√ß adet jeton ile alƒ±nacak\r\n}\r\n\r\ninterface CartSidebarProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  tableId?: string;\r\n  customerCode?: string;\r\n}\r\n\r\nexport default function CartSidebar({ isOpen, onClose, tableId, customerCode }: CartSidebarProps) {\r\n  const { customerData, productTokenSettings, cartKey: menuCartKey, isSelfService, sessionId } = useMenu();\r\n  const [items, setItems] = useState<CartItem[]>([]);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [customerNote, setCustomerNote] = useState('');\r\n  const [userTokenBalance, setUserTokenBalance] = useState(0);\r\n\r\n  // Use cartKey from MenuContext, fallback to tableId prop\r\n  const cartKey = menuCartKey || tableId || '';\r\n\r\n  const loadCart = useCallback(() => {\r\n    if (!cartKey || !customerCode) return;\r\n    const items = loadCartFromStorage(cartKey, customerCode);\r\n    setItems(items);\r\n  }, [cartKey, customerCode]);\r\n\r\n  useEffect(() => {\r\n    if (cartKey && isOpen) {\r\n      loadCart();\r\n    }\r\n  }, [cartKey, isOpen, loadCart]);\r\n\r\n  useEffect(() => {\r\n    const handleCartUpdate = () => {\r\n      loadCart();\r\n    };\r\n\r\n    window.addEventListener('cartUpdated', handleCartUpdate);\r\n    return () => window.removeEventListener('cartUpdated', handleCartUpdate);\r\n  }, [loadCart]);\r\n\r\n  useEffect(() => {\r\n    const handleTokenBalanceUpdate = (event: any) => {\r\n      const { balance, message } = event.detail;\r\n\r\n      setUserTokenBalance(balance);\r\n\r\n      // Bildirim g√∂ster\r\n      if (message) {\r\n        showNotification(message, 'success');\r\n      }\r\n    };\r\n\r\n    window.addEventListener('tokenBalanceUpdated', handleTokenBalanceUpdate);\r\n    return () => window.removeEventListener('tokenBalanceUpdated', handleTokenBalanceUpdate);\r\n  }, []);\r\n\r\n  // Bildirim g√∂sterme fonksiyonu\r\n  const showNotification = (message: string, type: 'success' | 'error' | 'info' = 'info') => {\r\n    // Basit toast notification\r\n    const notification = document.createElement('div');\r\n    notification.textContent = message;\r\n    notification.style.cssText = `\r\n      position: fixed;\r\n      bottom: 80px;\r\n      left: 50%;\r\n      transform: translateX(-50%);\r\n      background: ${type === 'success' ? '#28a745' : type === 'error' ? '#dc3545' : '#007bff'};\r\n      color: white;\r\n      padding: 12px 20px;\r\n      border-radius: 8px;\r\n      box-shadow: 0 4px 12px rgba(0,0,0,0.3);\r\n      z-index: 100001;\r\n      font-size: 14px;\r\n      font-weight: 600;\r\n      max-width: 90%;\r\n      text-align: center;\r\n    `;\r\n    document.body.appendChild(notification);\r\n\r\n    setTimeout(() => {\r\n      if (notification.parentNode) {\r\n        notification.parentNode.removeChild(notification);\r\n      }\r\n    }, 3000);\r\n  };\r\n\r\n  // Load user token balance\r\n  useEffect(() => {\r\n    const loadTokenBalance = async () => {\r\n      const userData = localStorage.getItem('userData');\r\n\r\n      if (!userData || !customerCode) return;\r\n\r\n      try {\r\n        const user = JSON.parse(userData);\r\n        const userId = user.id || user.userId || user.Id;\r\n\r\n        if (!userId) {\r\n          return;\r\n        }\r\n\r\n        const response = await fetch(\r\n          `/api/user/token-balance?userId=${userId}&customerCode=${customerCode}`\r\n        );\r\n\r\n        const result = await response.json();\r\n\r\n        if (result.balance) {\r\n          const tokenBalance = result.balance.currentTokens || result.balance.CurrentTokens || 0;\r\n          setUserTokenBalance(tokenBalance);\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to load token balance:', error);\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      loadTokenBalance();\r\n    }\r\n  }, [isOpen, customerCode]);\r\n\r\n  // Sepeti kaydet\r\n  const saveCart = (newItems: CartItem[]) => {\r\n    if (cartKey && customerCode) {\r\n      saveCartToStorage(cartKey, newItems, customerCode);\r\n      setItems(newItems);\r\n      // Event dispatch ederek diƒüer componentleri bilgilendir\r\n      window.dispatchEvent(new Event('cartUpdated'));\r\n    }\r\n  };\r\n\r\n  const updateQuantity = (productId: number, newQuantity: number) => {\r\n    if (newQuantity <= 0) {\r\n      removeItem(productId);\r\n      return;\r\n    }\r\n    const newItems = items.map((item) =>\r\n      item.productId === productId ? { ...item, quantity: newQuantity } : item\r\n    );\r\n    saveCart(newItems);\r\n  };\r\n\r\n  const updateItemNote = (productId: number, note: string) => {\r\n    const newItems = items.map((item) =>\r\n      item.productId === productId ? { ...item, note } : item\r\n    );\r\n    saveCart(newItems);\r\n  };\r\n\r\n  const removeItem = (productId: number) => {\r\n    const item = items.find(i => i.productId === productId);\r\n    const itemName = item?.name || 'Bu √ºr√ºn√º';\r\n\r\n    if (confirm(`${itemName} sepetten kaldƒ±rƒ±lsƒ±n mƒ±?`)) {\r\n      const newItems = items.filter((item) => item.productId !== productId);\r\n      saveCart(newItems);\r\n    }\r\n  };\r\n\r\n  const clearCart = () => {\r\n    if (confirm('Sepeti temizlemek istediƒüinize emin misiniz?')) {\r\n      if (cartKey) {\r\n        clearCartFromStorage(cartKey);\r\n        setItems([]);\r\n        setCustomerNote('');\r\n      }\r\n    }\r\n  };\r\n\r\n  const toggleTokenPurchase = (productId: number) => {\r\n    const item = items.find(i => i.productId === productId);\r\n    if (!item) return;\r\n\r\n    // Get token settings for this product\r\n    const tokenSettings = productTokenSettings?.[item.sambaId || item.productId];\r\n    if (!tokenSettings || tokenSettings.redeemTokens <= 0) return;\r\n\r\n    const currentTokenQty = item.tokenQuantity || 0;\r\n    const maxAffordable = Math.floor(userTokenBalance / tokenSettings.redeemTokens);\r\n    const maxTokenQuantity = Math.min(item.quantity, maxAffordable);\r\n\r\n    let newTokenQty = 0;\r\n    if (currentTokenQty === 0 && maxTokenQuantity > 0) {\r\n      // Activate: set to 1\r\n      newTokenQty = 1;\r\n    } else if (currentTokenQty < maxTokenQuantity) {\r\n      // Increase by 1\r\n      newTokenQty = currentTokenQty + 1;\r\n    } else {\r\n      // Deactivate: set to 0\r\n      newTokenQty = 0;\r\n    }\r\n\r\n    const newItems = items.map(i =>\r\n      i.productId === productId ? { ...i, tokenQuantity: newTokenQty } : i\r\n    );\r\n    saveCart(newItems);\r\n  };\r\n\r\n  const showOrderConfirmation = (): Promise<boolean> => {\r\n    return new Promise((resolve) => {\r\n      // Get user data\r\n      const userData = localStorage.getItem('userData');\r\n      const user = userData ? JSON.parse(userData) : null;\r\n\r\n      // Get table name from localStorage or use tableId/sessionId\r\n      const storedTableName = localStorage.getItem('currentTableName');\r\n      const displayTableName = isSelfService\r\n        ? 'Self-Servis'\r\n        : (storedTableName || `Masa ${tableId}`);\r\n\r\n      // Create modal HTML\r\n      const modalHTML = `\r\n        <div id=\"orderConfirmationModal\" style=\"position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center; z-index: 100000;\">\r\n          <div style=\"background: white; border-radius: 15px; padding: 25px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 10px 30px rgba(0,0,0,0.3);\">\r\n            <div style=\"text-align: center; margin-bottom: 20px;\">\r\n              <h3 style=\"color: #2c5530; margin: 0; font-size: 22px;\">\r\n                <i class=\"fas fa-receipt\" style=\"margin-right: 8px;\"></i>\r\n                Sipari≈ü √ñzeti\r\n              </h3>\r\n            </div>\r\n\r\n            <div style=\"background: #f8f9fa; border-radius: 10px; padding: 15px; margin-bottom: 20px;\">\r\n              <div style=\"display: flex; justify-content: space-between; margin-bottom: 10px;\">\r\n                <span><strong>üë§ M√º≈üteri:</strong></span>\r\n                <span>${user ? user.firstName + (user.nickName ? ` (${user.nickName})` : '') : 'Misafir'}</span>\r\n              </div>\r\n              <div style=\"display: flex; justify-content: space-between;\">\r\n                <span><strong>üçΩÔ∏è Masa:</strong></span>\r\n                <span>${displayTableName}</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div style=\"margin-bottom: 20px;\">\r\n              <h4 style=\"color: #2c5530; margin-bottom: 15px; border-bottom: 2px solid #e9ecef; padding-bottom: 8px;\">\r\n                <i class=\"fas fa-shopping-cart\" style=\"margin-right: 8px;\"></i>\r\n                Sipari≈ü Detaylarƒ±\r\n              </h4>\r\n              <div id=\"orderItemsList\">\r\n                ${items.map(item => {\r\n                  const tokenQty = item.tokenQuantity || 0;\r\n                  const tokenSettings = productTokenSettings?.[item.sambaId || item.productId];\r\n\r\n                  let tokenInfo = '';\r\n                  let priceInfo = `${item.quantity} x ${item.price.toFixed(2)} ‚Ç∫`;\r\n                  let totalInfo = `${(item.price * item.quantity).toFixed(2)} ‚Ç∫`;\r\n\r\n                  if (tokenQty > 0 && tokenSettings?.redeemTokens) {\r\n                    const tokensUsed = tokenQty * tokenSettings.redeemTokens;\r\n                    const cashQty = item.quantity - tokenQty;\r\n\r\n                    tokenInfo = `<div style=\"font-size: 11px; color: #28a745; font-weight: 600;\">ü™ô ${tokenQty} adet jeton ile (${tokensUsed} jeton)</div>`;\r\n                    totalInfo = `<span style=\"text-decoration: line-through; color: #999;\">${(item.price * item.quantity).toFixed(2)} ‚Ç∫</span> <span style=\"color: #28a745; font-weight: 700;\">${(item.price * cashQty).toFixed(2)} ‚Ç∫</span>`;\r\n                  }\r\n\r\n                  return `\r\n                    <div style=\"display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid #eee; background: #fff;\">\r\n                      <div style=\"flex: 1;\">\r\n                        <div style=\"font-weight: 600; color: #333; margin-bottom: 4px;\">${item.name}</div>\r\n                        ${tokenInfo}\r\n                        ${item.note ? `<div style=\"font-size: 12px; color: #666; font-style: italic;\">üí¨ ${item.note}</div>` : ''}\r\n                      </div>\r\n                      <div style=\"text-align: right; margin-left: 15px;\">\r\n                        <div style=\"font-weight: 600; color: #2c5530;\">${priceInfo}</div>\r\n                        <div style=\"font-size: 12px; color: #666;\">${totalInfo}</div>\r\n                      </div>\r\n                    </div>\r\n                  `;\r\n                }).join('')}\r\n              </div>\r\n            </div>\r\n\r\n            ${customerNote ? `\r\n              <div style=\"margin-bottom: 20px;\">\r\n                <h4 style=\"color: #2c5530; margin-bottom: 10px;\">\r\n                  <i class=\"fas fa-comment\" style=\"margin-right: 8px;\"></i>\r\n                  √ñzel ƒ∞steƒüiniz\r\n                </h4>\r\n                <div style=\"background: #fff3cd; border: 2px solid #dc3545; border-radius: 8px; padding: 15px; font-style: italic; color: #856404;\">\r\n                  \"${customerNote}\"\r\n                </div>\r\n              </div>\r\n            ` : ''}\r\n\r\n            ${totalTokensUsed > 0 ? `\r\n              <div style=\"background: linear-gradient(135deg, rgba(40, 167, 69, 0.15), rgba(32, 201, 151, 0.1)); border: 1px solid rgba(40, 167, 69, 0.3); border-radius: 8px; padding: 10px 12px; margin-bottom: 15px;\">\r\n                <div style=\"display: flex; justify-content: space-between; align-items: center;\">\r\n                  <span style=\"color: #28a745; font-weight: 600; font-size: 14px;\">ü™ô Jeton Kullanƒ±mƒ±</span>\r\n                  <span style=\"color: #28a745; font-weight: 700; font-size: 14px;\">${totalTokensUsed} jeton</span>\r\n                </div>\r\n              </div>\r\n            ` : ''}\r\n\r\n            <div style=\"background: linear-gradient(135deg, #2c5530, #3a6b3f); border-radius: 10px; padding: 15px; margin-bottom: 25px; color: white; text-align: center;\">\r\n              <div style=\"font-size: 18px; font-weight: bold;\">\r\n                <i class=\"fas fa-calculator\" style=\"margin-right: 8px;\"></i>\r\n                TOPLAM: ${totalPrice.toFixed(2)} ‚Ç∫\r\n              </div>\r\n            </div>\r\n\r\n            <div style=\"display: flex; gap: 15px; justify-content: center;\">\r\n              <button id=\"confirmOrderBtn\" style=\"flex: 1; max-width: 180px; background: linear-gradient(135deg, #28a745, #20c997); color: white; border: none; padding: 15px 20px; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer;\">\r\n                <i class=\"fas fa-check\" style=\"margin-right: 8px;\"></i>\r\n                Onayla\r\n              </button>\r\n              <button id=\"cancelOrderBtn\" style=\"flex: 1; max-width: 180px; background: linear-gradient(135deg, #dc3545, #c82333); color: white; border: none; padding: 15px 20px; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer;\">\r\n                <i class=\"fas fa-times\" style=\"margin-right: 8px;\"></i>\r\n                ƒ∞ptal\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      `;\r\n\r\n      // Add modal to DOM\r\n      document.body.insertAdjacentHTML('beforeend', modalHTML);\r\n\r\n      // Button event listeners\r\n      document.getElementById('confirmOrderBtn')!.addEventListener('click', () => {\r\n        document.getElementById('orderConfirmationModal')!.remove();\r\n        resolve(true);\r\n      });\r\n\r\n      document.getElementById('cancelOrderBtn')!.addEventListener('click', () => {\r\n        document.getElementById('orderConfirmationModal')!.remove();\r\n        resolve(false);\r\n      });\r\n\r\n      // Click outside to close\r\n      document.getElementById('orderConfirmationModal')!.addEventListener('click', (e) => {\r\n        if ((e.target as HTMLElement).id === 'orderConfirmationModal') {\r\n          document.getElementById('orderConfirmationModal')!.remove();\r\n          resolve(false);\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  const submitOrder = async () => {\r\n    if (items.length === 0) return;\r\n    if (!customerCode || (!tableId && !sessionId)) {\r\n      alert(isSelfService ? 'Oturum bilgisi bulunamadƒ±.' : 'Masa bilgisi bulunamadƒ±.');\r\n      return;\r\n    }\r\n\r\n    // Show confirmation modal\r\n    const confirmed = await showOrderConfirmation();\r\n    if (!confirmed) {\r\n      return; // User cancelled\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      // Get user ID if logged in\r\n      const userData = localStorage.getItem('userData');\r\n      const endUserId = userData ? JSON.parse(userData).id : null;\r\n\r\n      // Sipari≈ü verisini hazƒ±rla\r\n      const orderData = {\r\n        customerCode: customerCode,\r\n        tableName: isSelfService ? sessionId : tableId,\r\n        endUserId: endUserId, // Logged in user ID (for token deduction)\r\n        Source: 'UI',\r\n        isSelfService: isSelfService,\r\n        items: items.map(item => {\r\n          const tokenSettings = productTokenSettings?.[item.sambaId || item.productId];\r\n          const tokenQty = item.tokenQuantity || 0;\r\n          return {\r\n            productId: item.sambaId || item.productId, // SambaProductId (SambaPOS i√ßin)\r\n            actualProductId: item.productId, // Ger√ßek ID\r\n            productName: item.name,\r\n            quantity: item.quantity,\r\n            price: item.price,\r\n            orderTag: item.note || '',\r\n            tokenQuantity: tokenQty, // Jeton ile alƒ±nan miktar\r\n            tokensPerItem: tokenSettings?.redeemTokens || 0 // Her bir √ºr√ºn i√ßin gereken jeton\r\n          };\r\n        }),\r\n        notificationMessage: customerNote ? `üìù M√º≈üteri Notu: ${customerNote}` : '',\r\n        customerNote: customerNote\r\n      };\r\n\r\n      const response = await fetch('/api/order', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(orderData),\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (response.ok && result.success) {\r\n        // Uyarƒ± kontrol√º\r\n        if (result.warning && result.warningMessage) {\r\n          const confirmed = confirm(\r\n            `‚ö†Ô∏è UYARI\\n\\n${result.warningMessage}\\n\\n` +\r\n            `Sipari≈üleriniz birle≈ütirilebilir.\\n\\n` +\r\n            `Devam etmek istiyor musunuz?`\r\n          );\r\n\r\n          if (!confirmed) {\r\n            setIsSubmitting(false);\r\n            return;\r\n          }\r\n        }\r\n\r\n        alert(`Sipari≈üiniz ba≈üarƒ±yla alƒ±ndƒ±! Sipari≈ü No: #${result.orderNumber || 'N/A'}`);\r\n\r\n        // Sepeti temizle\r\n        if (cartKey) {\r\n          clearCartFromStorage(cartKey);\r\n          setItems([]);\r\n          setCustomerNote('');\r\n        }\r\n        onClose();\r\n      } else {\r\n        // Hata durumlarƒ±\r\n        if (result.userBlocked) {\r\n          alert('Hesabƒ±nƒ±z askƒ±ya alƒ±nmƒ±≈ütƒ±r. L√ºtfen destek ile ileti≈üime ge√ßin.');\r\n        } else if (result.restaurantBlocked) {\r\n          alert(result.error || 'Bu restorandan sipari≈ü verme yetkiniz kaldƒ±rƒ±lmƒ±≈ütƒ±r.');\r\n        } else if (result.dailyLimitReached) {\r\n          alert('Bu restorandan bug√ºn 7 sipari≈ü verdiniz. G√ºnl√ºk limit doldu.');\r\n        } else if (result.differentTableError) {\r\n          alert(result.error || 'Farklƒ± masadan sipari≈ü verme hatasƒ±.');\r\n        } else {\r\n          alert(result.error || 'Sipari≈ü g√∂nderilirken bir hata olu≈ütu.');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Order submission error:', error);\r\n      alert('Sipari≈ü g√∂nderilirken bir hata olu≈ütu.');\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Calculate total with token discount\r\n  const calculateTotal = () => {\r\n    let totalPrice = 0;\r\n    let totalTokensUsed = 0;\r\n\r\n    items.forEach(item => {\r\n      const tokenQty = item.tokenQuantity || 0;\r\n      const cashQuantity = item.quantity - tokenQty;\r\n\r\n      // Cash portion\r\n      totalPrice += cashQuantity * item.price;\r\n\r\n      // Token portion\r\n      if (tokenQty > 0) {\r\n        const tokenSettings = productTokenSettings?.[item.sambaId || item.productId];\r\n        if (tokenSettings) {\r\n          totalTokensUsed += tokenQty * tokenSettings.redeemTokens;\r\n        }\r\n      }\r\n    });\r\n\r\n    return { totalPrice, totalTokensUsed };\r\n  };\r\n\r\n  const { totalPrice, totalTokensUsed } = calculateTotal();\r\n  const totalItems = items.reduce((sum, item) => sum + item.quantity, 0);\r\n\r\n  return (\r\n    <>\r\n      {/* Overlay */}\r\n      <div\r\n        className=\"cart-overlay\"\r\n        onClick={onClose}\r\n        style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          width: '100%',\r\n          height: '100%',\r\n          background: 'rgba(0, 0, 0, 0.5)',\r\n          opacity: isOpen ? 1 : 0,\r\n          visibility: isOpen ? 'visible' : 'hidden',\r\n          transition: 'all 0.3s ease',\r\n          zIndex: 99998,\r\n        }}\r\n      />\r\n\r\n      {/* Sidebar */}\r\n      <div\r\n        className={`cart-sidebar ${isOpen ? 'sidebar-open' : ''}`}\r\n        style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          right: isOpen ? 0 : '-100%',\r\n          width: '100%',\r\n          maxWidth: '400px',\r\n          height: '100vh',\r\n          background: 'rgba(245, 245, 245, 0.95)',\r\n          backdropFilter: 'blur(10px)',\r\n          boxShadow: '-4px 0 20px rgba(0, 0, 0, 0.2)',\r\n          transition: 'right 0.3s ease',\r\n          zIndex: 99999,\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          paddingBottom: '80px',\r\n        }}\r\n      >\r\n        {/* Header - Tek Satƒ±r */}\r\n        <div\r\n          className=\"cart-header\"\r\n          style={{\r\n            background: 'linear-gradient(135deg, #28a745 0%, #20c997 100%)',\r\n            color: 'white',\r\n            padding: '12px 15px',\r\n            boxShadow: '0 2px 10px rgba(0, 0, 0, 0.1)',\r\n            flexShrink: 0,\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'space-between',\r\n            gap: '8px',\r\n          }}\r\n        >\r\n          {/* Sol: Sepetim + √úr√ºn sayƒ±sƒ± */}\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '6px', flexShrink: 0 }}>\r\n            <i className=\"fas fa-shopping-cart\" style={{ fontSize: '16px' }}></i>\r\n            <span style={{ fontSize: '16px', fontWeight: 600 }}>Sepetim</span>\r\n            <span style={{ background: 'rgba(255, 255, 255, 0.2)', padding: '2px 8px', borderRadius: '6px', fontSize: '11px', fontWeight: 600 }}>\r\n              {totalItems}\r\n            </span>\r\n          </div>\r\n\r\n          {/* Orta: Jeton bakiyesi (Kalan) */}\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '6px', fontSize: '12px', flex: 1, justifyContent: 'center' }}>\r\n            {userTokenBalance > 0 && (\r\n              <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '1px' }}>\r\n                <span style={{ fontSize: '9px', opacity: 0.9, fontWeight: 500 }}>Jeton</span>\r\n                <span style={{ background: 'rgba(255, 255, 255, 0.25)', padding: '4px 12px', borderRadius: '6px', fontWeight: 700, fontSize: '16px' }}>\r\n                  ü™ô {userTokenBalance - totalTokensUsed}\r\n                </span>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Saƒü: Toplam */}\r\n          <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '2px' }}>\r\n            <span style={{ fontSize: '10px', opacity: 0.95, fontWeight: 600, letterSpacing: '0.5px' }}>TOPLAM</span>\r\n            <span style={{ background: 'rgba(255, 255, 255, 0.3)', padding: '6px 14px', borderRadius: '8px', fontWeight: 800, fontSize: '20px', letterSpacing: '0.5px', boxShadow: '0 2px 8px rgba(0,0,0,0.15)' }}>\r\n              {totalPrice.toFixed(2)} ‚Ç∫\r\n            </span>\r\n          </div>\r\n\r\n          {/* Saƒü: Kapat butonu */}\r\n          <button\r\n            onClick={onClose}\r\n            style={{\r\n              background: 'rgba(255, 255, 255, 0.25)',\r\n              border: '2px solid rgba(255, 255, 255, 0.4)',\r\n              color: 'white',\r\n              width: '32px',\r\n              height: '32px',\r\n              borderRadius: '50%',\r\n              cursor: 'pointer',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              fontSize: '18px',\r\n              fontWeight: 'bold',\r\n              flexShrink: 0,\r\n              marginLeft: '8px',\r\n            }}\r\n          >\r\n            √ó\r\n          </button>\r\n        </div>\r\n\r\n        {/* Items List */}\r\n        <div\r\n          className=\"cart-items\"\r\n          style={{\r\n            flex: 1,\r\n            overflowY: 'auto',\r\n            padding: '15px',\r\n          }}\r\n        >\r\n          {items.length === 0 ? (\r\n            <div\r\n              className=\"empty-cart\"\r\n              style={{\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                padding: '60px 20px',\r\n                textAlign: 'center',\r\n                color: '#666',\r\n              }}\r\n            >\r\n              <i className=\"fas fa-shopping-cart\" style={{ fontSize: '60px', marginBottom: '20px', opacity: 0.3 }}></i>\r\n              <h4 style={{ margin: '0 0 10px 0', fontSize: '18px', fontWeight: 600 }}>Sepetiniz bo≈ü</h4>\r\n              <p style={{ margin: 0, fontSize: '14px', opacity: 0.8 }}>\r\n                √úr√ºn eklemek i√ßin men√ºdeki \"Sepete Ekle\" butonlarƒ±nƒ± kullanƒ±n\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            items.map((item) => (\r\n              <div\r\n                key={item.productId}\r\n                className=\"cart-item\"\r\n                style={{\r\n                  background: 'white',\r\n                  borderRadius: '12px',\r\n                  padding: '12px',\r\n                  marginBottom: '10px',\r\n                  boxShadow: '0 2px 4px rgba(0, 0, 0, 0.05)',\r\n                }}\r\n              >\r\n                <div style={{ display: 'flex', gap: '12px', alignItems: 'flex-start' }}>\r\n                  {/* Image */}\r\n                  {item.image && (\r\n                    <div style={{ flexShrink: 0 }}>\r\n                      <img\r\n                        src={item.image}\r\n                        alt={item.name}\r\n                        style={{\r\n                          width: '60px',\r\n                          height: '60px',\r\n                          objectFit: 'cover',\r\n                          borderRadius: '8px',\r\n                        }}\r\n                      />\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Details */}\r\n                  <div style={{ flex: 1, minWidth: 0 }}>\r\n                    {/* Product Name + Quantity Controls */}\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '4px', gap: '8px' }}>\r\n                      <div style={{ fontSize: '14px', fontWeight: 600, color: '#333', flex: 1, minWidth: 0 }}>\r\n                        {item.name}\r\n                      </div>\r\n                      <div style={{ display: 'flex', gap: '4px', alignItems: 'center', flexShrink: 0 }}>\r\n                        <button\r\n                          onClick={() => updateQuantity(item.productId, item.quantity - 1)}\r\n                          style={{\r\n                            width: '26px',\r\n                            height: '26px',\r\n                            border: '1px solid #ddd',\r\n                            background: 'white',\r\n                            borderRadius: '4px',\r\n                            cursor: 'pointer',\r\n                            fontSize: '16px',\r\n                            color: '#666',\r\n                            fontWeight: 'bold',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                          }}\r\n                        >\r\n                          ‚àí\r\n                        </button>\r\n                        <span style={{ fontSize: '14px', fontWeight: 700, color: '#333', minWidth: '20px', textAlign: 'center' }}>\r\n                          {item.quantity}\r\n                        </span>\r\n                        <button\r\n                          onClick={() => updateQuantity(item.productId, item.quantity + 1)}\r\n                          style={{\r\n                            width: '26px',\r\n                            height: '26px',\r\n                            border: '1px solid #28a745',\r\n                            background: '#28a745',\r\n                            color: 'white',\r\n                            borderRadius: '4px',\r\n                            cursor: 'pointer',\r\n                            fontSize: '14px',\r\n                            fontWeight: 'bold',\r\n                            display: 'flex',\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center',\r\n                          }}\r\n                        >\r\n                          +\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Price Display */}\r\n                    <div style={{ fontSize: '13px', marginBottom: '8px' }}>\r\n                      {(() => {\r\n                        const tokenQty = item.tokenQuantity || 0;\r\n                        const tokenSettings = productTokenSettings?.[item.sambaId || item.productId];\r\n\r\n                        if (tokenQty > 0 && tokenSettings) {\r\n                          const cashQuantity = item.quantity - tokenQty;\r\n\r\n                          if (cashQuantity > 0) {\r\n                            // Partial token payment\r\n                            return (\r\n                              <>\r\n                                <div style={{ color: '#28a745', fontWeight: 'bold', fontSize: '12px' }}>\r\n                                  ü™ô {tokenQty} adet jeton ile ({tokenQty * tokenSettings.redeemTokens} jeton)\r\n                                </div>\r\n                                <div style={{ color: '#666', fontSize: '12px' }}>\r\n                                  {cashQuantity} adet nakit: {(cashQuantity * item.price).toFixed(2)} ‚Ç∫\r\n                                </div>\r\n                              </>\r\n                            );\r\n                          } else {\r\n                            // All with tokens\r\n                            return (\r\n                              <div style={{ color: '#28a745', fontWeight: 'bold' }}>\r\n                                ü™ô {tokenQty} adet x {tokenSettings.redeemTokens} jeton\r\n                              </div>\r\n                            );\r\n                          }\r\n                        }\r\n\r\n                        // Normal cash payment\r\n                        return (\r\n                          <div style={{ color: '#666' }}>\r\n                            {item.price.toFixed(2)} ‚Ç∫ x {item.quantity}\r\n                          </div>\r\n                        );\r\n                      })()}\r\n\r\n                      {/* Earn tokens info (only if not using tokens) */}\r\n                      {(() => {\r\n                        const tokenQty = item.tokenQuantity || 0;\r\n                        const tokenSettings = productTokenSettings?.[item.sambaId || item.productId];\r\n\r\n                        if (tokenSettings && tokenSettings.earnTokens > 0 && tokenQty === 0) {\r\n                          return (\r\n                            <div style={{ fontSize: '11px', color: '#28a745', marginTop: '4px' }}>\r\n                              +{tokenSettings.earnTokens * item.quantity} jeton kazanacaksƒ±nƒ±z\r\n                            </div>\r\n                          );\r\n                        }\r\n                        return null;\r\n                      })()}\r\n                    </div>\r\n\r\n                    {/* Item Note */}\r\n                    <input\r\n                      type=\"text\"\r\n                      placeholder=\"√ñzel isteƒüiniz var mƒ±? (Opsiyonel)\"\r\n                      value={item.note || ''}\r\n                      onChange={(e) => updateItemNote(item.productId, e.target.value)}\r\n                      maxLength={100}\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '6px 8px',\r\n                        border: '1px solid #e2e8f0',\r\n                        borderRadius: '6px',\r\n                        fontSize: '12px',\r\n                        marginBottom: '8px',\r\n                      }}\r\n                    />\r\n\r\n                    {/* Token Button */}\r\n                    {(() => {\r\n                      const tokenSettings = productTokenSettings?.[item.sambaId || item.productId];\r\n                      if (!tokenSettings || tokenSettings.redeemTokens <= 0) return null;\r\n\r\n                      const tokenQty = item.tokenQuantity || 0;\r\n                      const maxAffordable = Math.floor(userTokenBalance / tokenSettings.redeemTokens);\r\n                      const maxTokenQuantity = Math.min(item.quantity, maxAffordable);\r\n                      const hasEnoughTokens = userTokenBalance >= tokenSettings.redeemTokens;\r\n\r\n                      return (\r\n                        <button\r\n                          onClick={() => toggleTokenPurchase(item.productId)}\r\n                          disabled={!hasEnoughTokens}\r\n                          style={{\r\n                            width: '100%',\r\n                            padding: '6px 10px',\r\n                            marginBottom: '8px',\r\n                            background: tokenQty > 0 ? 'linear-gradient(135deg, #28a745 0%, #20c997 100%)' : (hasEnoughTokens ? 'linear-gradient(135deg, #ffc107 0%, #ff9800 100%)' : '#e9ecef'),\r\n                            color: hasEnoughTokens ? 'white' : '#adb5bd',\r\n                            border: 'none',\r\n                            borderRadius: '6px',\r\n                            fontSize: '11px',\r\n                            fontWeight: 600,\r\n                            cursor: hasEnoughTokens ? 'pointer' : 'not-allowed',\r\n                            transition: 'all 0.2s',\r\n                          }}\r\n                        >\r\n                          ü™ô {tokenQty === 0\r\n                            ? `${tokenSettings.redeemTokens} Jeton kullan${!hasEnoughTokens ? ' (Yetersiz)' : ''}`\r\n                            : tokenQty < maxTokenQuantity\r\n                            ? `${tokenQty}/${maxTokenQuantity} adet (tƒ±kla: +1)`\r\n                            : `${tokenQty}/${maxTokenQuantity} adet (tƒ±kla: iptal)`\r\n                          }\r\n                        </button>\r\n                      );\r\n                    })()}\r\n\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer - Sadece Not ve Butonlar */}\r\n        {items.length > 0 && (\r\n          <div\r\n            className=\"cart-footer\"\r\n            style={{\r\n              borderTop: '1px solid #e2e8f0',\r\n              padding: '12px 15px',\r\n              background: 'white',\r\n              flexShrink: 0,\r\n            }}\r\n          >\r\n            {/* Customer Note */}\r\n            <div style={{ marginBottom: '10px' }}>\r\n              <textarea\r\n                placeholder=\"Sipari≈ü notu (opsiyonel)...\"\r\n                value={customerNote}\r\n                onChange={(e) => setCustomerNote(e.target.value)}\r\n                maxLength={200}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '8px',\r\n                  border: '1px solid #e2e8f0',\r\n                  borderRadius: '6px',\r\n                  fontSize: '12px',\r\n                  resize: 'none',\r\n                  height: '50px',\r\n                  fontFamily: 'inherit',\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            {/* Action Buttons */}\r\n            <div style={{ display: 'flex', gap: '8px' }}>\r\n              <button\r\n                onClick={clearCart}\r\n                style={{\r\n                  flex: 1,\r\n                  padding: '12px',\r\n                  background: '#dc3545',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '6px',\r\n                  fontSize: '14px',\r\n                  fontWeight: 600,\r\n                  cursor: 'pointer',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  gap: '6px',\r\n                }}\r\n              >\r\n                <i className=\"fas fa-trash-alt\"></i>\r\n                <span>Temizle</span>\r\n              </button>\r\n              <button\r\n                onClick={submitOrder}\r\n                disabled={isSubmitting}\r\n                style={{\r\n                  flex: 2,\r\n                  padding: '12px',\r\n                  background: isSubmitting\r\n                    ? '#ccc'\r\n                    : 'linear-gradient(135deg, #28a745 0%, #20c997 100%)',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '6px',\r\n                  fontSize: '14px',\r\n                  fontWeight: 600,\r\n                  cursor: isSubmitting ? 'not-allowed' : 'pointer',\r\n                  boxShadow: isSubmitting ? 'none' : '0 4px 12px rgba(40, 167, 69, 0.3)',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  gap: '6px',\r\n                }}\r\n              >\r\n                <i className=\"fas fa-paper-plane\"></i>\r\n                <span>{isSubmitting ? 'G√∂nderiliyor...' : 'Sipari≈ü Ver'}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useAuth } from '@/contexts/UserContext';\r\n\r\n// Google Sign-In types\r\ndeclare global {\r\n  interface Window {\r\n    google?: {\r\n      accounts: {\r\n        id: {\r\n          initialize: (config: any) => void;\r\n          prompt: () => void;\r\n        };\r\n      };\r\n    };\r\n  }\r\n}\r\n\r\ninterface ProfileSidebarProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  customerCode?: string;\r\n}\r\n\r\ntype TabType = 'orders' | 'tokens' | 'allergies' | 'settings';\r\n\r\nexport default function ProfileSidebar({ isOpen, onClose, customerCode }: ProfileSidebarProps) {\r\n  const { currentUser, isAuthenticated, login, register, logout } = useAuth();\r\n  const [activeTab, setActiveTab] = useState<TabType>('orders');\r\n  const [showLoginModal, setShowLoginModal] = useState(false);\r\n  const [showRegisterModal, setShowRegisterModal] = useState(false);\r\n  const [isLoggingIn, setIsLoggingIn] = useState(false);\r\n  const [phoneOrEmail, setPhoneOrEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n  // Register form states\r\n  const [registerData, setRegisterData] = useState({\r\n    firstName: '',\r\n    lastName: '',\r\n    email: '',\r\n    phoneNumber: '',\r\n    password: '',\r\n    nickName: '',\r\n  });\r\n\r\n  // Tab data states\r\n  const [orders, setOrders] = useState<any[]>([]);\r\n  const [ordersLoading, setOrdersLoading] = useState(false);\r\n  const [tokens, setTokens] = useState<any>(null);\r\n  const [tokensLoading, setTokensLoading] = useState(false);\r\n  const [allergies, setAllergies] = useState<string[]>([]);\r\n  const [allergiesLoading, setAllergiesLoading] = useState(false);\r\n  const [otherAllergies, setOtherAllergies] = useState('');\r\n\r\n  // Settings tab states\r\n  const [settingsData, setSettingsData] = useState({\r\n    email: '',\r\n    phoneNumber: '',\r\n    birthDate: '',\r\n    gender: '',\r\n  });\r\n  const [isUpdatingProfile, setIsUpdatingProfile] = useState(false);\r\n\r\n  // ü™ô Listen for SignalR TokenBalanceUpdated event\r\n  useEffect(() => {\r\n    const handleTokenBalanceUpdate = (event: any) => {\r\n      const { balance, message } = event.detail;\r\n\r\n      if (currentUser && activeTab === 'tokens') {\r\n        loadTokens();\r\n      }\r\n\r\n      if (message) {\r\n        showNotification(message, 'success');\r\n      }\r\n    };\r\n\r\n    window.addEventListener('tokenBalanceUpdated', handleTokenBalanceUpdate);\r\n    return () => window.removeEventListener('tokenBalanceUpdated', handleTokenBalanceUpdate);\r\n  }, [currentUser, activeTab]);\r\n\r\n  const handleLogin = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setIsLoggingIn(true);\r\n\r\n    try {\r\n      const result = await login(phoneOrEmail, password);\r\n\r\n      if (result.success) {\r\n        // User bilgisi context'te g√ºncellendi, bir s√ºre sonra currentUser dolacak\r\n        setTimeout(() => {\r\n          alert(`Ho≈ügeldin ${currentUser?.name || ''}!`);\r\n        }, 100);\r\n        setShowLoginModal(false);\r\n        setPhoneOrEmail('');\r\n        setPassword('');\r\n      } else {\r\n        alert(result.error || 'Giri≈ü ba≈üarƒ±sƒ±z');\r\n      }\r\n    } catch (error) {\r\n      console.error('Login error:', error);\r\n      alert('Baƒülantƒ± hatasƒ±. L√ºtfen tekrar deneyin.');\r\n    } finally {\r\n      setIsLoggingIn(false);\r\n    }\r\n  };\r\n\r\n  const waitForGoogleSdk = (): Promise<void> => {\r\n    return new Promise((resolve, reject) => {\r\n      if (typeof window !== 'undefined' && window.google?.accounts) {\r\n        resolve();\r\n        return;\r\n      }\r\n\r\n      const checkGoogleLoaded = setInterval(() => {\r\n        if (typeof window !== 'undefined' && window.google?.accounts) {\r\n          clearInterval(checkGoogleLoaded);\r\n          resolve();\r\n        }\r\n      }, 100);\r\n\r\n      setTimeout(() => {\r\n        clearInterval(checkGoogleLoaded);\r\n        reject(new Error('Google SDK y√ºklenemedi'));\r\n      }, 10000);\r\n    });\r\n  };\r\n\r\n  const handleGoogleCallback = async (response: any) => {\r\n    try {\r\n      setIsLoggingIn(true);\r\n\r\n      const apiResponse = await fetch('/api/auth/google', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          credential: response.credential,\r\n          mode: 'login',\r\n          customerCode: customerCode || ''\r\n        })\r\n      });\r\n\r\n      const data = await apiResponse.json();\r\n\r\n      if (data.success && data.token && data.user) {\r\n        // IMPORTANT: Let UserContext handle everything\r\n        localStorage.setItem('userToken', data.token);\r\n        localStorage.setItem('userData', JSON.stringify(data.user));\r\n        localStorage.setItem('lastLoginTime', Date.now().toString());\r\n\r\n        // Trigger UserContext to reload session\r\n        window.location.reload();\r\n      } else {\r\n        alert(data.error || 'Google ile giri≈ü ba≈üarƒ±sƒ±z');\r\n      }\r\n    } catch (error) {\r\n      console.error('Google login error:', error);\r\n      alert('Google ile baƒülantƒ± sƒ±rasƒ±nda hata olu≈ütu');\r\n    } finally {\r\n      setIsLoggingIn(false);\r\n    }\r\n  };\r\n\r\n  const handleGoogleLogin = async () => {\r\n    try {\r\n      setIsLoggingIn(true);\r\n      await waitForGoogleSdk();\r\n\r\n      const GOOGLE_CLIENT_ID = '272265935268-q6o120vjjoch144ppf3bfp1l2o8da7ka.apps.googleusercontent.com';\r\n\r\n      window.google!.accounts.id.initialize({\r\n        client_id: GOOGLE_CLIENT_ID,\r\n        callback: handleGoogleCallback,\r\n        ux_mode: 'popup',\r\n        use_fedcm_for_prompt: false\r\n      });\r\n\r\n      window.google!.accounts.id.prompt();\r\n    } catch (error) {\r\n      console.error('Google SDK load error:', error);\r\n      alert('Google ile giri≈ü ba≈ülatƒ±lamadƒ±. L√ºtfen tekrar deneyin.');\r\n      setIsLoggingIn(false);\r\n    }\r\n  };\r\n\r\n  const handleRegister = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    // Validations\r\n    if (!registerData.email) {\r\n      alert('E-posta adresi zorunludur');\r\n      return;\r\n    }\r\n\r\n    if (!registerData.email.includes('@')) {\r\n      alert('Ge√ßerli bir e-posta adresi giriniz');\r\n      return;\r\n    }\r\n\r\n    if (!registerData.phoneNumber) {\r\n      alert('Telefon numarasƒ± zorunludur');\r\n      return;\r\n    }\r\n\r\n    if (registerData.phoneNumber.length !== 11) {\r\n      alert('Telefon numarasƒ± 11 haneli olmalƒ±dƒ±r (05XXXXXXXXX)');\r\n      return;\r\n    }\r\n\r\n    if (!registerData.phoneNumber.startsWith('05')) {\r\n      alert('Telefon numarasƒ± 05 ile ba≈ülamalƒ±dƒ±r');\r\n      return;\r\n    }\r\n\r\n    if (!registerData.nickName || registerData.nickName.trim().length === 0) {\r\n      alert('Kullanƒ±cƒ± adƒ± zorunludur');\r\n      return;\r\n    }\r\n\r\n    if (!registerData.firstName) {\r\n      alert('ƒ∞sim zorunludur');\r\n      return;\r\n    }\r\n\r\n    if (!registerData.lastName) {\r\n      alert('Soyisim zorunludur');\r\n      return;\r\n    }\r\n\r\n    if (!registerData.password || registerData.password.length < 6) {\r\n      alert('≈ûifre en az 6 karakter olmalƒ±dƒ±r');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setIsLoggingIn(true);\r\n\r\n      const result = await register({\r\n        name: registerData.firstName,\r\n        surname: registerData.lastName,\r\n        email: registerData.email,\r\n        password: registerData.password,\r\n        phoneNumber: registerData.phoneNumber,\r\n      });\r\n\r\n      if (result.success) {\r\n        alert(`Ho≈ügeldin ${registerData.firstName}! Kayƒ±t ba≈üarƒ±yla tamamlandƒ±.`);\r\n        setShowRegisterModal(false);\r\n        // Reset form\r\n        setRegisterData({\r\n          firstName: '',\r\n          lastName: '',\r\n          email: '',\r\n          phoneNumber: '',\r\n          password: '',\r\n          nickName: '',\r\n        });\r\n      } else {\r\n        alert(result.error || 'Kayƒ±t i≈ülemi ba≈üarƒ±sƒ±z');\r\n      }\r\n    } catch (error) {\r\n      console.error('Register error:', error);\r\n      alert('Baƒülantƒ± hatasƒ±. L√ºtfen tekrar deneyin.');\r\n    } finally {\r\n      setIsLoggingIn(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    logout();\r\n    alert('√áƒ±kƒ±≈ü yapƒ±ldƒ±');\r\n  };\r\n\r\n  // ü™ô Bildirim g√∂sterme fonksiyonu\r\n  const showNotification = (message: string, type: 'success' | 'error' | 'info' = 'info') => {\r\n    const notification = document.createElement('div');\r\n    notification.textContent = message;\r\n    notification.style.cssText = `\r\n      position: fixed;\r\n      bottom: 80px;\r\n      left: 50%;\r\n      transform: translateX(-50%);\r\n      background: ${type === 'success' ? '#28a745' : type === 'error' ? '#dc3545' : '#007bff'};\r\n      color: white;\r\n      padding: 12px 20px;\r\n      border-radius: 8px;\r\n      box-shadow: 0 4px 12px rgba(0,0,0,0.3);\r\n      z-index: 100001;\r\n      font-size: 14px;\r\n      font-weight: 600;\r\n      max-width: 90%;\r\n      text-align: center;\r\n    `;\r\n    document.body.appendChild(notification);\r\n\r\n    setTimeout(() => {\r\n      if (notification.parentNode) {\r\n        notification.parentNode.removeChild(notification);\r\n      }\r\n    }, 3000);\r\n  };\r\n\r\n  // Load data when tab changes\r\n  useEffect(() => {\r\n    if (!currentUser) return;\r\n\r\n    if (activeTab === 'orders') {\r\n      loadOrders();\r\n    } else if (activeTab === 'tokens') {\r\n      loadTokens();\r\n    } else if (activeTab === 'allergies') {\r\n      loadAllergies();\r\n    } else if (activeTab === 'settings') {\r\n      loadSettings();\r\n    }\r\n  }, [activeTab, currentUser]);\r\n\r\n  const loadOrders = async () => {\r\n    const userId = currentUser?.id || currentUser?.userId || currentUser?.Id;\r\n\r\n    if (!userId) {\r\n      return;\r\n    }\r\n\r\n    setOrdersLoading(true);\r\n    try {\r\n      const response = await fetch(`/api/user/orders/${userId}`);\r\n      const result = await response.json();\r\n\r\n      if (result.errors) {\r\n        console.error('Validation errors:', result.errors);\r\n      }\r\n\r\n      if (result.success && result.orders) {\r\n        setOrders(result.orders);\r\n      } else {\r\n        setOrders([]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load orders:', error);\r\n      setOrders([]);\r\n    } finally {\r\n      setOrdersLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadTokens = async () => {\r\n    const token = localStorage.getItem('userToken');\r\n    if (!token) return;\r\n\r\n    setTokensLoading(true);\r\n    try {\r\n      const response = await fetch('/api/user/tokens', {\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n        },\r\n      });\r\n      const result = await response.json();\r\n\r\n      if (result.success) {\r\n        setTokens(result);\r\n      } else {\r\n        setTokens(null);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load tokens:', error);\r\n      setTokens(null);\r\n    } finally {\r\n      setTokensLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadAllergies = () => {\r\n    // Load standard allergies\r\n    const savedAllergies = localStorage.getItem('global_userAllergies');\r\n    if (savedAllergies) {\r\n      try {\r\n        const parsedAllergies = JSON.parse(savedAllergies);\r\n        // Separate standard allergies from \"other\" allergies\r\n        const standardAllergies = parsedAllergies.filter((a: string) => !a.startsWith('Diƒüer: '));\r\n        const otherAllergyItems = parsedAllergies.filter((a: string) => a.startsWith('Diƒüer: '));\r\n\r\n        setAllergies(standardAllergies);\r\n\r\n        // Combine all \"other\" allergies into textarea\r\n        if (otherAllergyItems.length > 0) {\r\n          const otherText = otherAllergyItems.map((a: string) => a.replace('Diƒüer: ', '')).join(', ');\r\n          setOtherAllergies(otherText);\r\n        }\r\n      } catch (error) {\r\n        setAllergies([]);\r\n      }\r\n    } else {\r\n      setAllergies([]);\r\n    }\r\n  };\r\n\r\n  const loadSettings = () => {\r\n    if (currentUser) {\r\n      setSettingsData({\r\n        email: currentUser.email || '',\r\n        phoneNumber: currentUser.phoneNumber || '',\r\n        birthDate: currentUser.birthDate || '',\r\n        gender: currentUser.gender || '',\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleAllergiesUpdate = async () => {\r\n    const token = localStorage.getItem('userToken');\r\n\r\n    // Combine standard allergies with \"other\" allergies\r\n    const allAllergies = [...allergies];\r\n\r\n    // Add \"other\" allergies if textarea has content\r\n    if (otherAllergies && otherAllergies.trim()) {\r\n      // Split by comma and add \"Diƒüer: \" prefix\r\n      const otherItems = otherAllergies.split(',').map(a => `Diƒüer: ${a.trim()}`).filter(a => a !== 'Diƒüer: ');\r\n      allAllergies.push(...otherItems);\r\n    }\r\n\r\n    localStorage.setItem('global_userAllergies', JSON.stringify(allAllergies));\r\n\r\n    if (token) {\r\n      try {\r\n        await fetch('/api/user/allergies', {\r\n          method: 'PUT',\r\n          headers: {\r\n            'Authorization': `Bearer ${token}`,\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({ allergies: allAllergies }),\r\n        });\r\n        alert('Alerjan bilgileriniz kaydedildi');\r\n      } catch (error) {\r\n        alert('Alerjan bilgileriniz yerel olarak kaydedildi');\r\n      }\r\n    } else {\r\n      alert('Alerjan bilgileriniz yerel olarak kaydedildi');\r\n    }\r\n  };\r\n\r\n  const handleProfileUpdate = async () => {\r\n    // Validate phone number if provided\r\n    if (settingsData.phoneNumber && settingsData.phoneNumber.trim()) {\r\n      if (settingsData.phoneNumber.length !== 11) {\r\n        alert('Telefon numarasƒ± 11 haneli olmalƒ±dƒ±r (05XXXXXXXXX)');\r\n        return;\r\n      }\r\n      if (!settingsData.phoneNumber.startsWith('05')) {\r\n        alert('Telefon numarasƒ± 05 ile ba≈ülamalƒ±dƒ±r');\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Validate email if provided\r\n    if (settingsData.email && settingsData.email.trim() && !settingsData.email.includes('@')) {\r\n      alert('Ge√ßerli bir e-posta adresi giriniz');\r\n      return;\r\n    }\r\n\r\n    setIsUpdatingProfile(true);\r\n    const token = localStorage.getItem('userToken');\r\n\r\n    try {\r\n      const response = await fetch('/api/user/profile', {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Authorization': `Bearer ${token}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          email: settingsData.email || null,\r\n          phoneNumber: settingsData.phoneNumber || null,\r\n          birthDate: settingsData.birthDate || null,\r\n          gender: settingsData.gender || null,\r\n        }),\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (result.success) {\r\n        // Update localStorage userData\r\n        const userData = JSON.parse(localStorage.getItem('userData') || '{}');\r\n        const updatedUserData = {\r\n          ...userData,\r\n          email: settingsData.email || userData.email,\r\n          phoneNumber: settingsData.phoneNumber || userData.phoneNumber,\r\n          birthDate: settingsData.birthDate || userData.birthDate,\r\n          gender: settingsData.gender || userData.gender,\r\n        };\r\n        localStorage.setItem('userData', JSON.stringify(updatedUserData));\r\n\r\n        alert('Profil bilgileriniz ba≈üarƒ±yla g√ºncellendi');\r\n        window.location.reload(); // Reload to update context\r\n      } else {\r\n        alert(result.error || 'Profil g√ºncellenirken hata olu≈ütu');\r\n      }\r\n    } catch (error) {\r\n      console.error('Profile update error:', error);\r\n      alert('Baƒülantƒ± hatasƒ±. L√ºtfen tekrar deneyin.');\r\n    } finally {\r\n      setIsUpdatingProfile(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Overlay */}\r\n      <div\r\n        className=\"profile-overlay\"\r\n        onClick={onClose}\r\n        style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          width: '100%',\r\n          height: '100%',\r\n          background: 'rgba(0, 0, 0, 0.5)',\r\n          opacity: isOpen ? 1 : 0,\r\n          visibility: isOpen ? 'visible' : 'hidden',\r\n          transition: 'all 0.3s ease',\r\n          zIndex: 99998,\r\n        }}\r\n      />\r\n\r\n      {/* Sidebar */}\r\n      <div\r\n        className={`profile-sidebar ${isOpen ? 'sidebar-open' : ''}`}\r\n        style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: isOpen ? 0 : '-100%',\r\n          width: '100%',\r\n          maxWidth: '450px',\r\n          height: '100vh',\r\n          background: '#f8f9fa',\r\n          transition: 'left 0.3s ease',\r\n          zIndex: 99999,\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          boxShadow: '2px 0 20px rgba(0, 0, 0, 0.2)',\r\n        }}\r\n      >\r\n        {/* Header */}\r\n        <div\r\n          className=\"profile-header\"\r\n          style={{\r\n            background: 'linear-gradient(135deg, #343a40 0%, #212529 100%)',\r\n            color: 'white',\r\n            padding: '15px 20px',\r\n            position: 'relative',\r\n            textAlign: 'center',\r\n          }}\r\n        >\r\n          <button\r\n            className=\"modal-close\"\r\n            onClick={onClose}\r\n            style={{\r\n              position: 'absolute',\r\n              top: '10px',\r\n              right: '15px',\r\n              background: 'rgba(255,255,255,0.2)',\r\n              border: 'none',\r\n              color: 'white',\r\n              fontSize: '18px',\r\n              cursor: 'pointer',\r\n              width: '28px',\r\n              height: '28px',\r\n              borderRadius: '50%',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              transition: 'background 0.3s ease',\r\n            }}\r\n          >\r\n            <i className=\"fas fa-times\"></i>\r\n          </button>\r\n\r\n          <div\r\n            className=\"user-avatar\"\r\n            style={{\r\n              margin: '0 auto 10px auto',\r\n              width: '50px',\r\n              height: '50px',\r\n              fontSize: '20px',\r\n              background: currentUser ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' : 'rgba(255,255,255,0.2)',\r\n              borderRadius: '50%',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              color: 'white',\r\n              border: '2px solid rgba(255,255,255,0.3)',\r\n            }}\r\n          >\r\n            <i className=\"fas fa-user\"></i>\r\n          </div>\r\n          <h3 style={{ margin: '0 0 3px 0', fontSize: '16px', fontWeight: 600 }}>\r\n            {currentUser ? `${currentUser.firstName} ${currentUser.lastName}` : 'Misafir'}\r\n          </h3>\r\n          <p style={{ margin: '0 0 5px 0', opacity: 0.9, fontSize: '12px' }}>\r\n            {currentUser ? (currentUser.email || currentUser.phoneNumber || '') : 'Giri≈ü yaparak √∂zelliklerden faydalanƒ±n'}\r\n          </p>\r\n        </div>\r\n\r\n        {/* Navigation Tabs */}\r\n        <div\r\n          className=\"profile-nav\"\r\n          style={{\r\n            background: '#f8f9fa',\r\n            padding: '15px',\r\n            display: 'grid',\r\n            gridTemplateColumns: 'repeat(4, 1fr)',\r\n            gap: '6px',\r\n          }}\r\n        >\r\n          {[\r\n            { id: 'orders' as TabType, icon: 'fa-shopping-cart', label: 'Sipari≈üler' },\r\n            { id: 'tokens' as TabType, icon: 'fa-coins', label: 'Jetonlar' },\r\n            { id: 'allergies' as TabType, icon: 'fa-exclamation-triangle', label: 'Alerjanlar' },\r\n            { id: 'settings' as TabType, icon: 'fa-cog', label: 'Ayarlar' },\r\n          ].map((tab) => (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => setActiveTab(tab.id)}\r\n              style={{\r\n                background: 'white',\r\n                border: activeTab === tab.id ? '2px solid #667eea' : '2px solid #e9ecef',\r\n                padding: '10px 4px',\r\n                cursor: 'pointer',\r\n                fontSize: '9px',\r\n                fontWeight: 600,\r\n                color: activeTab === tab.id ? '#667eea' : '#6c757d',\r\n                borderRadius: '8px',\r\n                textAlign: 'center',\r\n                transition: 'all 0.3s ease',\r\n                boxShadow:\r\n                  activeTab === tab.id\r\n                    ? '0 2px 8px rgba(102, 126, 234, 0.15)'\r\n                    : '0 2px 8px rgba(0,0,0,0.05)',\r\n              }}\r\n            >\r\n              <div>\r\n                <i\r\n                  className={`fas ${tab.icon}`}\r\n                  style={{\r\n                    fontSize: '11px',\r\n                    display: 'block',\r\n                    marginBottom: '3px',\r\n                    color: tab.id === 'tokens' ? '#ffc107' : 'inherit',\r\n                  }}\r\n                ></i>\r\n              </div>\r\n              <div>{tab.label}</div>\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div\r\n          className=\"profile-content\"\r\n          style={{\r\n            padding: '15px',\r\n            flex: 1,\r\n            overflowY: 'auto',\r\n          }}\r\n        >\r\n          {!currentUser ? (\r\n            <div\r\n              style={{\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                padding: '60px 20px',\r\n                textAlign: 'center',\r\n                color: '#6c757d',\r\n              }}\r\n            >\r\n              <div\r\n                style={{\r\n                  width: '80px',\r\n                  height: '80px',\r\n                  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n                  borderRadius: '50%',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'center',\r\n                  marginBottom: '20px',\r\n                  boxShadow: '0 4px 15px rgba(102, 126, 234, 0.3)',\r\n                }}\r\n              >\r\n                <i className=\"fas fa-user-circle\" style={{ fontSize: '40px', color: 'white' }}></i>\r\n              </div>\r\n              <h4 style={{ margin: '0 0 10px 0', fontSize: '18px', fontWeight: 600, color: '#333' }}>\r\n                Giri≈ü Yapƒ±n\r\n              </h4>\r\n              <p style={{ margin: '0 0 20px 0', fontSize: '14px', opacity: 0.8 }}>\r\n                Sipari≈ü ge√ßmi≈üiniz, jetonlarƒ±nƒ±z ve daha fazlasƒ± i√ßin giri≈ü yapƒ±n.\r\n              </p>\r\n              <button\r\n                style={{\r\n                  background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  padding: '12px 32px',\r\n                  borderRadius: '25px',\r\n                  fontSize: '14px',\r\n                  fontWeight: 600,\r\n                  cursor: 'pointer',\r\n                  boxShadow: '0 4px 15px rgba(102, 126, 234, 0.3)',\r\n                  transition: 'all 0.3s ease',\r\n                }}\r\n                onClick={() => setShowLoginModal(true)}\r\n              >\r\n                <i className=\"fas fa-sign-in-alt\" style={{ marginRight: '8px' }}></i>\r\n                Giri≈ü Yap\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              {/* Tab Content */}\r\n              {activeTab === 'orders' && (\r\n                <div style={{ padding: '15px' }}>\r\n                  {ordersLoading ? (\r\n                    <div style={{ textAlign: 'center', padding: '40px', color: '#6c757d' }}>\r\n                      <i className=\"fas fa-spinner fa-spin\" style={{ fontSize: '32px', marginBottom: '15px' }}></i>\r\n                      <p>Sipari≈üleriniz y√ºkleniyor...</p>\r\n                    </div>\r\n                  ) : orders.length === 0 ? (\r\n                    <div style={{ textAlign: 'center', padding: '40px', color: '#6c757d' }}>\r\n                      <div style={{ fontSize: '48px', marginBottom: '10px', opacity: 0.3 }}>üçΩÔ∏è</div>\r\n                      <p style={{ margin: 0, fontSize: '14px', fontWeight: 600 }}>Hen√ºz sipari≈üiniz bulunmuyor</p>\r\n                      <p style={{ margin: '5px 0 0 0', fontSize: '12px', opacity: 0.7 }}>Sipari≈ü vererek ba≈ülayƒ±n!</p>\r\n                    </div>\r\n                  ) : (\r\n                    <div>\r\n                      {orders.map((order: any) => {\r\n                        // Handle logo URL\r\n                        let logoUrl = '';\r\n                        if (order.venueLogo) {\r\n                          if (order.venueLogo.startsWith('http://') || order.venueLogo.startsWith('https://')) {\r\n                            logoUrl = order.venueLogo.replace('http://', 'https://');\r\n                          } else {\r\n                            const cleanPath = order.venueLogo.replace(/^\\/+/, '').replace('Uploads/', '');\r\n                            logoUrl = `https://api.canlimenu.com/Uploads/${cleanPath}`;\r\n                          }\r\n                        }\r\n\r\n                        return (\r\n                          <div\r\n                            key={order.id}\r\n                            style={{\r\n                              background: 'white',\r\n                              padding: '15px',\r\n                              borderRadius: '12px',\r\n                              marginBottom: '12px',\r\n                              boxShadow: '0 2px 8px rgba(0,0,0,0.08)',\r\n                              border: '1px solid #e9ecef',\r\n                            }}\r\n                          >\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '10px' }}>\r\n                              <div style={{ flex: 1 }}>\r\n                                <div style={{ fontWeight: 600, fontSize: '14px', marginBottom: '5px' }}>\r\n                                  {order.orderNumber || `#${order.id}`}\r\n                                </div>\r\n                                <div style={{ fontSize: '12px', color: '#6c757d' }}>\r\n                                  üìÖ {new Date(order.date).toLocaleDateString('tr-TR')} {new Date(order.date).toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' })}\r\n                                </div>\r\n                              </div>\r\n                              <div style={{\r\n                                background: order.status === 'Processed' ? '#d4edda' : '#fff3cd',\r\n                                color: order.status === 'Processed' ? '#155724' : '#856404',\r\n                                padding: '4px 10px',\r\n                                borderRadius: '12px',\r\n                                fontSize: '11px',\r\n                                fontWeight: 600\r\n                              }}>\r\n                                {order.status === 'Processed' ? '‚úì Tamamlandƒ±' : order.status}\r\n                              </div>\r\n                            </div>\r\n\r\n                            {order.venueName && (\r\n                              <div style={{ display: 'flex', alignItems: 'center', marginBottom: '8px', paddingBottom: '8px', borderBottom: '1px solid #f0f0f0' }}>\r\n                                {logoUrl && (\r\n                                  <img\r\n                                    src={logoUrl}\r\n                                    alt={order.venueName}\r\n                                    style={{\r\n                                      width: '30px',\r\n                                      height: '30px',\r\n                                      borderRadius: '6px',\r\n                                      objectFit: 'cover',\r\n                                      marginRight: '8px'\r\n                                    }}\r\n                                    onError={(e) => {\r\n                                      (e.target as HTMLImageElement).style.display = 'none';\r\n                                    }}\r\n                                  />\r\n                                )}\r\n                                <div style={{ fontSize: '13px', fontWeight: 500 }}>üè™ {order.venueName}</div>\r\n                              </div>\r\n                            )}\r\n\r\n                            <div style={{ fontSize: '12px', color: '#6c757d', marginBottom: '8px' }}>\r\n                              üçΩÔ∏è {order.tableName || 'Masa bilgisi yok'}\r\n                            </div>\r\n\r\n                            {order.items && order.items.length > 0 && (\r\n                              <div style={{ marginTop: '10px', paddingTop: '10px', borderTop: '1px solid #f0f0f0' }}>\r\n                                <div style={{ fontSize: '11px', color: '#6c757d', marginBottom: '5px' }}>√úr√ºnler ({order.itemCount || order.items.length}):</div>\r\n                                {order.items.slice(0, 3).map((item: any, idx: number) => (\r\n                                  <div key={idx} style={{ fontSize: '12px', marginBottom: '3px', display: 'flex', justifyContent: 'space-between' }}>\r\n                                    <span>{item.quantity || item.count}x {item.name || item.productName}</span>\r\n                                    <span style={{ fontWeight: 600 }}>{item.price?.toFixed(2)} ‚Ç∫</span>\r\n                                  </div>\r\n                                ))}\r\n                                {order.items.length > 3 && (\r\n                                  <div style={{ fontSize: '11px', color: '#6c757d', marginTop: '3px' }}>+{order.items.length - 3} √ºr√ºn daha...</div>\r\n                                )}\r\n                              </div>\r\n                            )}\r\n\r\n                            <div style={{ marginTop: '10px', paddingTop: '10px', borderTop: '1px solid #f0f0f0', display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                              <span style={{ fontSize: '12px', color: '#6c757d' }}>Toplam:</span>\r\n                              <span style={{ fontSize: '16px', fontWeight: 700, color: '#333' }}>{order.totalAmount?.toFixed(2)} ‚Ç∫</span>\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n              {activeTab === 'tokens' && (\r\n                <div style={{ padding: '15px' }}>\r\n                  {tokensLoading ? (\r\n                    <div style={{ textAlign: 'center', padding: '40px', color: '#6c757d' }}>\r\n                      <i className=\"fas fa-spinner fa-spin\" style={{ fontSize: '32px', marginBottom: '15px', color: '#ffc107' }}></i>\r\n                      <p>Jetonlar y√ºkleniyor...</p>\r\n                    </div>\r\n                  ) : !tokens || !tokens.restaurants || tokens.restaurants.length === 0 ? (\r\n                    <div style={{ textAlign: 'center', padding: '40px', color: '#6c757d' }}>\r\n                      <i className=\"fas fa-coins\" style={{ fontSize: '48px', marginBottom: '15px', opacity: 0.5, color: '#ffc107' }}></i>\r\n                      <p>Hen√ºz jetonunuz bulunmuyor</p>\r\n                    </div>\r\n                  ) : (\r\n                    <div>\r\n                      <div style={{ background: 'linear-gradient(135deg, #ffc107 0%, #ff9800 100%)', padding: '20px', borderRadius: '10px', marginBottom: '15px', textAlign: 'center', color: 'white' }}>\r\n                        <div style={{ fontSize: '14px', marginBottom: '5px' }}>Toplam Jeton</div>\r\n                        <div style={{ fontSize: '32px', fontWeight: 'bold' }}>ü™ô {tokens.summary?.totalTokens || 0}</div>\r\n                      </div>\r\n                      {tokens.restaurants.map((restaurant: any, idx: number) => {\r\n                        // Handle logo URL\r\n                        let logoUrl = '';\r\n                        if (restaurant.restaurantLogo) {\r\n                          if (restaurant.restaurantLogo.startsWith('http://') || restaurant.restaurantLogo.startsWith('https://')) {\r\n                            logoUrl = restaurant.restaurantLogo.replace('http://', 'https://');\r\n                          } else {\r\n                            const cleanPath = restaurant.restaurantLogo.replace(/^\\/+/, '').replace('Uploads/', '');\r\n                            logoUrl = `https://api.canlimenu.com/Uploads/${cleanPath}`;\r\n                          }\r\n                        }\r\n\r\n                        return (\r\n                          <div\r\n                            key={restaurant.customerId || `restaurant-${idx}`}\r\n                            style={{\r\n                              background: 'white',\r\n                              padding: '15px',\r\n                              borderRadius: '12px',\r\n                              marginBottom: '12px',\r\n                              boxShadow: '0 2px 8px rgba(0,0,0,0.08)',\r\n                              border: '1px solid #e9ecef',\r\n                            }}\r\n                          >\r\n                            <div style={{ display: 'flex', alignItems: 'center', marginBottom: '10px' }}>\r\n                              {logoUrl ? (\r\n                                <img\r\n                                  src={logoUrl}\r\n                                  alt={restaurant.restaurantName}\r\n                                  style={{\r\n                                    width: '40px',\r\n                                    height: '40px',\r\n                                    borderRadius: '8px',\r\n                                    objectFit: 'cover',\r\n                                    marginRight: '10px'\r\n                                  }}\r\n                                  onError={(e) => {\r\n                                    (e.target as HTMLImageElement).style.display = 'none';\r\n                                  }}\r\n                                />\r\n                              ) : null}\r\n                              <div style={{ fontWeight: 600, fontSize: '14px', flex: 1 }}>{restaurant.restaurantName}</div>\r\n                            </div>\r\n                            <div style={{\r\n                              background: 'linear-gradient(135deg, #fff9e6 0%, #fff4cc 100%)',\r\n                              borderRadius: '8px',\r\n                              padding: '10px',\r\n                              border: '2px solid #ffc107',\r\n                              textAlign: 'center'\r\n                            }}>\r\n                              <div style={{ fontSize: '20px', fontWeight: 700, color: '#856404' }}>\r\n                                <i className=\"fas fa-coins\" style={{ color: '#ffc107', fontSize: '16px', marginRight: '5px' }}></i>\r\n                                {restaurant.currentTokens}\r\n                              </div>\r\n                              <div style={{ marginTop: '4px', fontSize: '10px', color: '#856404', fontWeight: 500 }}>\r\n                                Jeton\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n              {activeTab === 'allergies' && (\r\n                <div style={{ padding: '15px' }}>\r\n                  <h4 style={{ margin: '0 0 15px 0', fontSize: '16px', color: '#333' }}>Alerji Bilgilerim</h4>\r\n\r\n                  {/* Warning Info Box */}\r\n                  <div style={{\r\n                    background: 'linear-gradient(135deg, rgba(220, 53, 69, 0.1), rgba(220, 53, 69, 0.15))',\r\n                    border: '1px solid rgba(220, 53, 69, 0.3)',\r\n                    borderRadius: '8px',\r\n                    padding: '12px',\r\n                    marginBottom: '15px',\r\n                    fontSize: '12px',\r\n                    color: '#721c24',\r\n                  }}>\r\n                    <div style={{ fontWeight: 600, marginBottom: '5px' }}>‚ö†Ô∏è √ñnemli Uyarƒ±</div>\r\n                    <div>Ciddi alerjiniz varsa l√ºtfen sipari≈ü verirken garsonunuza mutlaka bildirin. Bu sistem sadece hatƒ±rlatma ama√ßlƒ±dƒ±r.</div>\r\n                  </div>\r\n\r\n                  {/* Standard Allergens with Emojis */}\r\n                  {[\r\n                    { name: 'Gluten', emoji: 'üåæ' },\r\n                    { name: 'Laktoz', emoji: 'ü•õ' },\r\n                    { name: 'Yumurta', emoji: 'ü•ö' },\r\n                    { name: 'Balƒ±k', emoji: 'üêü' },\r\n                    { name: 'Fƒ±ndƒ±k', emoji: 'üå∞' },\r\n                    { name: 'Yer Fƒ±stƒ±ƒüƒ±', emoji: 'ü•ú' },\r\n                    { name: 'Soya', emoji: 'ü´ò' },\r\n                    { name: 'S√ºt', emoji: 'ü•õ' },\r\n                    { name: 'Susam', emoji: 'üå∞' },\r\n                    { name: 'Hardal', emoji: 'üå∂Ô∏è' },\r\n                    { name: 'Kereviz', emoji: 'ü•¨' },\r\n                  ].map((allergen) => (\r\n                    <label\r\n                      key={allergen.name}\r\n                      style={{\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        padding: '10px 12px',\r\n                        background: allergies.includes(allergen.name)\r\n                          ? 'linear-gradient(135deg, rgba(220, 53, 69, 0.15), rgba(220, 53, 69, 0.2))'\r\n                          : 'white',\r\n                        border: allergies.includes(allergen.name)\r\n                          ? '2px solid rgba(220, 53, 69, 0.4)'\r\n                          : '1px solid #e9ecef',\r\n                        borderRadius: '8px',\r\n                        marginBottom: '8px',\r\n                        cursor: 'pointer',\r\n                        transition: 'all 0.2s ease',\r\n                      }}\r\n                    >\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={allergies.includes(allergen.name)}\r\n                        onChange={(e) => {\r\n                          if (e.target.checked) {\r\n                            setAllergies([...allergies, allergen.name]);\r\n                          } else {\r\n                            setAllergies(allergies.filter(a => a !== allergen.name));\r\n                          }\r\n                        }}\r\n                        style={{ marginRight: '10px', cursor: 'pointer' }}\r\n                      />\r\n                      <span style={{ fontSize: '18px', marginRight: '8px' }}>{allergen.emoji}</span>\r\n                      <span style={{ fontSize: '14px', fontWeight: 500 }}>{allergen.name}</span>\r\n                    </label>\r\n                  ))}\r\n\r\n                  {/* Other Allergies Textarea */}\r\n                  <div style={{ marginTop: '15px' }}>\r\n                    <label style={{\r\n                      display: 'block',\r\n                      fontSize: '14px',\r\n                      fontWeight: 600,\r\n                      marginBottom: '8px',\r\n                      color: '#333'\r\n                    }}>\r\n                      üìù Diƒüer Alerjanlar ve √ñzel Durumlar\r\n                    </label>\r\n                    <textarea\r\n                      value={otherAllergies}\r\n                      onChange={(e) => setOtherAllergies(e.target.value)}\r\n                      placeholder=\"Diƒüer alerji veya √∂zel durumlarƒ±nƒ±zƒ± buraya yazƒ±n (virg√ºlle ayƒ±rƒ±n)\"\r\n                      style={{\r\n                        width: '100%',\r\n                        minHeight: '80px',\r\n                        padding: '10px',\r\n                        border: '1px solid #ddd',\r\n                        borderRadius: '8px',\r\n                        fontSize: '13px',\r\n                        fontFamily: 'inherit',\r\n                        resize: 'vertical',\r\n                      }}\r\n                    />\r\n                    <div style={{ fontSize: '11px', color: '#6c757d', marginTop: '5px' }}>\r\n                      √ñrnek: Mantar, Ananas, Deniz √ºr√ºnleri\r\n                    </div>\r\n                  </div>\r\n\r\n                  <button\r\n                    onClick={handleAllergiesUpdate}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '12px',\r\n                      background: 'linear-gradient(135deg, #28a745 0%, #20c997 100%)',\r\n                      color: 'white',\r\n                      border: 'none',\r\n                      borderRadius: '10px',\r\n                      fontSize: '14px',\r\n                      fontWeight: 600,\r\n                      cursor: 'pointer',\r\n                      marginTop: '15px',\r\n                    }}\r\n                  >\r\n                    <i className=\"fas fa-save\" style={{ marginRight: '8px' }}></i>\r\n                    Kaydet\r\n                  </button>\r\n                </div>\r\n              )}\r\n              {activeTab === 'settings' && (\r\n                <div style={{ padding: '15px' }}>\r\n                  <h4 style={{ margin: '0 0 15px 0', fontSize: '16px', color: '#333' }}>‚öôÔ∏è Hesap Ayarlarƒ±</h4>\r\n\r\n                  {/* Basic Info Display */}\r\n                  <div style={{\r\n                    background: 'white',\r\n                    padding: '15px',\r\n                    borderRadius: '10px',\r\n                    marginBottom: '15px',\r\n                    border: '1px solid #e9ecef'\r\n                  }}>\r\n                    <div style={{ fontSize: '13px', marginBottom: '8px' }}>\r\n                      <strong>ƒ∞sim Soyisim:</strong> {currentUser.firstName} {currentUser.lastName}\r\n                    </div>\r\n                    {currentUser.email && (\r\n                      <div style={{ fontSize: '13px', marginBottom: '8px' }}>\r\n                        <strong>Email:</strong> {currentUser.email}\r\n                      </div>\r\n                    )}\r\n                    {currentUser.phoneNumber && (\r\n                      <div style={{ fontSize: '13px', marginBottom: '8px' }}>\r\n                        <strong>Telefon:</strong> {currentUser.phoneNumber}\r\n                      </div>\r\n                    )}\r\n                    {currentUser.birthDate && (\r\n                      <div style={{ fontSize: '13px', marginBottom: '8px' }}>\r\n                        <strong>Doƒüum Tarihi:</strong> {new Date(currentUser.birthDate).toLocaleDateString('tr-TR')}\r\n                      </div>\r\n                    )}\r\n                    {currentUser.gender && (\r\n                      <div style={{ fontSize: '13px' }}>\r\n                        <strong>Cinsiyet:</strong> {currentUser.gender === 'Male' ? 'Erkek' : currentUser.gender === 'Female' ? 'Kadƒ±n' : 'Diƒüer'}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Conditional Email Input */}\r\n                  {!currentUser.email && (\r\n                    <div style={{ marginBottom: '15px' }}>\r\n                      <label style={{\r\n                        display: 'block',\r\n                        fontSize: '13px',\r\n                        fontWeight: 600,\r\n                        marginBottom: '6px',\r\n                        color: '#333'\r\n                      }}>\r\n                        üìß Email Adresi Ekle\r\n                      </label>\r\n                      <input\r\n                        type=\"email\"\r\n                        value={settingsData.email}\r\n                        onChange={(e) => setSettingsData({ ...settingsData, email: e.target.value })}\r\n                        placeholder=\"ornek@email.com\"\r\n                        style={{\r\n                          width: '100%',\r\n                          padding: '10px',\r\n                          border: '1px solid #ddd',\r\n                          borderRadius: '8px',\r\n                          fontSize: '13px',\r\n                        }}\r\n                      />\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Conditional Phone Input */}\r\n                  {!currentUser.phoneNumber && (\r\n                    <div style={{ marginBottom: '15px' }}>\r\n                      <label style={{\r\n                        display: 'block',\r\n                        fontSize: '13px',\r\n                        fontWeight: 600,\r\n                        marginBottom: '6px',\r\n                        color: '#333'\r\n                      }}>\r\n                        üì± Telefon Numarasƒ± Ekle\r\n                      </label>\r\n                      <input\r\n                        type=\"tel\"\r\n                        value={settingsData.phoneNumber}\r\n                        onChange={(e) => setSettingsData({ ...settingsData, phoneNumber: e.target.value })}\r\n                        placeholder=\"05XXXXXXXXX\"\r\n                        maxLength={11}\r\n                        style={{\r\n                          width: '100%',\r\n                          padding: '10px',\r\n                          border: '1px solid #ddd',\r\n                          borderRadius: '8px',\r\n                          fontSize: '13px',\r\n                        }}\r\n                      />\r\n                      <div style={{ fontSize: '11px', color: '#6c757d', marginTop: '4px' }}>\r\n                        11 hane, 05 ile ba≈ülamalƒ±\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Birthdate Input */}\r\n                  {!currentUser.birthDate && (\r\n                    <div style={{ marginBottom: '15px' }}>\r\n                      <label style={{\r\n                        display: 'block',\r\n                        fontSize: '13px',\r\n                        fontWeight: 600,\r\n                        marginBottom: '6px',\r\n                        color: '#333'\r\n                      }}>\r\n                        üéÇ Doƒüum Tarihi\r\n                      </label>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={settingsData.birthDate}\r\n                        onChange={(e) => setSettingsData({ ...settingsData, birthDate: e.target.value })}\r\n                        style={{\r\n                          width: '100%',\r\n                          padding: '10px',\r\n                          border: '1px solid #ddd',\r\n                          borderRadius: '8px',\r\n                          fontSize: '13px',\r\n                        }}\r\n                      />\r\n                      <div style={{ fontSize: '11px', color: '#dc3545', marginTop: '4px', fontWeight: 500 }}>\r\n                        üéâ Doƒüru tarihi yazƒ±n, doƒüum g√ºn√ºn√ºz unutulmayacak! Bir daha deƒüi≈ütirilemez.\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Gender Select */}\r\n                  {!currentUser.gender && (\r\n                    <div style={{ marginBottom: '15px' }}>\r\n                      <label style={{\r\n                        display: 'block',\r\n                        fontSize: '13px',\r\n                        fontWeight: 600,\r\n                        marginBottom: '6px',\r\n                        color: '#333'\r\n                      }}>\r\n                        üë§ Cinsiyet\r\n                      </label>\r\n                      <select\r\n                        value={settingsData.gender}\r\n                        onChange={(e) => setSettingsData({ ...settingsData, gender: e.target.value })}\r\n                        style={{\r\n                          width: '100%',\r\n                          padding: '10px',\r\n                          border: '1px solid #ddd',\r\n                          borderRadius: '8px',\r\n                          fontSize: '13px',\r\n                          background: 'white',\r\n                        }}\r\n                      >\r\n                        <option value=\"\">Se√ßiniz</option>\r\n                        <option value=\"Male\">Erkek</option>\r\n                        <option value=\"Female\">Kadƒ±n</option>\r\n                        <option value=\"Other\">Diƒüer</option>\r\n                      </select>\r\n                      <div style={{ fontSize: '11px', color: '#dc3545', marginTop: '4px', fontWeight: 500 }}>\r\n                        ‚ö†Ô∏è Bir defa se√ßebilirsiniz, sonra deƒüi≈ütirilemez.\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Update Button */}\r\n                  {(!currentUser.email || !currentUser.phoneNumber || !currentUser.birthDate || !currentUser.gender) && (\r\n                    <button\r\n                      onClick={handleProfileUpdate}\r\n                      disabled={isUpdatingProfile}\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '12px',\r\n                        background: isUpdatingProfile\r\n                          ? '#ccc'\r\n                          : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n                        color: 'white',\r\n                        border: 'none',\r\n                        borderRadius: '10px',\r\n                        fontSize: '14px',\r\n                        fontWeight: 600,\r\n                        cursor: isUpdatingProfile ? 'not-allowed' : 'pointer',\r\n                        marginBottom: '15px',\r\n                      }}\r\n                    >\r\n                      <i className=\"fas fa-save\" style={{ marginRight: '8px' }}></i>\r\n                      {isUpdatingProfile ? 'G√ºncelleniyor...' : 'Profili G√ºncelle'}\r\n                    </button>\r\n                  )}\r\n\r\n                  {/* Logout Button */}\r\n                  <button\r\n                    onClick={handleLogout}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '12px',\r\n                      background: '#dc3545',\r\n                      color: 'white',\r\n                      border: 'none',\r\n                      borderRadius: '10px',\r\n                      fontSize: '14px',\r\n                      fontWeight: 600,\r\n                      cursor: 'pointer',\r\n                      transition: 'all 0.3s ease',\r\n                    }}\r\n                  >\r\n                    <i className=\"fas fa-sign-out-alt\" style={{ marginRight: '8px' }}></i>\r\n                    √áƒ±kƒ±≈ü Yap\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Login Modal */}\r\n      {showLoginModal && (\r\n        <div\r\n          style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            width: '100%',\r\n            height: '100%',\r\n            background: 'rgba(0, 0, 0, 0.6)',\r\n            zIndex: 100000,\r\n            backdropFilter: 'blur(5px)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n          }}\r\n          onClick={() => setShowLoginModal(false)}\r\n        >\r\n          <div\r\n            style={{\r\n              background: 'white',\r\n              borderRadius: '20px',\r\n              padding: '30px',\r\n              width: '90%',\r\n              maxWidth: '450px',\r\n              maxHeight: '90vh',\r\n              overflowY: 'auto',\r\n              position: 'relative',\r\n            }}\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <button\r\n              onClick={() => setShowLoginModal(false)}\r\n              style={{\r\n                position: 'absolute',\r\n                top: '15px',\r\n                right: '15px',\r\n                background: 'none',\r\n                border: 'none',\r\n                fontSize: '24px',\r\n                color: '#999',\r\n                cursor: 'pointer',\r\n                padding: '5px',\r\n                borderRadius: '50%',\r\n                transition: 'all 0.3s ease',\r\n              }}\r\n            >\r\n              <i className=\"fas fa-times\"></i>\r\n            </button>\r\n\r\n            <div style={{ textAlign: 'center', marginBottom: '25px' }}>\r\n              <h2 style={{ margin: '0 0 8px 0', fontSize: '24px', fontWeight: 600, color: '#333' }}>\r\n                üîê Giri≈ü Yap\r\n              </h2>\r\n              <p style={{ margin: 0, fontSize: '14px', color: '#666' }}>\r\n                Telefon numaranla hemen giri≈ü yap!\r\n              </p>\r\n            </div>\r\n\r\n            {/* Google Sign-In Button */}\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleGoogleLogin}\r\n              disabled={isLoggingIn}\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px 20px',\r\n                background: isLoggingIn ? '#f5f5f5' : 'white',\r\n                border: '1px solid #ddd',\r\n                borderRadius: '10px',\r\n                fontSize: '14px',\r\n                fontWeight: 600,\r\n                cursor: isLoggingIn ? 'not-allowed' : 'pointer',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                gap: '10px',\r\n                transition: 'all 0.3s ease',\r\n                marginBottom: '20px',\r\n                opacity: isLoggingIn ? 0.6 : 1,\r\n              }}\r\n            >\r\n              <img src=\"https://www.google.com/favicon.ico\" alt=\"Google\" style={{ width: '20px', height: '20px' }} />\r\n              {isLoggingIn ? 'Giri≈ü Yapƒ±lƒ±yor...' : 'Google ile Giri≈ü Yap'}\r\n            </button>\r\n\r\n            <div style={{ position: 'relative', textAlign: 'center', margin: '20px 0' }}>\r\n              <div style={{ position: 'absolute', top: '50%', left: 0, right: 0, height: '1px', background: '#e0e0e0' }}></div>\r\n              <span style={{ position: 'relative', background: 'white', padding: '0 15px', color: '#999', fontSize: '12px' }}>\r\n                veya\r\n              </span>\r\n            </div>\r\n\r\n            <form onSubmit={handleLogin}>\r\n              <div style={{ marginBottom: '15px' }}>\r\n                <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', color: '#333', fontWeight: 500 }}>\r\n                  Telefon Numarasƒ± veya E-posta\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={phoneOrEmail}\r\n                  onChange={(e) => setPhoneOrEmail(e.target.value)}\r\n                  placeholder=\"05XX XXX XX XX veya email@ornek.com\"\r\n                  required\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '12px',\r\n                    border: '1px solid #ddd',\r\n                    borderRadius: '10px',\r\n                    fontSize: '14px',\r\n                  }}\r\n                />\r\n              </div>\r\n\r\n              <div style={{ marginBottom: '20px' }}>\r\n                <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', color: '#333', fontWeight: 500 }}>\r\n                  ≈ûifre\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  placeholder=\"≈ûifrenizi girin\"\r\n                  required\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '12px',\r\n                    border: '1px solid #ddd',\r\n                    borderRadius: '10px',\r\n                    fontSize: '14px',\r\n                  }}\r\n                />\r\n              </div>\r\n\r\n              <button\r\n                type=\"submit\"\r\n                disabled={isLoggingIn}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '14px',\r\n                  background: isLoggingIn\r\n                    ? '#ccc'\r\n                    : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '10px',\r\n                  fontSize: '16px',\r\n                  fontWeight: 600,\r\n                  cursor: isLoggingIn ? 'not-allowed' : 'pointer',\r\n                  boxShadow: '0 4px 15px rgba(102, 126, 234, 0.3)',\r\n                  transition: 'all 0.3s ease',\r\n                }}\r\n              >\r\n                <i className=\"fas fa-sign-in-alt\" style={{ marginRight: '8px' }}></i>\r\n                {isLoggingIn ? 'Giri≈ü Yapƒ±lƒ±yor...' : 'Giri≈ü Yap'}\r\n              </button>\r\n            </form>\r\n\r\n            <div style={{ textAlign: 'center', marginTop: '20px' }}>\r\n              <a\r\n                href=\"#\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  setShowLoginModal(false);\r\n                  setShowRegisterModal(true);\r\n                }}\r\n                style={{ color: '#667eea', fontSize: '14px', textDecoration: 'none' }}\r\n              >\r\n                Hesabƒ±n yok mu? Hemen kayƒ±t ol\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Register Modal */}\r\n      {showRegisterModal && (\r\n        <div\r\n          style={{\r\n            position: 'fixed',\r\n            top: 0,\r\n            left: 0,\r\n            width: '100%',\r\n            height: '100%',\r\n            background: 'rgba(0, 0, 0, 0.6)',\r\n            zIndex: 100000,\r\n            backdropFilter: 'blur(5px)',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n          }}\r\n          onClick={() => setShowRegisterModal(false)}\r\n        >\r\n          <div\r\n            style={{\r\n              background: 'white',\r\n              borderRadius: '20px',\r\n              padding: '30px',\r\n              width: '90%',\r\n              maxWidth: '450px',\r\n              maxHeight: '90vh',\r\n              overflowY: 'auto',\r\n              position: 'relative',\r\n            }}\r\n            onClick={(e) => e.stopPropagation()}\r\n          >\r\n            <button\r\n              onClick={() => setShowRegisterModal(false)}\r\n              style={{\r\n                position: 'absolute',\r\n                top: '15px',\r\n                right: '15px',\r\n                background: 'none',\r\n                border: 'none',\r\n                fontSize: '24px',\r\n                color: '#999',\r\n                cursor: 'pointer',\r\n                padding: '5px',\r\n                borderRadius: '50%',\r\n                transition: 'all 0.3s ease',\r\n              }}\r\n            >\r\n              <i className=\"fas fa-times\"></i>\r\n            </button>\r\n\r\n            <div style={{ textAlign: 'center', marginBottom: '25px' }}>\r\n              <h2 style={{ margin: '0 0 8px 0', fontSize: '24px', fontWeight: 600, color: '#333' }}>\r\n                üéâ Kayƒ±t Ol\r\n              </h2>\r\n              <p style={{ margin: 0, fontSize: '14px', color: '#666' }}>\r\n                Hemen √ºye ol, avantajlardan faydalan!\r\n              </p>\r\n            </div>\r\n\r\n            <form onSubmit={handleRegister}>\r\n              <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '10px', marginBottom: '15px' }}>\r\n                <div>\r\n                  <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', color: '#333', fontWeight: 500 }}>\r\n                    ƒ∞sim\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={registerData.firstName}\r\n                    onChange={(e) => setRegisterData({ ...registerData, firstName: e.target.value })}\r\n                    placeholder=\"ƒ∞sminiz\"\r\n                    required\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '12px',\r\n                      border: '1px solid #ddd',\r\n                      borderRadius: '10px',\r\n                      fontSize: '14px',\r\n                    }}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', color: '#333', fontWeight: 500 }}>\r\n                    Soyisim\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={registerData.lastName}\r\n                    onChange={(e) => setRegisterData({ ...registerData, lastName: e.target.value })}\r\n                    placeholder=\"Soyisminiz\"\r\n                    required\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '12px',\r\n                      border: '1px solid #ddd',\r\n                      borderRadius: '10px',\r\n                      fontSize: '14px',\r\n                    }}\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div style={{ marginBottom: '15px' }}>\r\n                <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', color: '#333', fontWeight: 500 }}>\r\n                  Kullanƒ±cƒ± Adƒ±\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={registerData.nickName}\r\n                  onChange={(e) => setRegisterData({ ...registerData, nickName: e.target.value })}\r\n                  placeholder=\"Kullanƒ±cƒ± adƒ±nƒ±z\"\r\n                  required\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '12px',\r\n                    border: '1px solid #ddd',\r\n                    borderRadius: '10px',\r\n                    fontSize: '14px',\r\n                  }}\r\n                />\r\n              </div>\r\n\r\n              <div style={{ marginBottom: '15px' }}>\r\n                <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', color: '#333', fontWeight: 500 }}>\r\n                  E-posta\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  value={registerData.email}\r\n                  onChange={(e) => setRegisterData({ ...registerData, email: e.target.value })}\r\n                  placeholder=\"email@ornek.com\"\r\n                  required\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '12px',\r\n                    border: '1px solid #ddd',\r\n                    borderRadius: '10px',\r\n                    fontSize: '14px',\r\n                  }}\r\n                />\r\n              </div>\r\n\r\n              <div style={{ marginBottom: '15px' }}>\r\n                <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', color: '#333', fontWeight: 500 }}>\r\n                  Telefon Numarasƒ±\r\n                </label>\r\n                <input\r\n                  type=\"tel\"\r\n                  value={registerData.phoneNumber}\r\n                  onChange={(e) => setRegisterData({ ...registerData, phoneNumber: e.target.value })}\r\n                  placeholder=\"05XX XXX XX XX\"\r\n                  required\r\n                  maxLength={11}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '12px',\r\n                    border: '1px solid #ddd',\r\n                    borderRadius: '10px',\r\n                    fontSize: '14px',\r\n                  }}\r\n                />\r\n              </div>\r\n\r\n              <div style={{ marginBottom: '20px' }}>\r\n                <label style={{ display: 'block', marginBottom: '5px', fontSize: '14px', color: '#333', fontWeight: 500 }}>\r\n                  ≈ûifre\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  value={registerData.password}\r\n                  onChange={(e) => setRegisterData({ ...registerData, password: e.target.value })}\r\n                  placeholder=\"En az 6 karakter\"\r\n                  required\r\n                  minLength={6}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '12px',\r\n                    border: '1px solid #ddd',\r\n                    borderRadius: '10px',\r\n                    fontSize: '14px',\r\n                  }}\r\n                />\r\n              </div>\r\n\r\n              <button\r\n                type=\"submit\"\r\n                disabled={isLoggingIn}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '14px',\r\n                  background: isLoggingIn\r\n                    ? '#ccc'\r\n                    : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '10px',\r\n                  fontSize: '16px',\r\n                  fontWeight: 600,\r\n                  cursor: isLoggingIn ? 'not-allowed' : 'pointer',\r\n                  boxShadow: '0 4px 15px rgba(102, 126, 234, 0.3)',\r\n                  transition: 'all 0.3s ease',\r\n                }}\r\n              >\r\n                <i className=\"fas fa-user-plus\" style={{ marginRight: '8px' }}></i>\r\n                {isLoggingIn ? 'Kayƒ±t Yapƒ±lƒ±yor...' : 'Kayƒ±t Ol'}\r\n              </button>\r\n            </form>\r\n\r\n            <div style={{ textAlign: 'center', marginTop: '20px' }}>\r\n              <a\r\n                href=\"#\"\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  setShowRegisterModal(false);\r\n                  setShowLoginModal(true);\r\n                }}\r\n                style={{ color: '#667eea', fontSize: '14px', textDecoration: 'none' }}\r\n              >\r\n                Zaten hesabƒ±n var mƒ±? Giri≈ü yap\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useCallback, useEffect } from 'react';\r\n\r\nexport interface ChatMessage {\r\n  message: string;\r\n  sender: 'user' | 'ai';\r\n  timestamp: string;\r\n  page?: string;\r\n}\r\n\r\ninterface UseChatAIOptions {\r\n  customerCode: string;\r\n  menuData?: any;\r\n}\r\n\r\ninterface MenuData {\r\n  customerCode: string;\r\n  customerTitle: string;\r\n  categories: CategoryData[];\r\n}\r\n\r\ninterface CategoryData {\r\n  title: string;\r\n  sambaId: string;\r\n  products: ProductData[];\r\n}\r\n\r\ninterface ProductData {\r\n  title: string;\r\n  price: number;\r\n  detail?: string;\r\n}\r\n\r\nconst BACKEND_API_URL = process.env.NEXT_PUBLIC_API_URL || 'https://api.canlimenu.com';\r\n\r\nexport function useChatAI({ customerCode, menuData: externalMenuData }: UseChatAIOptions) {\r\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [remainingMessages, setRemainingMessages] = useState(30);\r\n  const [sessionId, setSessionId] = useState('');\r\n  const [menuData, setMenuData] = useState<MenuData | null>(null);\r\n  const [isLoadingMenu, setIsLoadingMenu] = useState(false);\r\n\r\n  // Initialize session ID\r\n  useEffect(() => {\r\n    let sid = localStorage.getItem('chatSessionId');\r\n    if (!sid) {\r\n      sid = `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n      localStorage.setItem('chatSessionId', sid);\r\n    }\r\n    setSessionId(sid);\r\n  }, []);\r\n\r\n  // Load external menu data directly (no API calls in hook)\r\n  useEffect(() => {\r\n    if (externalMenuData && externalMenuData.categories) {\r\n      console.log('‚úÖ Using external menu data from page:', {\r\n        categoriesCount: externalMenuData.categories.length\r\n      });\r\n      setMenuData(externalMenuData);\r\n      setIsLoadingMenu(false);\r\n    } else {\r\n      console.log('‚ö†Ô∏è No external menu data yet');\r\n      setIsLoadingMenu(true);\r\n    }\r\n  }, [externalMenuData]);\r\n\r\n  // Load chat history from localStorage\r\n  useEffect(() => {\r\n    if (!customerCode) return;\r\n\r\n    const storageKey = `global_chat_history_${customerCode}`;\r\n    const saved = localStorage.getItem(storageKey);\r\n\r\n    if (saved) {\r\n      try {\r\n        const history = JSON.parse(saved);\r\n        setMessages(history);\r\n      } catch (error) {\r\n        console.error('Failed to parse chat history:', error);\r\n      }\r\n    }\r\n  }, [customerCode]);\r\n\r\n  // Save chat history to localStorage\r\n  const saveChatHistory = useCallback(\r\n    (newMessages: ChatMessage[]) => {\r\n      if (!customerCode) return;\r\n      const storageKey = `global_chat_history_${customerCode}`;\r\n      localStorage.setItem(storageKey, JSON.stringify(newMessages));\r\n    },\r\n    [customerCode]\r\n  );\r\n\r\n  // Add message to history\r\n  const addMessage = useCallback(\r\n    (message: string, sender: 'user' | 'ai') => {\r\n      const newMessage: ChatMessage = {\r\n        message,\r\n        sender,\r\n        timestamp: new Date().toISOString(),\r\n        page: window.location.pathname,\r\n      };\r\n\r\n      setMessages((prev) => {\r\n        const updated = [...prev, newMessage];\r\n        saveChatHistory(updated);\r\n        return updated;\r\n      });\r\n\r\n      return newMessage;\r\n    },\r\n    [saveChatHistory]\r\n  );\r\n\r\n  // Send message to AI\r\n  const sendMessage = useCallback(\r\n    async (message: string) => {\r\n      if (!message.trim() || !customerCode) return null;\r\n\r\n      // Check remaining messages\r\n      if (remainingMessages <= 0) {\r\n        const errorMsg = 'G√ºnl√ºk 30 mesaj limitinize ula≈ütƒ±nƒ±z. Yarƒ±n tekrar deneyebilirsiniz. üòä';\r\n        addMessage(errorMsg, 'ai');\r\n        return errorMsg;\r\n      }\r\n\r\n      // Add user message\r\n      addMessage(message, 'user');\r\n      setIsLoading(true);\r\n\r\n      try {\r\n        // Send menuData as JSON string (like old code)\r\n        const menuDataStr = menuData ? JSON.stringify(menuData) : '';\r\n\r\n        console.log('üì§ Sending message to AI:', {\r\n          message: message.substring(0, 50),\r\n          customerCode,\r\n          hasMenuData: !!menuData,\r\n          menuDataLength: menuDataStr.length,\r\n          categoriesCount: menuData?.categories?.length || 0\r\n        });\r\n\r\n        // Send directly to backend - NO WAITING!\r\n        const response = await fetch('/api/ai/chat', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({\r\n            message,\r\n            customerCode,\r\n            sessionId,\r\n            pageUrl: window.location.href,\r\n            menuData: menuDataStr, // JSON string like old code\r\n          }),\r\n        });\r\n\r\n        const data = await response.json();\r\n        console.log('üì• Received AI response:', {\r\n          success: data.success,\r\n          hasResponse: !!data.response,\r\n          source: data.source\r\n        });\r\n\r\n        if (data.success) {\r\n          // Update remaining messages\r\n          if (typeof data.remainingMessages !== 'undefined') {\r\n            setRemainingMessages(data.remainingMessages);\r\n          }\r\n\r\n          // Add AI response\r\n          addMessage(data.response, 'ai');\r\n          return data.response;\r\n        } else {\r\n          const errorMsg = data.error || data.response || 'Bir hata olu≈ütu. L√ºtfen tekrar deneyin.';\r\n          addMessage(errorMsg, 'ai');\r\n          return errorMsg;\r\n        }\r\n      } catch (error) {\r\n        console.error('Send message error:', error);\r\n        const errorMsg = 'Baƒülantƒ± hatasƒ±. L√ºtfen internet baƒülantƒ±nƒ±zƒ± kontrol edin.';\r\n        addMessage(errorMsg, 'ai');\r\n        return errorMsg;\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    },\r\n    [customerCode, sessionId, menuData, remainingMessages, addMessage, isLoadingMenu]\r\n  );\r\n\r\n  // Clear chat history\r\n  const clearHistory = useCallback(() => {\r\n    setMessages([]);\r\n    if (customerCode) {\r\n      const storageKey = `global_chat_history_${customerCode}`;\r\n      localStorage.removeItem(storageKey);\r\n    }\r\n  }, [customerCode]);\r\n\r\n  return {\r\n    messages,\r\n    isLoading,\r\n    isLoadingMenu,\r\n    remainingMessages,\r\n    sendMessage,\r\n    clearHistory,\r\n  };\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { useChatAI } from '@/hooks/useChatAI';\r\n\r\ninterface AIChatSidebarProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  customerCode: string;\r\n  menuData?: any;\r\n}\r\n\r\nexport default function AIChatSidebar({ isOpen, onClose, customerCode, menuData }: AIChatSidebarProps) {\r\n  const { messages, isLoading, isLoadingMenu, sendMessage, clearHistory } = useChatAI({\r\n    customerCode,\r\n    menuData,\r\n  });\r\n\r\n  const [inputMessage, setInputMessage] = useState('');\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // Auto scroll to bottom when new messages arrive\r\n  useEffect(() => {\r\n    if (messagesEndRef.current) {\r\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  }, [messages]);\r\n\r\n  // Focus input when sidebar opens\r\n  useEffect(() => {\r\n    if (isOpen && inputRef.current) {\r\n      setTimeout(() => {\r\n        inputRef.current?.focus();\r\n      }, 300);\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const handleSend = async () => {\r\n    if (!inputMessage.trim() || isLoading) return;\r\n\r\n    const msg = inputMessage.trim();\r\n    setInputMessage('');\r\n\r\n    await sendMessage(msg);\r\n  };\r\n\r\n  const handleKeyPress = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSend();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Overlay */}\r\n      <div\r\n        className=\"ai-chat-overlay\"\r\n        onClick={onClose}\r\n        style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          width: '100%',\r\n          height: '100%',\r\n          background: 'rgba(0, 0, 0, 0.5)',\r\n          opacity: isOpen ? 1 : 0,\r\n          visibility: isOpen ? 'visible' : 'hidden',\r\n          transition: 'all 0.3s ease',\r\n          zIndex: 99998,\r\n        }}\r\n      />\r\n\r\n      {/* Sidebar */}\r\n      <div\r\n        className={`ai-chat-sidebar ${isOpen ? 'sidebar-open' : ''}`}\r\n        style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: isOpen ? 0 : '-100%',\r\n          width: '100%',\r\n          height: '100vh',\r\n          background: 'linear-gradient(180deg, #667eea 0%, #764ba2 100%)',\r\n          transition: 'left 0.3s ease',\r\n          zIndex: 99999,\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          boxShadow: '4px 0 20px rgba(0, 0, 0, 0.3)',\r\n        }}\r\n      >\r\n        {/* Header */}\r\n        <div\r\n          className=\"chat-header\"\r\n          style={{\r\n            background: 'rgba(0, 0, 0, 0.2)',\r\n            color: 'white',\r\n            padding: '15px 20px',\r\n            flexShrink: 0,\r\n            borderBottom: '1px solid rgba(255, 255, 255, 0.1)',\r\n          }}\r\n        >\r\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n            <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n              <i className=\"fas fa-robot\" style={{ fontSize: '20px' }}></i>\r\n              <h3 style={{ margin: 0, fontSize: '18px', fontWeight: 600 }}>AI Men√º Asistanƒ±</h3>\r\n            </div>\r\n            <button\r\n              onClick={onClose}\r\n              style={{\r\n                background: 'rgba(255, 255, 255, 0.2)',\r\n                border: '2px solid rgba(255, 255, 255, 0.3)',\r\n                color: 'white',\r\n                width: '32px',\r\n                height: '32px',\r\n                borderRadius: '50%',\r\n                cursor: 'pointer',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                fontSize: '18px',\r\n                fontWeight: 'bold',\r\n              }}\r\n            >\r\n              √ó\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Messages */}\r\n        <div\r\n          style={{\r\n            flex: 1,\r\n            overflowY: 'auto',\r\n            padding: '15px',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            gap: '12px',\r\n          }}\r\n        >\r\n          {messages.length === 0 && (\r\n            <div\r\n              style={{\r\n                background: 'rgba(255, 255, 255, 0.95)',\r\n                borderRadius: '12px 12px 12px 2px',\r\n                padding: '12px 15px',\r\n                color: '#333',\r\n                fontSize: '14px',\r\n                lineHeight: '1.5',\r\n                boxShadow: '0 2px 8px rgba(0, 0, 0, 0.1)',\r\n              }}\r\n            >\r\n              Merhaba! üëã Men√º ile ilgili her ≈üeyi sorabilirsiniz. Size nasƒ±l yardƒ±mcƒ± olabilirim? üòä\r\n            </div>\r\n          )}\r\n\r\n          {isLoadingMenu && messages.length === 0 && (\r\n            <div style={{ display: 'flex', justifyContent: 'flex-start' }}>\r\n              <div\r\n                style={{\r\n                  background: 'rgba(255, 255, 255, 0.95)',\r\n                  borderRadius: '12px 12px 12px 2px',\r\n                  padding: '12px 15px',\r\n                  color: '#666',\r\n                  fontSize: '13px',\r\n                  boxShadow: '0 2px 8px rgba(0, 0, 0, 0.1)',\r\n                }}\r\n              >\r\n                <i className=\"fas fa-spinner fa-spin\"></i> Men√º bilgileri y√ºkleniyor...\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {messages.map((msg, idx) => (\r\n            <div\r\n              key={idx}\r\n              style={{\r\n                display: 'flex',\r\n                justifyContent: msg.sender === 'user' ? 'flex-end' : 'flex-start',\r\n              }}\r\n            >\r\n              <div\r\n                style={{\r\n                  background: msg.sender === 'user' ? '#fff' : 'rgba(255, 255, 255, 0.95)',\r\n                  borderRadius: msg.sender === 'user' ? '12px 12px 2px 12px' : '12px 12px 12px 2px',\r\n                  padding: '12px 15px',\r\n                  maxWidth: '85%',\r\n                  color: '#333',\r\n                  fontSize: '14px',\r\n                  lineHeight: '1.5',\r\n                  boxShadow: '0 2px 8px rgba(0, 0, 0, 0.1)',\r\n                  wordWrap: 'break-word',\r\n                  whiteSpace: 'pre-wrap',\r\n                }}\r\n              >\r\n                {msg.message}\r\n              </div>\r\n            </div>\r\n          ))}\r\n\r\n          {isLoading && (\r\n            <div style={{ display: 'flex', justifyContent: 'flex-start' }}>\r\n              <div\r\n                style={{\r\n                  background: 'rgba(255, 255, 255, 0.95)',\r\n                  borderRadius: '12px 12px 12px 2px',\r\n                  padding: '12px 15px',\r\n                  color: '#666',\r\n                  fontSize: '14px',\r\n                  boxShadow: '0 2px 8px rgba(0, 0, 0, 0.1)',\r\n                }}\r\n              >\r\n                <i className=\"fas fa-spinner fa-spin\"></i> D√º≈ü√ºn√ºyorum...\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n\r\n        {/* Input */}\r\n        <div\r\n          style={{\r\n            padding: '15px',\r\n            paddingBottom: '90px',\r\n            background: 'rgba(0, 0, 0, 0.2)',\r\n            borderTop: '1px solid rgba(255, 255, 255, 0.1)',\r\n            flexShrink: 0,\r\n          }}\r\n        >\r\n          <div style={{ display: 'flex', gap: '8px' }}>\r\n            <input\r\n              ref={inputRef}\r\n              type=\"text\"\r\n              value={inputMessage}\r\n              onChange={(e) => setInputMessage(e.target.value)}\r\n              onKeyPress={handleKeyPress}\r\n              placeholder={isLoadingMenu ? \"Men√º y√ºkleniyor...\" : \"Mesajƒ±nƒ±zƒ± yazƒ±n...\"}\r\n              disabled={isLoading}\r\n              style={{\r\n                flex: 1,\r\n                padding: '12px 15px',\r\n                border: 'none',\r\n                borderRadius: '25px',\r\n                fontSize: '14px',\r\n                background: 'white',\r\n                outline: 'none',\r\n              }}\r\n            />\r\n            <button\r\n              onClick={handleSend}\r\n              disabled={isLoading || !inputMessage.trim()}\r\n              style={{\r\n                width: '48px',\r\n                height: '48px',\r\n                background: isLoading || !inputMessage.trim()\r\n                  ? '#ccc'\r\n                  : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '50%',\r\n                cursor: isLoading || !inputMessage.trim() ? 'not-allowed' : 'pointer',\r\n                fontSize: '18px',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                boxShadow: '0 4px 12px rgba(0, 0, 0, 0.2)',\r\n              }}\r\n            >\r\n              <i className=\"fas fa-paper-plane\"></i>\r\n            </button>\r\n          </div>\r\n\r\n          {messages.length > 0 && (\r\n            <button\r\n              onClick={clearHistory}\r\n              style={{\r\n                width: '100%',\r\n                marginTop: '8px',\r\n                padding: '8px',\r\n                background: 'rgba(255, 255, 255, 0.1)',\r\n                color: 'white',\r\n                border: '1px solid rgba(255, 255, 255, 0.2)',\r\n                borderRadius: '8px',\r\n                fontSize: '12px',\r\n                cursor: 'pointer',\r\n              }}\r\n            >\r\n              <i className=\"fas fa-trash\"></i> Sohbeti Temizle\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState, FormEvent } from 'react';\r\n\r\ninterface SuggestionModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  venueCode?: string;\r\n}\r\n\r\nexport default function SuggestionModal({ isOpen, onClose, venueCode }: SuggestionModalProps) {\r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    newVenueRequest: '',\r\n    type: '',\r\n    content: '',\r\n  });\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [submitStatus, setSubmitStatus] = useState<'idle' | 'success' | 'error'>('idle');\r\n\r\n  const handleSubmit = async (e: FormEvent) => {\r\n    e.preventDefault();\r\n    setIsSubmitting(true);\r\n\r\n    try {\r\n      const response = await fetch('/api/suggestion/create', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          customerName: formData.name || 'Anonim',\r\n          venueCode: venueCode || 'bilinmiyor',\r\n          newVenueRequest: formData.newVenueRequest,\r\n          suggestionType: formData.type,\r\n          suggestionContent: formData.content,\r\n          userAgent: navigator.userAgent,\r\n        }),\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (result.success) {\r\n        setSubmitStatus('success');\r\n        setTimeout(() => {\r\n          onClose();\r\n          setFormData({ name: '', newVenueRequest: '', type: '', content: '' });\r\n          setSubmitStatus('idle');\r\n        }, 2000);\r\n      } else {\r\n        setSubmitStatus('error');\r\n        setTimeout(() => setSubmitStatus('idle'), 2000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Suggestion error:', error);\r\n      setSubmitStatus('error');\r\n      setTimeout(() => setSubmitStatus('idle'), 2000);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"modal-overlay\"\r\n      onClick={onClose}\r\n      style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        background: 'rgba(0, 0, 0, 0.7)',\r\n        backdropFilter: 'blur(5px)',\r\n        zIndex: 100000,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        padding: '20px',\r\n      }}\r\n    >\r\n      <div\r\n        className=\"suggestion-modal-content\"\r\n        onClick={(e) => e.stopPropagation()}\r\n        style={{\r\n          background: 'linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)',\r\n          borderRadius: '20px',\r\n          padding: '30px',\r\n          width: '100%',\r\n          maxWidth: '500px',\r\n          maxHeight: '90vh',\r\n          overflowY: 'auto',\r\n          boxShadow: '0 20px 60px rgba(0, 0, 0, 0.5)',\r\n          border: '1px solid rgba(255, 255, 255, 0.1)',\r\n        }}\r\n      >\r\n        <div style={{ marginBottom: '20px', textAlign: 'center' }}>\r\n          <h2 style={{ margin: '0 0 10px 0', fontSize: '24px', color: '#fff', fontWeight: 700 }}>\r\n            üí° √ñneri & Geri Bildirim\r\n          </h2>\r\n          <p style={{ margin: 0, fontSize: '14px', color: '#aaa' }}>\r\n            Fikirleriniz bizim i√ßin deƒüerli!\r\n          </p>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit}>\r\n          {/* Name */}\r\n          <div style={{ marginBottom: '20px' }}>\r\n            <label style={{ display: 'block', marginBottom: '8px', fontSize: '14px', color: '#ccc', fontWeight: 600 }}>\r\n              ƒ∞sim (Opsiyonel)\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.name}\r\n              onChange={(e) => setFormData({ ...formData, name: e.target.value })}\r\n              placeholder=\"Adƒ±nƒ±z\"\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px',\r\n                background: 'rgba(255, 255, 255, 0.05)',\r\n                border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                borderRadius: '10px',\r\n                color: '#fff',\r\n                fontSize: '14px',\r\n              }}\r\n            />\r\n          </div>\r\n\r\n          {/* New Venue Request */}\r\n          <div style={{ marginBottom: '20px' }}>\r\n            <label style={{ display: 'block', marginBottom: '8px', fontSize: '14px', color: '#ccc', fontWeight: 600 }}>\r\n              üè™ G√∂rmek ƒ∞stediƒüiniz Mekan\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.newVenueRequest}\r\n              onChange={(e) => setFormData({ ...formData, newVenueRequest: e.target.value })}\r\n              placeholder=\"√ñrn: X Restoranƒ±, Y Kafe...\"\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px',\r\n                background: 'rgba(255, 255, 255, 0.05)',\r\n                border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                borderRadius: '10px',\r\n                color: '#fff',\r\n                fontSize: '14px',\r\n              }}\r\n            />\r\n          </div>\r\n\r\n          {/* Suggestion Type */}\r\n          <div style={{ marginBottom: '20px' }}>\r\n            <label style={{ display: 'block', marginBottom: '8px', fontSize: '14px', color: '#ccc', fontWeight: 600 }}>\r\n              Kategori\r\n            </label>\r\n            <select\r\n              value={formData.type}\r\n              onChange={(e) => setFormData({ ...formData, type: e.target.value })}\r\n              required\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px',\r\n                background: 'rgba(255, 255, 255, 0.05)',\r\n                border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                borderRadius: '10px',\r\n                color: '#fff',\r\n                fontSize: '14px',\r\n              }}\r\n            >\r\n              <option value=\"\">Se√ßiniz</option>\r\n              <option value=\"suggestion\">üí° √ñneri</option>\r\n              <option value=\"complaint\">üòû ≈ûikayet</option>\r\n              <option value=\"compliment\">üòä Te≈üekk√ºr</option>\r\n              <option value=\"feature\">‚ú® √ñzellik ƒ∞steƒüi</option>\r\n              <option value=\"other\">üîñ Diƒüer</option>\r\n            </select>\r\n          </div>\r\n\r\n          {/* Content */}\r\n          <div style={{ marginBottom: '25px' }}>\r\n            <label style={{ display: 'block', marginBottom: '8px', fontSize: '14px', color: '#ccc', fontWeight: 600 }}>\r\n              Mesajƒ±nƒ±z\r\n            </label>\r\n            <textarea\r\n              value={formData.content}\r\n              onChange={(e) => setFormData({ ...formData, content: e.target.value })}\r\n              required\r\n              placeholder=\"D√º≈ü√ºncelerinizi payla≈üƒ±n...\"\r\n              rows={5}\r\n              style={{\r\n                width: '100%',\r\n                padding: '12px',\r\n                background: 'rgba(255, 255, 255, 0.05)',\r\n                border: '1px solid rgba(255, 255, 255, 0.1)',\r\n                borderRadius: '10px',\r\n                color: '#fff',\r\n                fontSize: '14px',\r\n                fontFamily: 'inherit',\r\n                resize: 'vertical',\r\n              }}\r\n            />\r\n          </div>\r\n\r\n          {/* Submit Button */}\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isSubmitting || submitStatus !== 'idle'}\r\n            style={{\r\n              width: '100%',\r\n              padding: '14px',\r\n              background:\r\n                submitStatus === 'success'\r\n                  ? 'linear-gradient(135deg, #27ae60, #2ecc71)'\r\n                  : submitStatus === 'error'\r\n                  ? 'linear-gradient(135deg, #e74c3c, #c0392b)'\r\n                  : isSubmitting\r\n                  ? '#666'\r\n                  : 'linear-gradient(135deg, #667eea, #764ba2)',\r\n              color: '#fff',\r\n              border: 'none',\r\n              borderRadius: '12px',\r\n              fontSize: '16px',\r\n              fontWeight: 700,\r\n              cursor: isSubmitting || submitStatus !== 'idle' ? 'not-allowed' : 'pointer',\r\n              transition: 'all 0.3s ease',\r\n              marginBottom: '10px',\r\n            }}\r\n          >\r\n            {submitStatus === 'success' ? (\r\n              <>\r\n                <i className=\"fas fa-heart\" style={{ marginRight: '8px' }}></i>\r\n                Te≈üekk√ºrler!\r\n              </>\r\n            ) : submitStatus === 'error' ? (\r\n              <>\r\n                <i className=\"fas fa-exclamation-triangle\" style={{ marginRight: '8px' }}></i>\r\n                Hata!\r\n              </>\r\n            ) : isSubmitting ? (\r\n              <>\r\n                <i className=\"fas fa-spinner fa-spin\" style={{ marginRight: '8px' }}></i>\r\n                G√∂nderiliyor...\r\n              </>\r\n            ) : (\r\n              <>\r\n                <i className=\"fas fa-paper-plane\" style={{ marginRight: '8px' }}></i>\r\n                G√∂nder\r\n              </>\r\n            )}\r\n          </button>\r\n\r\n          <button\r\n            type=\"button\"\r\n            onClick={onClose}\r\n            style={{\r\n              width: '100%',\r\n              padding: '12px',\r\n              background: 'rgba(255, 255, 255, 0.1)',\r\n              color: '#ccc',\r\n              border: 'none',\r\n              borderRadius: '10px',\r\n              fontSize: '14px',\r\n              fontWeight: 600,\r\n              cursor: 'pointer',\r\n            }}\r\n          >\r\n            ƒ∞ptal\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport default function EmailVerifiedPopup() {\r\n  const [show, setShow] = useState(false);\r\n\r\n  useEffect(() => {\r\n    // Check if email was verified\r\n    const emailVerified = localStorage.getItem('menupark_emailVerified');\r\n\r\n    if (emailVerified === 'true') {\r\n      // Clear flag immediately\r\n      localStorage.removeItem('menupark_emailVerified');\r\n\r\n      // Show popup\r\n      setShow(true);\r\n\r\n      // Hide after 2 seconds\r\n      setTimeout(() => {\r\n        setShow(false);\r\n      }, 2000);\r\n    }\r\n  }, []);\r\n\r\n  if (!show) return null;\r\n\r\n  return (\r\n    <>\r\n      <style jsx>{`\r\n        @keyframes slideDown {\r\n          from {\r\n            opacity: 0;\r\n            transform: translateX(-50%) translateY(-20px);\r\n          }\r\n          to {\r\n            opacity: 1;\r\n            transform: translateX(-50%) translateY(0);\r\n          }\r\n        }\r\n\r\n        @keyframes slideUp {\r\n          from {\r\n            opacity: 1;\r\n            transform: translateX(-50%) translateY(0);\r\n          }\r\n          to {\r\n            opacity: 0;\r\n            transform: translateX(-50%) translateY(-20px);\r\n          }\r\n        }\r\n\r\n        .email-verified-popup {\r\n          position: fixed;\r\n          top: 20px;\r\n          left: 50%;\r\n          transform: translateX(-50%);\r\n          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n          color: white;\r\n          padding: 20px 40px;\r\n          border-radius: 12px;\r\n          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\r\n          z-index: 100001;\r\n          font-size: 16px;\r\n          font-weight: 600;\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 12px;\r\n          animation: slideDown 0.3s ease-out;\r\n        }\r\n\r\n        .email-verified-popup.hiding {\r\n          animation: slideUp 0.3s ease-out;\r\n        }\r\n      `}</style>\r\n\r\n      <div className={`email-verified-popup ${!show ? 'hiding' : ''}`}>\r\n        <span style={{ fontSize: '24px' }}>‚úì</span>\r\n        <span>Email adresiniz ba≈üarƒ±yla doƒürulandƒ±!</span>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n","'use client';\r\n\r\ninterface WaiterCallRateLimitModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  errorMessage: string;\r\n  remainingSeconds: number;\r\n  isRegistered: boolean;\r\n}\r\n\r\nexport default function WaiterCallRateLimitModal({\r\n  isOpen,\r\n  onClose,\r\n  errorMessage,\r\n  remainingSeconds,\r\n  isRegistered,\r\n}: WaiterCallRateLimitModalProps) {\r\n  if (!isOpen) return null;\r\n\r\n  const minutes = Math.floor(remainingSeconds / 60);\r\n  const seconds = remainingSeconds % 60;\r\n  const timeText = minutes > 0 ? `${minutes} dakika ${seconds} saniye` : `${seconds} saniye`;\r\n\r\n  const infoText = isRegistered\r\n    ? '‚ÑπÔ∏è √úye kullanƒ±cƒ±lar 10 dakikada bir garson √ßaƒüƒ±rabilir'\r\n    : '‚ÑπÔ∏è Misafirler 30 dakikada bir garson √ßaƒüƒ±rabilir';\r\n\r\n  const registerHint = !isRegistered ? 'üí° √úye olun ve 10 dakikada bir √ßaƒüƒ±rƒ±n!' : null;\r\n\r\n  return (\r\n    <div\r\n      onClick={onClose}\r\n      style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        background: 'rgba(0, 0, 0, 0.6)',\r\n        backdropFilter: 'blur(5px)',\r\n        zIndex: 100000,\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        padding: '20px',\r\n      }}\r\n    >\r\n      <div\r\n        onClick={(e) => e.stopPropagation()}\r\n        style={{\r\n          background: 'linear-gradient(135deg, rgba(255, 152, 0, 0.95) 0%, rgba(251, 140, 0, 0.95) 100%)',\r\n          color: 'white',\r\n          padding: '30px',\r\n          borderRadius: '20px',\r\n          textAlign: 'center',\r\n          fontSize: '15px',\r\n          fontWeight: 500,\r\n          boxShadow: '0 20px 60px rgba(0, 0, 0, 0.4)',\r\n          maxWidth: '450px',\r\n          width: '100%',\r\n          lineHeight: 1.6,\r\n        }}\r\n      >\r\n        <div style={{ fontSize: '48px', marginBottom: '15px' }}>‚è∞</div>\r\n\r\n        <div style={{ fontWeight: 700, fontSize: '20px', marginBottom: '15px' }}>\r\n          Garson √áaƒüƒ±rma Limiti\r\n        </div>\r\n\r\n        <div style={{ marginBottom: '20px', fontSize: '15px', opacity: 0.95 }}>{errorMessage}</div>\r\n\r\n        {/* Remaining Time Card */}\r\n        <div\r\n          style={{\r\n            background: 'rgba(255, 255, 255, 0.2)',\r\n            padding: '15px',\r\n            borderRadius: '12px',\r\n            marginBottom: '20px',\r\n            border: '1px solid rgba(255, 255, 255, 0.3)',\r\n          }}\r\n        >\r\n          <div style={{ fontSize: '13px', opacity: 0.9, marginBottom: '8px' }}>Kalan S√ºre:</div>\r\n          <div style={{ fontSize: '24px', fontWeight: 700 }}>{timeText}</div>\r\n        </div>\r\n\r\n        {/* Info Section */}\r\n        <div\r\n          style={{\r\n            paddingTop: '20px',\r\n            borderTop: '1px solid rgba(255, 255, 255, 0.3)',\r\n            fontSize: '14px',\r\n            opacity: 0.95,\r\n          }}\r\n        >\r\n          <div style={{ marginBottom: registerHint ? '8px' : 0 }}>{infoText}</div>\r\n          {registerHint && (\r\n            <div style={{ fontWeight: 600, fontSize: '15px', marginTop: '8px' }}>{registerHint}</div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Close Button */}\r\n        <button\r\n          onClick={onClose}\r\n          style={{\r\n            marginTop: '25px',\r\n            width: '100%',\r\n            padding: '14px',\r\n            background: 'rgba(255, 255, 255, 0.25)',\r\n            border: '1px solid rgba(255, 255, 255, 0.4)',\r\n            borderRadius: '12px',\r\n            color: '#fff',\r\n            fontSize: '15px',\r\n            fontWeight: 700,\r\n            cursor: 'pointer',\r\n            transition: 'all 0.2s ease',\r\n          }}\r\n          onMouseEnter={(e) => {\r\n            e.currentTarget.style.background = 'rgba(255, 255, 255, 0.35)';\r\n          }}\r\n          onMouseLeave={(e) => {\r\n            e.currentTarget.style.background = 'rgba(255, 255, 255, 0.25)';\r\n          }}\r\n        >\r\n          Tamam\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\nimport type { MenuDto, CategoryDto } from '@/types/api';\r\n\r\ninterface ImagePreloadContainerProps {\r\n  menuData: MenuDto | null;\r\n  categoriesData?: CategoryDto[];\r\n  customerLogo?: string;\r\n  backgroundUrl?: string;\r\n  bannerUrl?: string;\r\n  onImagesLoaded?: () => void;\r\n}\r\n\r\n/**\r\n * G√∂rsel Preload Container\r\n *\r\n * Eski sistemdeki hƒ±zlƒ± y√ºkleme stratejisini uygular:\r\n * - T√ºm √ºr√ºn g√∂rsellerini gizli bir div i√ßinde eager loading ile y√ºkler\r\n * - Modal a√ßƒ±ldƒ±ƒüƒ±nda g√∂rseller zaten cache'te olduƒüu i√ßin ANINDA g√∂r√ºn√ºr\r\n * - opacity: 0 ile tamamen gizli ama browser yine de y√ºkl√ºyor\r\n */\r\nexport default function ImagePreloadContainer({\r\n  menuData,\r\n  categoriesData,\r\n  customerLogo,\r\n  backgroundUrl,\r\n  bannerUrl,\r\n  onImagesLoaded\r\n}: ImagePreloadContainerProps) {\r\n  const [imageUrls, setImageUrls] = useState<string[]>([]);\r\n  const loadedCountRef = useRef(0);\r\n  const totalCountRef = useRef(0);\r\n  const callbackCalledRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (!menuData) return;\r\n\r\n    const urls: string[] = [];\r\n    const urlSet = new Set<string>(); // Duplicate √∂nlemek i√ßin\r\n\r\n    // Kritik g√∂rseller - en y√ºksek √∂ncelik\r\n    if (backgroundUrl) urlSet.add(backgroundUrl);\r\n    if (customerLogo) urlSet.add(customerLogo);\r\n    if (bannerUrl) urlSet.add(bannerUrl);\r\n\r\n    // Kategori g√∂rsellerini ekle (CategoryGrid'de g√∂steriliyor)\r\n    if (categoriesData) {\r\n      categoriesData.forEach(categoryData => {\r\n        if (categoryData.picture) {\r\n          let pictureUrl = categoryData.picture;\r\n\r\n          // URL format d√ºzelt\r\n          if (!pictureUrl.startsWith('http://') && !pictureUrl.startsWith('https://')) {\r\n            const picturePath = pictureUrl.startsWith('Uploads/')\r\n              ? pictureUrl.substring('Uploads/'.length)\r\n              : pictureUrl;\r\n            pictureUrl = `https://api.canlimenu.com/Uploads/${picturePath}`;\r\n          } else if (pictureUrl.startsWith('http://')) {\r\n            pictureUrl = pictureUrl.replace('http://', 'https://');\r\n          }\r\n\r\n          urlSet.add(pictureUrl);\r\n        }\r\n      });\r\n    }\r\n\r\n    // T√ºm √ºr√ºn g√∂rsellerini topla\r\n    menuData.menu.forEach(category => {\r\n      category.products.forEach(product => {\r\n        if (product.picture) {\r\n          let pictureUrl = product.picture;\r\n\r\n          // URL format d√ºzelt\r\n          if (!pictureUrl.startsWith('http://') && !pictureUrl.startsWith('https://')) {\r\n            const picturePath = pictureUrl.startsWith('Uploads/')\r\n              ? pictureUrl.substring('Uploads/'.length)\r\n              : pictureUrl;\r\n            pictureUrl = `https://api.canlimenu.com/Uploads/${picturePath}`;\r\n          } else if (pictureUrl.startsWith('http://')) {\r\n            pictureUrl = pictureUrl.replace('http://', 'https://');\r\n          }\r\n\r\n          urlSet.add(pictureUrl);\r\n        }\r\n      });\r\n    });\r\n\r\n    // Set'ten array'e √ßevir (duplicate'ler otomatik temizlendi)\r\n    const uniqueUrls = Array.from(urlSet);\r\n    setImageUrls(uniqueUrls);\r\n    totalCountRef.current = uniqueUrls.length;\r\n    loadedCountRef.current = 0;\r\n    callbackCalledRef.current = false;\r\n  }, [menuData, categoriesData, customerLogo, backgroundUrl, bannerUrl]);\r\n\r\n  const handleImageLoad = () => {\r\n    loadedCountRef.current++;\r\n\r\n    // T√ºm g√∂rseller y√ºklendi mi?\r\n    if (loadedCountRef.current >= totalCountRef.current && !callbackCalledRef.current && onImagesLoaded) {\r\n      callbackCalledRef.current = true;\r\n      onImagesLoaded();\r\n    }\r\n  };\r\n\r\n  const handleImageError = (url: string) => {\r\n    loadedCountRef.current++;\r\n\r\n    // Hata olsa da devam et\r\n    if (loadedCountRef.current >= totalCountRef.current && !callbackCalledRef.current && onImagesLoaded) {\r\n      callbackCalledRef.current = true;\r\n      onImagesLoaded();\r\n    }\r\n  };\r\n\r\n  if (imageUrls.length === 0) return null;\r\n\r\n  return (\r\n    <div\r\n      id=\"imagePreloadContainer\"\r\n      style={{\r\n        position: 'absolute',\r\n        width: 0,\r\n        height: 0,\r\n        overflow: 'hidden',\r\n        opacity: 0,\r\n        pointerEvents: 'none'\r\n      }}\r\n      aria-hidden=\"true\"\r\n    >\r\n      {imageUrls.map((url, index) => (\r\n        <img\r\n          key={`preload-${index}`}\r\n          src={url}\r\n          alt={`Preload ${index}`}\r\n          loading=\"eager\"\r\n          fetchPriority={index < 50 ? 'high' : 'auto'}\r\n          decoding=\"async\"\r\n          onLoad={handleImageLoad}\r\n          onError={() => handleImageError(url)}\r\n          style={{ display: 'none' }}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}