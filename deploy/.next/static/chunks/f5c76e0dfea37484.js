(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78844,e=>{"use strict";var t=e.i(43476),a=e.i(71645),i=e.i(18566),r=e.i(49718),n=e.i(30759),s=e.i(85728),l=e.i(84035);e.i(47167);var o=e.i(69573),d=e.i(84429),c=e.i(50871),p=e.i(49780),u=e.i(57688);function x({logoUrl:e,backgroundUrl:i,onComplete:r}){let[n,s]=(0,a.useState)(!0),[l,o]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{let e=setTimeout(()=>{let e=document.querySelector(".splash-screen");e?.classList.add("liquid-morph"),setTimeout(()=>{s(!1),r()},600)},600);return()=>clearTimeout(e)},[r]),!n)return null;let d=i?{backgroundImage:`url('${i}')`,backgroundPosition:"center center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"};return(0,t.jsx)("div",{className:"splash-screen active",style:d,children:(0,t.jsx)("div",{className:"splash-content",children:l?(0,t.jsx)("div",{style:{width:"350px",height:"350px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"48px",color:"white",fontWeight:"bold"},children:"LOGO"}):(0,t.jsx)(u.default,{src:e,alt:"Logo",width:350,height:350,className:"splash-logo",priority:!0,onError:()=>o(!0)})})})}function m({bannerUrl:e,isOpen:i,onClose:r}){return((0,a.useEffect)(()=>(i?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[i]),i)?(0,t.jsx)("div",{className:"banner-overlay",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,opacity:1,transition:"opacity 0.3s ease"},onClick:r,children:(0,t.jsxs)("div",{className:"banner-content",style:{position:"relative",maxWidth:window.innerWidth<=480?"95%":"90%",maxHeight:window.innerWidth<=480?"80%":"90%",borderRadius:"12px",overflow:"hidden",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)",transition:"transform 0.3s ease"},onClick:r,children:[(0,t.jsx)("button",{className:"banner-close-btn",onClick:e=>{e.stopPropagation(),r()},"aria-label":"Kapat",style:{position:"absolute",top:"10px",right:"10px",width:"32px",height:"32px",background:"rgba(0, 0, 0, 0.7)",border:"none",borderRadius:"50%",color:"white",fontSize:"20px",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,transition:"background 0.2s ease, transform 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(0, 0, 0, 0.9)",e.currentTarget.style.transform="scale(1.1)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(0, 0, 0, 0.7)",e.currentTarget.style.transform="scale(1)"},children:"√ó"}),(0,t.jsx)("img",{src:e,alt:"Banner",className:"banner-image",loading:"eager",fetchPriority:"high",decoding:"async",style:{width:"100%",height:"auto",display:"block",cursor:"pointer",maxHeight:"90vh",objectFit:"contain"}})]})}):null}var g=e.i(37902);function h({logoUrl:e,backgroundUrl:a}){let i=a?{backgroundImage:`url('${a}')`,backgroundPosition:"center center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"};return(0,t.jsxs)("div",{style:{...i,position:"fixed",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9998},className:"jsx-bf6e493c172f8c8c",children:[(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},className:"jsx-bf6e493c172f8c8c",children:e?(0,t.jsx)("div",{style:{animation:"pulse 1s ease-in-out infinite",transformOrigin:"center"},className:"jsx-bf6e493c172f8c8c",children:(0,t.jsx)(u.default,{src:e,alt:"Logo",width:200,height:200,priority:!0,style:{objectFit:"contain",filter:"drop-shadow(0 0 20px rgba(255,255,255,0.3))"}})}):(0,t.jsx)("div",{style:{width:"60px",height:"60px",border:"4px solid rgba(255, 255, 255, 0.3)",borderTop:"4px solid white",borderRadius:"50%",animation:"spin 1s linear infinite"},className:"jsx-bf6e493c172f8c8c"})}),(0,t.jsx)(g.default,{id:"bf6e493c172f8c8c",children:"@keyframes pulse{0%,to{opacity:1;transform:scale(1)}50%{opacity:.8;transform:scale(1.05)}}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"})]})}function f(){let{language:e,toggleLanguage:a}=(0,s.useLanguage)();return(0,t.jsx)("div",{className:"language-selector",children:(0,t.jsx)("button",{id:"languageToggle",className:`language-toggle ${"en"===e?"active":""}`,onClick:a,children:(0,t.jsx)("span",{id:"languageText",children:e.toUpperCase()})})})}function b({tab:e}){let[i,r]=(0,a.useState)(0),[n,s]=(0,a.useState)([]);return((0,a.useEffect)(()=>{e.imageUrl&&s(e.imageUrl.split(",").map(e=>e.trim()).filter(e=>e).map(e=>{if(!e.startsWith("http://")&&!e.startsWith("https://")){let t=e.startsWith("Uploads/")?e.substring(8):e;return`https://api.canlimenu.com/Uploads/${t}`}return e.replace("http://","https://")}))},[e.imageUrl]),(0,a.useEffect)(()=>{if(n.length<=1)return;let t=setInterval(()=>{r(e=>(e+1)%n.length)},e.sliderInterval||8e3);return()=>clearInterval(t)},[n.length,e.sliderInterval]),0===n.length)?(0,t.jsx)("div",{className:"header-content-image",children:(0,t.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"rgba(255,255,255,0.7)"},children:"G√∂rsel bulunamadƒ±"})}):(0,t.jsx)("div",{className:"header-content-image",children:(0,t.jsxs)("div",{className:"header-image-slider",children:[n.map((e,a)=>(0,t.jsx)("div",{className:`header-image-slide ${a===i?"active":""}`,"data-slide":a,children:(0,t.jsx)(u.default,{src:e,alt:`Slide ${a+1}`,width:1920,height:1080,style:{width:"100%",height:"100%",objectFit:"cover"},loading:"eager",fetchPriority:"high"})},a)),n.length>1&&(0,t.jsx)("div",{className:"header-slider-dots",children:n.map((e,a)=>(0,t.jsx)("span",{className:`header-slider-dot ${a===i?"active":""}`,onClick:()=>r(a),"data-slide":a},a))})]})})}function y({tab:e}){return e.videoUrl?(0,t.jsx)("div",{className:"header-content-video",children:(0,t.jsxs)("video",{autoPlay:!0,loop:!0,muted:!0,playsInline:!0,style:{width:"100%",height:"100%",objectFit:"cover"},children:[(0,t.jsx)("source",{src:e.videoUrl,type:"video/mp4"}),"Tarayƒ±cƒ±nƒ±z video oynatmayƒ± desteklemiyor."]})}):(0,t.jsx)("div",{className:"header-content-video",children:(0,t.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"rgba(255,255,255,0.7)"},children:"Video bulunamadƒ±"})})}function j({tab:e}){let a=(e=>{if(!e)return{title:"",subtitle:"",ctaText:""};try{let t=JSON.parse(e);return{title:t.title||t.Title||"",subtitle:t.subtitle||t.Subtitle||"",ctaText:t.ctaText||t.CtaText||""}}catch{return{title:e,subtitle:"",ctaText:""}}})(e.campaignText);return(0,t.jsxs)("div",{className:"header-content-campaign",children:[a.title&&(0,t.jsx)("div",{className:"header-campaign-title",children:a.title}),a.subtitle&&(0,t.jsx)("div",{className:"header-campaign-subtitle",children:a.subtitle}),a.ctaText&&(0,t.jsx)("a",{href:"#categories",className:"header-campaign-cta",onClick:e=>{e.preventDefault();let t=document.querySelector(".categories-grid");t&&t.scrollIntoView({behavior:"smooth"})},children:a.ctaText})]})}function v(e,t){if("en"===t){let t=e.titleEnglish||e.TitleEnglish||e.titleEn||e.TitleEn||e.nameEn||e.title||e.Title||e.name||"";if(t&&""!==t.trim())return t}return e.title||e.Title||e.name||""}function k(e,t){if("en"===t){let t=e.detailEnglish||e.DetailEnglish||e.detailEn||e.DetailEn||e.descriptionEnglish||e.DescriptionEnglish||e.descriptionEn||e.DescriptionEn||e.detail||e.Detail||e.description||e.Description||"";if(t&&""!==t.trim())return t}return e.detail||e.Detail||e.description||e.Description||""}function w({tab:e}){let{language:i,t:r}=(0,s.useLanguage)(),[n,l]=(0,a.useState)([]),[o,d]=(0,a.useState)([]),[c,p]=(0,a.useState)(!0);if((0,a.useEffect)(()=>{if(e.selectedProductIds)try{let t=JSON.parse(e.selectedProductIds);d(t)}catch(e){console.error("Failed to parse product IDs:",e),p(!1)}else p(!1)},[e.selectedProductIds]),(0,a.useEffect)(()=>{0===o.length?p(!1):(async()=>{try{let e=o.map(e=>({id:e,sambaId:e,title:r("productLoading"),price:0,categoryId:0,orderNo:0}));l(e),p(!1)}catch(e){console.error("Failed to load products:",e),p(!1)}})()},[o]),c)return(0,t.jsxs)("div",{className:"header-content-products",children:[(0,t.jsx)("div",{className:"header-products-title",children:"FavoriteProducts"===e.tabType?r("featuredProducts"):r("bestSelling")}),(0,t.jsx)("div",{className:"header-products-scroll",children:[1,2,3,4].map(e=>(0,t.jsxs)("div",{className:"header-product-card",style:{animation:"pulse 1.5s ease-in-out infinite"},children:[(0,t.jsx)("div",{style:{width:"100%",height:"80px",background:"rgba(255,255,255,0.1)",borderRadius:"8px"}}),(0,t.jsxs)("div",{className:"header-product-info",children:[(0,t.jsx)("div",{style:{width:"80%",height:"12px",background:"rgba(255,255,255,0.1)",borderRadius:"4px",marginBottom:"4px"}}),(0,t.jsx)("div",{style:{width:"50%",height:"10px",background:"rgba(255,255,255,0.1)",borderRadius:"4px"}})]})]},e))})]});if(0===n.length)return(0,t.jsx)("div",{className:"header-content-products",children:(0,t.jsx)("div",{style:{textAlign:"center",padding:"20px",color:"rgba(255,255,255,0.7)"},children:r("noProductsFound")})});let x="FavoriteProducts"===e.tabType?r("featuredProducts"):r("bestSelling");return(0,t.jsxs)("div",{className:"header-content-products",children:[(0,t.jsx)("div",{className:"header-products-title",children:x}),(0,t.jsx)("div",{className:"header-products-scroll",children:n.map(e=>{let a=v(e,i);return(0,t.jsxs)("div",{className:"header-product-card",onClick:()=>{console.log("Product clicked:",e.id)},children:[e.picture?(0,t.jsx)(u.default,{src:e.picture.startsWith("http")?e.picture.replace("http://","https://"):`https://api.canlimenu.com/Uploads/${e.picture.replace("Uploads/","")}`,alt:a,width:100,height:80,className:"header-product-image",loading:"eager"}):(0,t.jsx)("div",{className:"header-product-image",style:{background:"rgba(0,0,0,0.2)"}}),(0,t.jsxs)("div",{className:"header-product-info",children:[(0,t.jsx)("div",{className:"header-product-name",children:a}),(0,t.jsx)("div",{className:"header-product-price",children:e.price>0?`${e.price.toFixed(2)} ‚Ç∫`:r("noPrice")})]})]},e.id)})})]})}function S({customerCode:e,fallbackLogoUrl:i}){let[r,n]=(0,a.useState)([]),[s,l]=(0,a.useState)(0),[o,d]=(0,a.useState)(!0),c=(0,a.useRef)(null),p=(0,a.useRef)(0),u=(0,a.useRef)(0);return(0,a.useEffect)(()=>{async function t(){try{let t=await fetch(`/api/advertisements/${e}`),a=await t.json();a.success&&a.data&&a.data.length>0&&n(a.data)}catch(e){console.error("Failed to fetch header tabs:",e)}finally{d(!1)}}e?t():d(!1)},[e]),(0,a.useEffect)(()=>{if(!(r.length<=1))return c.current=setInterval(()=>{l(e=>(e+1)%r.length)},5e3),()=>{c.current&&clearInterval(c.current)}},[r.length]),!o&&0===r.length&&i?(0,t.jsx)("div",{id:"headerArea",className:"restaurant-info logo-container",children:(0,t.jsx)("div",{className:"header-tabs-wrapper",style:{display:"flex"},children:(0,t.jsx)("div",{className:"header-content-image",style:{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)("img",{src:i,alt:"Logo",loading:"eager",fetchPriority:"high",style:{maxWidth:"90%",maxHeight:"90%",objectFit:"contain",borderRadius:"12px"}})})})}):o||0===r.length?null:(0,t.jsx)("div",{id:"headerArea",className:"restaurant-info logo-container",children:(0,t.jsxs)("div",{className:"header-tabs-wrapper",style:{display:"flex"},children:[(0,t.jsx)("div",{className:"header-tabs-slider",onTouchStart:e=>{p.current=e.touches[0].clientX},onTouchEnd:e=>{let t;u.current=e.changedTouches[0].clientX,Math.abs(t=p.current-u.current)>50&&(t>0?l(e=>(e+1)%r.length):l(e=>(e-1+r.length)%r.length))},children:r.map((e,a)=>(0,t.jsxs)("div",{className:`header-tab-content ${a===s?"active":""}`,style:{position:a===s?"relative":"absolute",visibility:a===s?"visible":"hidden",opacity:+(a===s),width:"100%",height:"100%"},children:["Image"===e.tabType&&(0,t.jsx)(b,{tab:e}),"Video"===e.tabType&&(0,t.jsx)(y,{tab:e}),"Campaign"===e.tabType&&(0,t.jsx)(j,{tab:e}),("FavoriteProducts"===e.tabType||"BestSellingProducts"===e.tabType)&&(0,t.jsx)(w,{tab:e})]},e.id))}),r.length>1&&(0,t.jsx)("div",{className:"header-tabs-dots",children:r.map((e,a)=>(0,t.jsx)("span",{className:`header-tab-dot ${a===s?"active":""}`,onClick:()=>{l(a),c.current&&clearInterval(c.current)},"data-index":a},a))})]})})}function N({categories:e}){let{menuData:a,customerData:i,openProductListModal:n}=(0,r.useMenu)(),{language:l}=(0,s.useLanguage)(),o=i?.customer.categoryFont||"Inter, serif";return(0,t.jsx)("div",{className:"categories-grid",children:e.map((e,i)=>{let r="en"===l&&e.nameEn?e.nameEn:e.name;return(0,t.jsxs)("a",{href:`#${e.id}`,className:"category-card",style:{animation:"categoryAppear 0.6s ease-out backwards",animationDelay:`${.1+.05*i}s`},onClick:t=>((e,t)=>{if(e.preventDefault(),a?.menu){let e=a.menu.find(e=>e.sambaId===t);e&&n(e)}})(t,e.id),children:[(0,t.jsx)(u.default,{src:e.image,alt:r,width:300,height:300,className:"card-image",priority:!0,unoptimized:!0}),(0,t.jsx)("div",{className:"card-content",children:(0,t.jsx)("h3",{className:"card-title",style:{fontFamily:o},children:r})})]},e.id)})})}function z({onProfileClick:e,onAIClick:i,onCartClick:r,onWaiterCall:n,onGameClick:l,onContactClick:o,onSuggestionClick:d,showAIChat:c=!0,showCart:p=!0,showWaiterCall:u=!1,cartItemCount:x=0,tableId:m,phone:h}){let[f,b]=(0,a.useState)(!1),{t:y}=(0,s.useLanguage)(),j=({icon:e,label:a,onClick:i,gradient:r,top:n="0",badge:s})=>(0,t.jsxs)("div",{className:"nav-item",onClick:i,style:{display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer",padding:"8px",borderRadius:"12px",transition:"all 0.3s ease",position:"relative",top:n},children:[(0,t.jsxs)("div",{style:{width:"0"!==n?"50px":"32px",height:"0"!==n?"50px":"32px",background:r,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"4px",position:"relative",boxShadow:"0"!==n?"0 4px 15px rgba(102, 126, 234, 0.3)":"none"},children:[e,void 0!==s&&s>0&&(0,t.jsx)("div",{style:{position:"absolute",top:"-5px",right:"-5px",background:"#dc3545",color:"white",borderRadius:"50%",width:"18px",height:"18px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:700,minWidth:"18px"},children:s})]}),(0,t.jsx)("span",{style:{fontSize:"11px",color:"0"!==n?"#667eea":"#666",fontWeight:"0"!==n?600:500},children:a})]});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{id:"bottomNavBar",style:{position:"fixed",bottom:0,left:0,right:0,height:"80px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderTop:"1px solid rgba(0, 0, 0, 0.1)",display:"flex",justifyContent:"space-around",alignItems:"center",zIndex:999999,boxShadow:"0 -2px 20px rgba(0, 0, 0, 0.1)"},className:"jsx-c34ac28e8e3b4496",children:[(0,t.jsx)(j,{icon:(0,t.jsx)("svg",{style:{width:"18px",height:"18px",fill:"white"},viewBox:"0 0 24 24",className:"jsx-c34ac28e8e3b4496",children:(0,t.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z",className:"jsx-c34ac28e8e3b4496"})}),label:y("profile"),onClick:e,gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",className:"jsx-c34ac28e8e3b4496"}),c&&(0,t.jsx)(j,{icon:(0,t.jsx)("svg",{style:{width:"18px",height:"18px",fill:"white"},viewBox:"0 0 24 24",className:"jsx-c34ac28e8e3b4496",children:(0,t.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z",className:"jsx-c34ac28e8e3b4496"})}),label:y("aiAssistant"),onClick:i,gradient:"linear-gradient(135deg, #3498db 0%, #2980b9 100%)",className:"jsx-c34ac28e8e3b4496"}),u&&m&&(0,t.jsx)(j,{icon:(0,t.jsx)("svg",{style:{width:"24px",height:"24px",fill:"white"},viewBox:"0 0 24 24",className:"jsx-c34ac28e8e3b4496",children:(0,t.jsx)("path",{d:"M18.06 23H19.72C20.56 23 21.25 22.35 21.35 21.53L23 5.05H18V1H16.03V5.05H11.06L11.36 7.39C13.07 7.86 14.67 8.71 15.63 9.65C17.07 11.07 18.06 12.54 18.06 14.94V23M1 22V21H16.03V22C16.03 22.54 15.58 23 15.03 23H2C1.45 23 1 22.54 1 22M16.03 15C16.03 7 1 7 1 15H16.03M1 17H16V19H1V17Z",className:"jsx-c34ac28e8e3b4496"})}),label:y("waiterCall"),onClick:()=>{b(!0)},gradient:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",top:"-15px",className:"jsx-c34ac28e8e3b4496"}),(0,t.jsx)(j,{icon:(0,t.jsx)("svg",{style:{width:"18px",height:"18px",fill:"white"},viewBox:"0 0 24 24",className:"jsx-c34ac28e8e3b4496",children:(0,t.jsx)("path",{d:"M7.97,16L5,19C4.67,19.3 4.23,19.5 3.75,19.5A1.75,1.75 0 0,1 2,17.75V17.5L3,10.12C3.21,7.81 5.14,6 7.5,6H16.5C18.86,6 20.79,7.81 21,10.12L22,17.5V17.75A1.75,1.75 0 0,1 20.25,19.5C19.77,19.5 19.33,19.3 19,19L16.03,16H7.97M7.5,8A0.5,0.5 0 0,0 7,8.5A0.5,0.5 0 0,0 7.5,9A0.5,0.5 0 0,0 8,8.5A0.5,0.5 0 0,0 7.5,8M16.5,8A0.5,0.5 0 0,0 16,8.5A0.5,0.5 0 0,0 16.5,9A0.5,0.5 0 0,0 17,8.5A0.5,0.5 0 0,0 16.5,8M8.5,11A1.5,1.5 0 0,0 7,12.5A1.5,1.5 0 0,0 8.5,14A1.5,1.5 0 0,0 10,12.5A1.5,1.5 0 0,0 8.5,11M15.5,11A1.5,1.5 0 0,0 14,12.5A1.5,1.5 0 0,0 15.5,14A1.5,1.5 0 0,0 17,12.5A1.5,1.5 0 0,0 15.5,11M12,13C12.27,13 12.5,13.14 12.65,13.35L15,16H9L11.35,13.35C11.5,13.14 11.73,13 12,13Z",className:"jsx-c34ac28e8e3b4496"})}),label:y("games"),onClick:l,gradient:"linear-gradient(135deg, #9c27b0 0%, #673ab7 100%)",className:"jsx-c34ac28e8e3b4496"}),p?(0,t.jsx)(j,{icon:(0,t.jsx)("svg",{style:{width:"18px",height:"18px",fill:"white"},viewBox:"0 0 24 24",className:"jsx-c34ac28e8e3b4496",children:(0,t.jsx)("path",{d:"M7 4V2C7 1.45 7.45 1 8 1H16C16.55 1 17 1.45 17 2V4H20C20.55 4 21 4.45 21 5S20.55 6 20 6H19V19C19 20.1 18.1 21 17 21H7C5.9 21 5 20.1 5 19V6H4C3.45 6 3 5.55 3 5S3.45 4 4 4H7ZM9 3V4H15V3H9ZM7 6V19H17V6H7Z",className:"jsx-c34ac28e8e3b4496"})}),label:y("cart"),onClick:r,gradient:"linear-gradient(135deg, #28a745 0%, #20c997 100%)",badge:x,className:"jsx-c34ac28e8e3b4496"}):h?(0,t.jsx)(j,{icon:(0,t.jsx)("svg",{style:{width:"18px",height:"18px",fill:"white"},viewBox:"0 0 24 24",className:"jsx-c34ac28e8e3b4496",children:(0,t.jsx)("path",{d:"M6.62,10.79C8.06,13.62 10.38,15.94 13.21,17.38L15.41,15.18C15.69,14.9 16.08,14.82 16.43,14.93C17.55,15.3 18.75,15.5 20,15.5A1,1 0 0,1 21,16.5V20A1,1 0 0,1 20,21A17,17 0 0,1 3,4A1,1 0 0,1 4,3H7.5A1,1 0 0,1 8.5,4C8.5,5.25 8.7,6.45 9.07,7.57C9.18,7.92 9.1,8.31 8.82,8.59L6.62,10.79Z",className:"jsx-c34ac28e8e3b4496"})}),label:y("callUs"),onClick:o,gradient:"linear-gradient(135deg, #28a745 0%, #20c997 100%)",className:"jsx-c34ac28e8e3b4496"}):(0,t.jsx)(j,{icon:(0,t.jsx)("svg",{style:{width:"18px",height:"18px",fill:"white"},viewBox:"0 0 24 24",className:"jsx-c34ac28e8e3b4496",children:(0,t.jsx)("path",{d:"M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4A2,2 0 0,0 20,2M6,9H18V11H6M14,14H6V12H14M18,8H6V6H18",className:"jsx-c34ac28e8e3b4496"})}),label:y("sendSuggestion"),onClick:d,gradient:"linear-gradient(135deg, #FF6B6B 0%, #FFE66D 100%)",className:"jsx-c34ac28e8e3b4496"})]}),f&&(0,t.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:99999,animation:"fadeIn 0.2s ease"},onClick:()=>b(!1),className:"jsx-c34ac28e8e3b4496",children:(0,t.jsxs)("div",{style:{background:"white",borderRadius:"20px",padding:"30px",maxWidth:"400px",width:"90%",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.3)",animation:"slideUp 0.3s ease",textAlign:"center"},onClick:e=>e.stopPropagation(),className:"jsx-c34ac28e8e3b4496",children:[(0,t.jsx)("div",{style:{fontSize:"60px",marginBottom:"20px"},className:"jsx-c34ac28e8e3b4496",children:"üõéÔ∏è"}),(0,t.jsx)("h3",{style:{fontSize:"22px",color:"#2d3748",marginBottom:"15px",fontWeight:600},className:"jsx-c34ac28e8e3b4496",children:"Garson √áaƒüƒ±rƒ±lsƒ±n Mƒ±?"}),(0,t.jsx)("p",{style:{color:"#718096",fontSize:"15px",marginBottom:"30px",lineHeight:1.5},className:"jsx-c34ac28e8e3b4496",children:"Garsonunuz en kƒ±sa s√ºrede masanƒ±za gelecektir"}),(0,t.jsxs)("div",{style:{display:"flex",gap:"12px"},className:"jsx-c34ac28e8e3b4496",children:[(0,t.jsx)("button",{onClick:()=>b(!1),style:{flex:1,padding:"14px 20px",background:"#e2e8f0",color:"#4a5568",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease"},className:"jsx-c34ac28e8e3b4496",children:"ƒ∞ptal"}),(0,t.jsx)("button",{onClick:()=>{b(!1),n&&n()},style:{flex:1,padding:"14px 20px",background:"linear-gradient(135deg, #4ade80 0%, #22c55e 100%)",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(74, 222, 128, 0.3)"},className:"jsx-c34ac28e8e3b4496",children:"Onayla"})]})]})}),(0,t.jsx)(g.default,{id:"c34ac28e8e3b4496",children:"@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}"})]})}function C({productAllergens:e,className:i=""}){let[r,n]=(0,a.useState)(null);return((0,a.useEffect)(()=>{n(function(e,t){if(!t||0===t.length||!e||""===e.trim())return null;let a=[];try{a=JSON.parse(e)}catch(t){a=e.split(",").map(e=>e.trim()).filter(e=>e)}let i=a.filter(e=>t.some(t=>{let a=t.replace("Diƒüer: ","").toLowerCase().trim(),i=e.toLowerCase().trim();return a===i||i.includes(a)}));if(i.length>0){let e=i.join(", "),t=i.map(e=>{let t;return(t=e.toLowerCase().trim()).includes("gluten")||t.includes("buƒüday")||t.includes("wheat")?"üåæ":t.includes("laktoz")||t.includes("s√ºt")||t.includes("milk")||t.includes("dairy")?"ü•õ":t.includes("yumurta")||t.includes("egg")?"ü•ö":t.includes("fƒ±ndƒ±k")||t.includes("fƒ±stƒ±k")||t.includes("nut")||t.includes("hazelnut")||t.includes("peanut")?"ü•ú":t.includes("balƒ±k")||t.includes("fish")?"üêü":t.includes("karides")||t.includes("deniz")||t.includes("shellfish")||t.includes("seafood")?"ü¶ê":t.includes("soya")||t.includes("soy")?"ü´ò":t.includes("susam")||t.includes("sesame")?"üå∞":t.includes("kereviz")||t.includes("celery")?"ü•¨":t.includes("hardal")||t.includes("mustard")?"üå∂Ô∏è":"‚ö†Ô∏è"}).join(" ");return{allergens:i,icons:t,text:e}}return null}(e,function(){try{let e=localStorage.getItem("userData");if(!e)return[];let t=JSON.parse(e);if(!t.allergies)return[];if(Array.isArray(t.allergies))return t.allergies;if("string"==typeof t.allergies)try{let e=JSON.parse(t.allergies);if(Array.isArray(e))return e;return[t.allergies]}catch{return[t.allergies]}return[]}catch(e){return console.error("Alerji bilgisi alƒ±namadƒ±:",e),[]}}()))},[e]),r)?(0,t.jsx)("span",{className:`allergen-warning ${i}`,title:`‚ö†Ô∏è Alerjen: ${r.text}`,children:r.icons}):null}function I(){let{menuData:e,customerData:i,categoriesData:n,selectedCategory:l,isProductListModalOpen:o,closeProductListModal:d,openProductDetailModal:c,isTableMode:p,cartKey:u,productTokenSettings:x}=(0,r.useMenu)(),{language:m,t:g}=(0,s.useLanguage)(),[h,f]=(0,a.useState)(l),[b,y]=(0,a.useState)([]),j=(0,a.useRef)(null);(0,a.useRef)(null);let w=(0,a.useRef)(0),S=(0,a.useRef)(0);(0,a.useEffect)(()=>{let e=()=>{if(p&&u){let e=localStorage.getItem(`cart_${u}`);y(e?JSON.parse(e):[])}};e();let t=()=>{e()};return window.addEventListener("cartUpdated",t),()=>window.removeEventListener("cartUpdated",t)},[p,u]);let N=e=>{let t=b.find(t=>t.productId===e);return t?t.quantity:0};(0,a.useEffect)(()=>{l&&f(l)},[l]),(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&o&&d()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[o,d]);(0,a.useEffect)(()=>{if(j.current&&h&&e?.menu){let t=e.menu.findIndex(e=>e.sambaId===h.sambaId);if(-1!==t){let e=j.current.querySelectorAll(".category-item")[t];e&&setTimeout(()=>{let t=e.offsetLeft-j.current.offsetWidth/2+e.offsetWidth/2;j.current?.scrollTo({left:t,behavior:"smooth"})},100)}}},[h,e]);let z=e?.menu||[],I=e=>{f(e)},T=(e,t)=>e?e.startsWith("http")?e.replace("http://","https://"):"https://api.canlimenu.com/Uploads/"+(e.startsWith("Uploads/")?e.substring(8):e):t||'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="300" height="300"%3E%3Crect fill="%23667eea" width="300" height="300"/%3E%3C/svg%3E',R=e?.customerLogo?T(e.customerLogo):void 0,B=i?.customer.webBackground?i.customer.webBackground.startsWith("http")?i.customer.webBackground.replace("http://","https://"):`https://api.canlimenu.com/Uploads/${i.customer.webBackground.replace("Uploads/","")}`:void 0,E=B?{backgroundImage:`url('${B}')`,backgroundPosition:"center center",backgroundSize:"cover",backgroundRepeat:"no-repeat"}:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},$=i?.customer.productFont||"Inter, sans-serif",L=i?.customer.productTitleColor||"#FFFFFF",W=i?.customer.productDescriptionColor||"rgba(255, 255, 255, 0.88)",A={fontFamily:$,color:L},D={fontFamily:$,color:W};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"product-modal-overlay",onClick:d,style:{display:o?"block":"none",opacity:+!!o}}),(0,t.jsx)("div",{className:"product-modal-container",style:{...E,display:o?"flex":"none",opacity:+!!o,transform:o?"translateX(-50%) translateY(0)":"translateX(-50%) translateY(20px)"},children:(0,t.jsxs)("div",{className:"page-content",children:[(0,t.jsx)("div",{className:"container page-header",style:{marginBottom:0,paddingBottom:0},children:(0,t.jsxs)("a",{href:"#",onClick:e=>{e.preventDefault(),d()},style:{fontSize:"20px",color:"white"},children:[(0,t.jsx)("i",{className:"fa-solid fa-caret-left"})," ",g("back")]})}),(0,t.jsx)("div",{className:"container",style:{paddingBottom:0},children:(0,t.jsx)("div",{className:"current-category-title",children:(0,t.jsx)("h2",{id:"modalCategoryTitle",children:(()=>{if(!h)return"";let e=n.find(e=>e.category.sambaId===h.sambaId),t=e?.category?.titleEnglish||"";return"en"===m&&t?t:h.title})()})})}),(0,t.jsx)("div",{className:"container",style:{paddingBottom:0,overflowX:"visible"},children:(0,t.jsx)("div",{className:"category-slider-section",children:(0,t.jsx)("div",{className:"category-slider",id:"modalCategorySlider",ref:j,children:z.map(e=>{let a=n.find(t=>t.category.sambaId===e.sambaId),i="";if(a&&a.picture){let e=a.picture;if(e.startsWith("http"))i=e.replace("http://","https://");else{let t=e.startsWith("Uploads/")?e.substring(8):e;i=`https://api.canlimenu.com/Uploads/${t}`}}else i=R||'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="300" height="300"%3E%3Crect fill="%23667eea" width="300" height="300"/%3E%3C/svg%3E';let r=e.sambaId===h?.sambaId,s=a?.category?.titleEnglish||"",l="en"===m&&s?s:e.title;return(0,t.jsxs)("a",{href:"#",className:"category-item category-slide"+(r?" active":""),"data-category-id":e.sambaId,onClick:t=>{t.preventDefault(),I(e)},children:[(0,t.jsx)("div",{className:"image-box",children:(0,t.jsx)("img",{src:i,alt:l,loading:"eager"})}),(0,t.jsx)("div",{className:"category-title",children:l})]},e.sambaId)})})})}),(0,t.jsx)("div",{className:"container",style:{paddingTop:0,paddingBottom:"120px"},children:(0,t.jsx)("div",{className:"serach-area",id:"modalProductList",onTouchStart:e=>{w.current=e.changedTouches[0].screenX},onTouchEnd:e=>{S.current=e.changedTouches[0].screenX,(()=>{let e=w.current-S.current;if(Math.abs(e)>50&&z.length>0){let t=z.findIndex(e=>e.sambaId===h?.sambaId);if(-1!==t)if(e>0){let e=(t+1)%z.length;I(z[e])}else{let e=(t-1+z.length)%z.length;I(z[e])}}})()},children:z.map(e=>{let a=e.products||[],i=e.sambaId===h?.sambaId;return(0,t.jsx)("div",{"data-category-container":`cat_${e.sambaId}`,style:{display:i?"block":"none"},children:0===a.length?(0,t.jsx)("div",{style:{padding:"50px",textAlign:"center",color:"white"},children:g("noProductsInCategory")}):(0,t.jsx)("div",{className:"product-list-container",children:(0,t.jsx)("div",{className:"products-no-tabs-wrapper",children:a.map(e=>{let a,i,r=T(e.picture,R),n=v(e,m),s=k(e,m);return(0,t.jsxs)("div",{className:"product-card product-item",style:{cursor:"pointer",position:"relative"},"data-product-id":e.id,"data-samba-product-id":e.sambaId,onClick:()=>c(e),children:[p&&N(e.id)>0&&(0,t.jsx)("span",{className:"cart-badge",style:{position:"absolute",top:"8px",right:"8px",background:"#dc3545",color:"white",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:700,zIndex:10,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:N(e.id)}),p&&((a=x[e.id]||x[e.sambaId])&&a.earnTokens&&!(a.earnTokens<=0)?(0,t.jsx)("div",{style:{position:"absolute",top:"10px",left:"10px",zIndex:10,pointerEvents:"none"},children:(0,t.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"6px 12px",background:"linear-gradient(135deg, #ffc107 0%, #ff9800 100%)",color:"white",borderRadius:"20px",fontSize:"12px",fontWeight:700,boxShadow:"0 4px 12px rgba(255, 193, 7, 0.4), 0 2px 4px rgba(0, 0, 0, 0.2)",border:"2px solid rgba(255, 255, 255, 0.3)"},children:["+",a.earnTokens," jeton"]})}):null),(0,t.jsxs)("div",{className:"product-content",children:[(0,t.jsxs)("div",{className:"product-image",style:{position:"relative"},children:[(0,t.jsx)(C,{productAllergens:e.allergens,className:"allergen-on-image"}),r?(0,t.jsx)("img",{src:r,alt:n,loading:"eager",decoding:"async"}):(0,t.jsx)("div",{className:"no-image-placeholder",children:"üçΩÔ∏è"}),(0,t.jsx)("div",{className:"product-header",children:(0,t.jsx)("h3",{className:"product-name product-title","data-title-tr":e.title,"data-title-en":e.titleEn||e.title,style:A,children:n})})]}),(0,t.jsxs)("div",{className:"product-info",children:[e.price>0&&(0,t.jsx)("div",{className:"price-container moved",children:(0,t.jsxs)("div",{className:"product-price price",children:[(0,t.jsxs)("span",{className:"kdv-label",children:[(0,t.jsx)("span",{children:"KDV"}),(0,t.jsx)("span",{children:"Dahil"})]}),(0,t.jsxs)("span",{className:"price-value",style:{fontFamily:$},children:[e.price.toFixed(2)," ‚Ç∫",p&&((i=x[e.id]||x[e.sambaId])&&i.redeemTokens&&!(i.redeemTokens<=0)?(0,t.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",marginLeft:"8px",padding:"4px 10px",background:"linear-gradient(135deg, #28a745 0%, #20c997 100%)",color:"white",borderRadius:"12px",fontSize:"11px",fontWeight:600,boxShadow:"0 2px 6px rgba(40, 167, 69, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[i.redeemTokens," jeton ile"]}):null)]})]})}),s&&(0,t.jsx)("p",{className:"product-detail","data-detail-tr":e.detail,"data-detail-en":e.detailEn||e.DetailEn||e.detail,style:D,children:s}),p&&(0,t.jsxs)("button",{type:"button",className:"add-to-cart-btn",onClick:t=>((e,t)=>{if(t.stopPropagation(),!p||!u)return;let a=localStorage.getItem(`cart_${u}`),i=a?JSON.parse(a):[],r=i.findIndex(t=>t.productId===e.id);if(r>=0)i[r].quantity+=1;else{let t=T(e.picture,R),a=v(e,m);i.push({id:Date.now(),productId:e.id,sambaId:e.sambaId,name:a,price:e.price,quantity:1,image:t})}localStorage.setItem(`cart_${u}`,JSON.stringify(i)),y(i),window.dispatchEvent(new Event("cartUpdated"));let n=t.currentTarget,s=n.innerHTML,l=n.style.background;n.innerHTML='<i class="fas fa-check"></i> Eklendi!',n.style.background="linear-gradient(135deg, #28a745, #20c997)",setTimeout(()=>{n.innerHTML=s,n.style.background=l},1500)})(e,t),style:{width:"100%",padding:"10px",marginTop:"8px",background:"linear-gradient(135deg, #f39c12 0%, #e67e22 100%)",color:"white",border:"none",borderRadius:"8px",fontSize:"13px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[(0,t.jsx)("i",{className:"fas fa-shopping-cart"}),g("addToCart")]})]})]})]},e.id)})})})},`category-container-${e.sambaId}`)})})})]})})]})}var T=e.i(69688);function R(){let e,i,n,l,o,{menuData:d,customerData:c,selectedProduct:p,isProductDetailModalOpen:u,closeProductDetailModal:x,isTableMode:m,cartKey:g,productTokenSettings:h}=(0,r.useMenu)(),{language:f,t:b}=(0,s.useLanguage)(),[y,j]=(0,a.useState)(1),w=c?.customer.productFont||"Inter, sans-serif",S=c?.customer.productTitleColor||"#FFFFFF",N=c?.customer.productDescriptionColor||"rgba(255, 255, 255, 0.88)";if((0,a.useEffect)(()=>{u&&j(1)},[u]),(0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&u&&x()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[u,x]),!u||!p)return null;let z=(e=>{if(!e){let e=d?.customerLogo;if(e){if(e.startsWith("http"))return e.replace("http://","https://");let t=e.startsWith("Uploads/")?e.substring(8):e;return`https://api.canlimenu.com/Uploads/${t}`}return'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="800" height="600"%3E%3Crect fill="%23667eea" width="800" height="600"/%3E%3C/svg%3E'}if(e.startsWith("http"))return e.replace("http://","https://");let t=e.startsWith("Uploads/")?e.substring(8):e;return`https://api.canlimenu.com/Uploads/${t}`})(p.Picture),I=v(p,f),R=k(p,f),B=k(p,f);return(0,t.jsxs)("div",{className:"single-product-modal",style:{display:u?"flex":"none"},children:[(0,t.jsx)("div",{className:"modal-overlay",onClick:x}),(0,t.jsxs)("div",{className:"modal-content",children:[(0,t.jsx)("button",{className:"modal-close",onClick:x,"aria-label":b("close"),children:(0,t.jsx)("i",{className:"fa-solid fa-xmark"})}),(0,t.jsxs)("div",{className:"modal-image-container",style:{position:"relative"},children:[(0,t.jsx)(C,{productAllergens:p.Allergens??p.allergens,className:"allergen-on-image"}),(0,t.jsx)("img",{src:z,alt:I,className:"modal-product-image",loading:"eager"})]}),(0,t.jsxs)("div",{className:"modal-info-container",children:[(0,t.jsx)("h1",{className:"modal-product-title",style:{fontFamily:w,color:S},children:I}),R&&(0,t.jsx)("p",{className:"modal-product-description",style:{fontFamily:w,color:N},children:R}),B&&(0,t.jsx)("div",{className:"modal-product-detail",children:(0,t.jsx)("p",{style:{fontFamily:w,color:N},children:B})}),m&&(e=p.Id??p.id,i=p.SambaId??p.sambaId,l=(n=e&&h[e]||i&&h[i])&&n.earnTokens>0,o=n&&n.redeemTokens>0,l||o?(0,t.jsxs)("div",{style:{marginBottom:"18px"},children:[l&&(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 14px",borderRadius:"10px",background:"linear-gradient(135deg, rgba(255, 193, 7, 0.2), rgba(255, 152, 0, 0.15))",border:"1px solid rgba(255, 193, 7, 0.3)",backdropFilter:"blur(10px)",marginBottom:o?"8px":"0"},children:[(0,t.jsx)("span",{style:{fontSize:"20px"},children:"ü™ô"}),(0,t.jsx)("span",{style:{color:"white",fontSize:"0.95rem",fontWeight:500},children:b("earnTokensMessage").replace("{count}",String(n.earnTokens))})]}),o&&(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 14px",borderRadius:"10px",background:"linear-gradient(135deg, rgba(40, 167, 69, 0.2), rgba(32, 201, 151, 0.15))",border:"1px solid rgba(40, 167, 69, 0.3)",backdropFilter:"blur(10px)"},children:[(0,t.jsx)("span",{style:{fontSize:"20px"},children:"ü™ô"}),(0,t.jsx)("span",{style:{color:"white",fontSize:"0.95rem",fontWeight:500},children:b("redeemTokensMessage").replace("{count}",String(n.redeemTokens))})]})]}):null),(0,t.jsx)("div",{className:"modal-product-price",children:(p.Price??p.price??0)>0?`${(p.Price??p.price??0).toFixed(2)} TL`:b("noPriceInfo")}),m&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"15px",margin:"20px 0"},children:[(0,t.jsx)("button",{onClick:()=>j(Math.max(1,y-1)),style:{width:"40px",height:"40px",border:"2px solid #ddd",background:"white",borderRadius:"8px",cursor:"pointer",fontSize:"18px",fontWeight:600,color:"#666"},children:"-"}),(0,t.jsx)("span",{style:{fontSize:"20px",fontWeight:600,minWidth:"40px",textAlign:"center",color:"white"},children:y}),(0,t.jsx)("button",{onClick:()=>j(y+1),style:{width:"40px",height:"40px",border:"2px solid #28a745",background:"#28a745",color:"white",borderRadius:"8px",cursor:"pointer",fontSize:"18px",fontWeight:600},children:"+"})]}),(0,t.jsxs)("button",{className:"modal-add-to-cart-btn",onClick:()=>{if(!p||!m||!g||!d)return;let e=d.customerTitle||"unknown",t=(0,T.loadCart)(g,e),a=p.Id??p.id,i=t.findIndex(e=>e.productId===a);if(i>=0)t[i].quantity+=y;else{let e=v(p,f);t.push({id:Date.now(),productId:a,sambaId:p.SambaId??p.sambaId,name:e,price:p.Price??p.price??0,quantity:y,image:p.Picture??p.picture})}(0,T.saveCart)(g,t,e),window.dispatchEvent(new Event("cartUpdated"));let r=v(p,f);alert(`${r} ${b("addedToCart")}`),x()},children:[(0,t.jsx)("i",{className:"fa-solid fa-cart-plus"}),(0,t.jsx)("span",{children:b("addToCart")})]})]})]})]})]})}var B=e.i(82417),E=e.i(807);let $={tr:B.default,en:E.default};function L(e,t,a){var i;let r=(i=$[e],t.split(".").reduce((e,t)=>e?.[t],i)||t);return a?Object.entries(a).reduce((e,[t,a])=>e.replace(RegExp(`{{${t}}}`,"g"),String(a)),r):r}function W(){let e,t=localStorage.getItem("locale");return"tr"===t||"en"===t?t:"en"===(e=navigator.language.split("-")[0])||"tr"===e?e:"tr"}async function A(e){let t=W();try{let a=await fetch("/api/game/submit",{method:"POST",headers:{"Content-Type":"application/json","Accept-Language":t},body:JSON.stringify(e)}),i=await a.json();if(a.ok&&i.success)return{success:!0,message:i.message||L(t,"api.success.scoreSubmitted")};return console.error("‚ùå Skor kaydedilemedi:",i),{success:!1,message:i.message||L(t,"game.errors.scoreNotSubmitted")}}catch(e){return console.error("‚ùå Skor submit hatasƒ±:",e),{success:!1,message:L(t,"game.messages.connectionError")}}}async function D(e,t=10){let a=W();try{let i=await fetch(`/api/game/leaderboard/${e}/${t}`,{headers:{"Accept-Language":a}});if(i.ok)return await i.json();return console.error("‚ùå",L(a,"game.errors.leaderboardNotLoaded")),[]}catch(e){return console.error("‚ùå Leaderboard fetch hatasƒ±:",e),[]}}class M{size;cells;constructor(e){this.size=e,this.cells=[];for(let t=0;t<e;t++){this.cells[t]=[];for(let a=0;a<e;a++)this.cells[t][a]=null}}randomAvailableCell(){let e=this.availableCells();return e.length?e[Math.floor(Math.random()*e.length)]:null}availableCells(){let e=[];for(let t=0;t<this.size;t++)for(let a=0;a<this.size;a++)this.cells[t][a]||e.push({x:t,y:a});return e}cellsAvailable(){return this.availableCells().length>0}cellContent(e){return this.withinBounds(e)?this.cells[e.x][e.y]:null}insertTile(e){this.cells[e.x][e.y]=e}removeTile(e){this.cells[e.x][e.y]=null}withinBounds(e){return e.x>=0&&e.x<this.size&&e.y>=0&&e.y<this.size}serialize(){let e=[];for(let t=0;t<this.size;t++)for(let a=0;a<this.size;a++){let i=this.cells[t][a];i&&e.push({position:{x:t,y:a},value:i.value})}return e}}function q({onGameOver:e,onGameWon:i,playerNickname:r,customerCode:n}){let[s,l]=(0,a.useState)(new M(4)),[o,d]=(0,a.useState)([]),[c,p]=(0,a.useState)(0),[u,x]=(0,a.useState)(0),[m,g]=(0,a.useState)(!1),[h,f]=(0,a.useState)(!1),[b,y]=(0,a.useState)(!1),[j,v]=(0,a.useState)(!1),[k,w]=(0,a.useState)(""),[S,N]=(0,a.useState)([]),[z,C]=(0,a.useState)(!1),[I,T]=(0,a.useState)(!0),[R,B]=(0,a.useState)(0),[E,$]=(0,a.useState)(window.innerWidth),L=(0,a.useRef)(0);(0,a.useEffect)(()=>{let e=localStorage.getItem("bestScore_2048");e&&x(parseInt(e));let t=localStorage.getItem("leaderboardVisibility_2048");if(null!==t&&T("true"===t),W(),F(),console.log("üéÆ Game2048 mounted - initialNickname:",r),""===r&&(console.log("üóëÔ∏è Logout tespit edildi - localStorage temizleniyor"),localStorage.removeItem("playerNickname_2048")),void 0!==r&&r.trim())console.log("‚úÖ Giri≈ü yapmƒ±≈ü kullanƒ±cƒ±:",r),w(r),localStorage.setItem("playerNickname_2048",r);else{let e=localStorage.getItem("playerNickname_2048");e&&e.trim()?(console.log("üì¶ LocalStorage nickname:",e),w(e)):(console.log("‚ö†Ô∏è Nickname yok - Modal g√∂steriliyor"),v(!0))}},[r]),(0,a.useEffect)(()=>{let e=()=>{$(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let W=async()=>{N(await D("2048",10))};(0,a.useEffect)(()=>{c>u&&(x(c),localStorage.setItem("bestScore_2048",c.toString()))},[c,u]),(0,a.useEffect)(()=>{!(o.length>0)||m||h||q()},[o,c,m,h]);let q=()=>{let e={grid:s.serialize(),score:c,timestamp:Date.now()};localStorage.setItem("gameState_2048",JSON.stringify(e))},F=()=>{let e=localStorage.getItem("gameState_2048");if(e)try{let t=JSON.parse(e);if(Date.now()-t.timestamp<36e5){let e=new M(4);t.grid.forEach(t=>{let a={id:L.current++,value:t.value,x:t.position.x,y:t.position.y};e.insertTile(a)}),l(e),p(t.score);return}}catch(e){console.error("Failed to restore game state",e)}O()},O=(0,a.useCallback)(()=>{let e=new M(4);l(e),d([]),p(0),g(!1),f(!1),y(!1),C(!1),B(0),L.current=0,localStorage.removeItem("gameState_2048"),setTimeout(()=>{U(e)},100)},[]),U=e=>{P(e),setTimeout(()=>P(e),100)},P=e=>{let t=e.randomAvailableCell();if(t){let a=.9>Math.random()?2:4,i={id:L.current++,value:a,x:t.x,y:t.y,isNew:!0};e.insertTile(i),d(t=>[...t.filter(t=>e.cellContent({x:t.x,y:t.y})),i])}},H=e=>({0:{x:0,y:-1},1:{x:1,y:0},2:{x:0,y:1},3:{x:-1,y:0}})[e],G=e=>{if(m||h)return;let t=H(e),a=(e=>{let t={x:[],y:[]};for(let e=0;e<s.size;e++)t.x.push(e),t.y.push(e);return 1===e.x&&(t.x=t.x.reverse()),1===e.y&&(t.y=t.y.reverse()),t})(t),i=!1,r=0;if(s.cells.forEach(e=>{e.forEach(e=>{e&&(e.mergedFrom=null,e.previousPosition={x:e.x,y:e.y})})}),a.x.forEach(e=>{a.y.forEach(a=>{let n=s.cellContent({x:e,y:a});if(n){let l=((e,t,a)=>{let i,r={x:e.x,y:e.y};do r={x:(i=r).x+t.x,y:i.y+t.y};while(a.withinBounds(r)&&!a.cellContent(r))return{farthest:i,next:r}})({x:e,y:a},t,s),o=s.cellContent(l.next);if(o&&o.value===n.value&&!o.mergedFrom){let e={id:L.current++,value:2*n.value,x:l.next.x,y:l.next.y,mergedFrom:[n,o],isMerged:!0};if(s.removeTile(n),s.removeTile(o),s.insertTile(e),n.x=l.next.x,n.y=l.next.y,r+=e.value,2048===e.value&&!h){let e=c+r;setTimeout(()=>{f(!0),y(!0),V(e,!0)},200)}i=!0}else(l.farthest.x!==e||l.farthest.y!==a)&&(s.removeTile(n),n.x=l.farthest.x,n.y=l.farthest.y,s.insertTile(n),i=!0)}})}),i){P(s);let e=[];for(let t=0;t<4;t++)for(let a=0;a<4;a++){let i=s.cells[t][a];i&&e.push(i)}d([...e]);let t=c+r;r>0&&(p(t),B(r),setTimeout(()=>B(0),600)),setTimeout(()=>{s.cells.forEach(e=>{e.forEach(e=>{e&&(e.isNew=!1,e.isMerged=!1)})})},400),X(s)||setTimeout(()=>{g(!0),y(!0),V(t,!1)},200)}},X=e=>e.cellsAvailable()||J(e),J=e=>{for(let t=0;t<e.size;t++)for(let a=0;a<e.size;a++){let i=e.cellContent({x:t,y:a});if(i)for(let r=0;r<4;r++){let n=H(r),s={x:t+n.x,y:a+n.y},l=e.cellContent(s);if(l&&l.value===i.value)return!0}}return!1};(0,a.useEffect)(()=>{let e=e=>{let t={ArrowUp:0,w:0,W:0,ArrowRight:1,d:1,D:1,ArrowDown:2,s:2,S:2,ArrowLeft:3,a:3,A:3};void 0!==t[e.key]&&(e.preventDefault(),G(t[e.key]))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[s,m,h,c]);let K=(0,a.useRef)({x:0,y:0}),V=async(t,a)=>{a?i?.(t):e?.(t),!k&&t>0?v(!0):k&&t>0&&!z&&await Q(t)},Q=async e=>{!e||z||(await A({GameType:"2048",PlayerNickname:k,Score:e,DeviceType:/mobile/i.test(navigator.userAgent)?"Mobile":"Desktop",VenueCode:n||"demo"})).success&&(C(!0),await W())},_=async()=>{k.trim()?k.trim().length<2?alert("Takma ad en az 2 karakter olmalƒ±dƒ±r!"):(localStorage.setItem("playerNickname_2048",k.trim()),v(!1),O(),await Q(c)):alert("L√ºtfen bir takma ad girin!")};return(0,t.jsxs)("div",{className:"game-2048-container",children:[(0,t.jsxs)("div",{className:"game-2048-header",children:[(0,t.jsx)("h1",{className:"game-2048-title",children:"2048"}),(0,t.jsxs)("div",{className:"game-2048-scores",children:[(0,t.jsxs)("div",{className:"game-2048-score-box",children:[(0,t.jsx)("div",{className:"game-2048-score-label",children:"Skor"}),(0,t.jsx)("div",{className:"game-2048-score-value",children:c.toLocaleString("tr-TR")}),R>0&&(0,t.jsxs)("div",{className:"game-2048-score-increment",children:["+",R.toLocaleString("tr-TR")]})]}),(0,t.jsxs)("div",{className:"game-2048-score-box",style:{background:"linear-gradient(135deg, rgba(255, 193, 7, 0.9), rgba(255, 152, 0, 0.9))"},children:[(0,t.jsx)("div",{className:"game-2048-score-label",children:"En ƒ∞yi"}),(0,t.jsx)("div",{className:"game-2048-score-value",children:u.toLocaleString("tr-TR")})]})]})]}),(0,t.jsx)("div",{className:"game-2048-controls",children:(0,t.jsxs)("p",{className:"game-2048-instructions",children:["Karolarƒ± birle≈ütirerek ",(0,t.jsx)("strong",{style:{color:"#667eea"},children:"2048"})," sayƒ±sƒ±na ula≈ü!"]})}),(0,t.jsxs)("div",{className:"game-2048-board",onTouchStart:e=>{K.current={x:e.touches[0].clientX,y:e.touches[0].clientY}},onTouchEnd:e=>{let t={x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY},a=t.x-K.current.x,i=t.y-K.current.y;30>Math.abs(a)&&30>Math.abs(i)||(Math.abs(a)>Math.abs(i)?G(a>0?1:3):G(2*(i>0)))},children:[(0,t.jsx)("div",{className:"game-2048-grid-bg",children:Array.from({length:16}).map((e,a)=>(0,t.jsx)("div",{className:"game-2048-grid-cell"},a))}),(0,t.jsx)("div",{className:"game-2048-tiles",children:o.map(e=>(0,t.jsx)("div",{className:"game-2048-tile",style:((e,t)=>{let a=10;E<=360?a=6:E<=480?a=8:E<=768&&(a=10);if(E<=360){let i=(E-20-20-3*a)/4+a;return{transform:`translate(${e*i}px, ${t*i}px)`}}if(E<=480){let i=(E-30-24-3*a)/4+a;return{transform:`translate(${e*i}px, ${t*i}px)`}}if(E<=768){let i=(Math.min(E-40,450)-30-3*a)/4+a;return{transform:`translate(${e*i}px, ${t*i}px)`}}let i=(450-3*a)/4+a;return{transform:`translate(${e*i}px, ${t*i}px)`}})(e.x,e.y),children:(0,t.jsx)("div",{className:`game-2048-tile-inner tile-${e.value} ${e.isNew?"tile-new":""} ${e.isMerged?"tile-merged":""}`,children:e.value})},e.id))}),b&&(0,t.jsxs)("div",{className:"game-2048-message",children:[(0,t.jsx)("h2",{className:`game-2048-message-title ${h?"won":"lost"}`,children:h?"Kazandƒ±n! üéâ":"Oyun Bitti!"}),(0,t.jsxs)("p",{className:"game-2048-message-score",children:["Skorun: ",(0,t.jsx)("strong",{style:{color:"#ffd700",fontSize:"32px"},children:c.toLocaleString("tr-TR")})]}),(0,t.jsx)("button",{onClick:O,className:"game-2048-message-btn",children:"Tekrar Oyna"})]})]}),S.length>0&&(0,t.jsx)("div",{className:"game-leaderboard-toggle",children:(0,t.jsx)("button",{onClick:()=>{let e=!I;T(e),localStorage.setItem("leaderboardVisibility_2048",e.toString())},className:"game-leaderboard-toggle-btn",children:I?"üèÜ Sƒ±ralamayƒ± Gizle":"üèÜ Sƒ±ralamayƒ± G√∂ster"})}),I&&S.length>0&&(0,t.jsxs)("div",{className:"game-leaderboard",children:[(0,t.jsx)("h3",{className:"game-leaderboard-title",children:"üèÜ En ƒ∞yi Skorlar"}),(0,t.jsx)("div",{className:"game-leaderboard-list",children:S.slice(0,5).map(e=>(0,t.jsxs)("div",{className:"game-leaderboard-item",children:[(0,t.jsxs)("div",{className:"game-leaderboard-info",children:[(0,t.jsx)("div",{className:`game-leaderboard-rank rank-${e.rank<=3?e.rank:"other"}`,children:1===e.rank?"ü•á":2===e.rank?"ü•à":3===e.rank?"ü•â":e.rank}),(0,t.jsx)("span",{className:"game-leaderboard-name",children:e.playerNickname})]}),(0,t.jsx)("span",{className:"game-leaderboard-score",children:e.score.toLocaleString()})]},e.rank))})]}),j&&(0,t.jsx)("div",{className:"game-nickname-modal",children:(0,t.jsxs)("div",{className:"game-nickname-modal-content",children:[(0,t.jsx)("h2",{className:"game-nickname-modal-title",children:"üéÆ Skorunu Kaydet"}),(0,t.jsx)("p",{className:"game-nickname-modal-desc",children:"Sƒ±ralama tablosuna girmek i√ßin bir takma ad girin:"}),(0,t.jsx)("input",{type:"text",value:k,onChange:e=>w(e.target.value),placeholder:"Takma adƒ±n",maxLength:20,className:"game-nickname-input",onKeyDown:e=>"Enter"===e.key&&_()}),(0,t.jsx)("div",{className:"game-nickname-buttons",children:(0,t.jsx)("button",{onClick:_,className:"game-nickname-btn primary",children:"Kaydet"})})]})})]})}function F({onClose:e,playerNickname:i,customerCode:r}){let[n,s]=(0,a.useState)(null),[l,u]=(0,a.useState)(!1),[x,m]=(0,a.useState)("setup"),[g,h]=(0,a.useState)(i||""),[f,b]=(0,a.useState)("normal"),[y,j]=(0,a.useState)(5),[v,k]=(0,a.useState)(!0),[w,S]=(0,a.useState)(""),[N,z]=(0,a.useState)(""),[C,I]=(0,a.useState)([]),[T,R]=(0,a.useState)(1),[B,E]=(0,a.useState)(null),[$,L]=(0,a.useState)(!1),[W,A]=(0,a.useState)("Bekliyor..."),[D,M]=(0,a.useState)(!1),[q,F]=(0,a.useState)(""),[O,U]=(0,a.useState)(""),[P,H]=(0,a.useState)({}),[G,X]=(0,a.useState)(!1),[J,K]=(0,a.useState)(""),[V,Q]=(0,a.useState)([]),_=(0,a.useRef)(null);(0,a.useEffect)(()=>((async()=>{let e=new d.HubConnectionBuilder().withUrl("https://game.canlimenu.com/gamehub",{transport:c.HttpTransportType.WebSockets,skipNegotiation:!0}).withAutomaticReconnect({nextRetryDelayInMilliseconds:()=>1e4*Math.random()}).configureLogging(p.LogLevel.Error).build();e.on("RoomCreated",Z),e.on("GameJoined",ee),e.on("JoinedRoom",et),e.on("PlayerJoined",ea),e.on("PlayerLeft",ei),e.on("GameStarted",er),e.on("RoundStarted",en),e.on("PlayerMadeChoice",es),e.on("RoundResult",el),e.on("GameFinished",eo),e.on("Error",ed);try{await e.start(),console.log("SignalR Connected"),u(!0),s(e),_.current=e;let t=Y();z(t)}catch(e){console.error("SignalR Connection Error:",e)}})(),()=>{_.current&&_.current.stop()}),[]);let Y=()=>"player_"+Math.random().toString(36).substr(2,9),Z=e=>{console.log("Room created:",e),e.success?(S(e.roomId),m("waiting"),L(!0),A("Diƒüer oyuncularƒ±n katƒ±lmasƒ± bekleniyor...")):alert(e.message||"Oyun olu≈üturulamadƒ±")},ee=e=>{console.log("Game joined:",e),e.success&&(S(e.roomId),m("waiting"),L(!1))},et=e=>{console.log("Joined room:",e),e.players&&I(e.players)},ea=e=>{console.log("Player joined:",e),e.players&&I(e.players)},ei=e=>{console.log("Player left:",e),e.players&&I(e.players)},er=e=>{console.log("Game started:",e),m("playing"),R(1)},en=e=>{console.log("Round started:",e),m("playing"),E(null),M(!1),H({})},es=e=>{console.log("Player made choice:",e)},el=e=>{console.log("Round result:",e);let{result:t,players:a}=e;M(!0);let i="draw",r=t.resultText;t.isDraw?r="ü§ù Berabere!":t.winnerId===N?(i="win",r="üéâ Kazandƒ±nƒ±z!"):(i="lose",r="üò¢ Kaybettiniz!"),F(r),U(i),t.choices&&H(t.choices),a&&I(a),m("result")},eo=e=>{console.log("Game finished:",e);let{winner:t,finalScores:a}=e;m("finished"),Q(a||C),t?t.id===N?K("üéä Tebrikler! Oyunu Kazandƒ±nƒ±z! üéä"):K(`üèÜ ${t.name} Oyunu Kazandƒ±!`):K("ü§ù Oyun Berabere Bitti!"),X(!0)},ed=e=>{console.error("Game error:",e),alert(e.message||"Bir hata olu≈ütu")},ec=async e=>{if(e.preventDefault(),!g.trim())return void alert("L√ºtfen bir takma ad girin");if(!n||n.state!==o.HubConnectionState.Connected)return void alert("Baƒülantƒ± kurulamadƒ±. L√ºtfen sayfayƒ± yenileyin.");let t=Math.floor(1e3+9e3*Math.random()).toString(),a=r||"demo";try{"tournament"===f?await n.invoke("CreateTournament",t,a,N,g,4,v):await n.invoke("CreateRoom",t,a,N,g,{maxRounds:y,maxPlayers:"tournament"===f?4:2,isTournament:"tournament"===f},v)}catch(e){console.error("Create game error:",e),alert("Oyun olu≈üturulamadƒ±")}},ep=async()=>{if(n&&$)try{await n.invoke("StartGame",w)}catch(e){console.error("Start game error:",e)}},eu=async e=>{if(!B&&n){E(e);try{await n.invoke("MakeChoice",w,N,e)}catch(e){console.error("Make choice error:",e)}}},ex=async()=>{if(n)try{await n.invoke("LeaveRoom",w,N),m("setup"),S(""),I([])}catch(e){console.error("Leave game error:",e)}},em=C.find(e=>e.id===N),eg=C.find(e=>e.id!==N);return"setup"===x?(0,t.jsxs)("div",{className:"rps-setup-modal",children:[(0,t.jsx)("h2",{children:"Ta≈ü Kaƒüƒ±t Makas"}),(0,t.jsxs)("form",{onSubmit:ec,children:[(0,t.jsxs)("div",{className:"rps-form-group",children:[(0,t.jsx)("label",{htmlFor:"nickname",children:"Takma Ad"}),(0,t.jsx)("input",{type:"text",id:"nickname",value:g,onChange:e=>h(e.target.value),placeholder:"Takma adƒ±nƒ±zƒ± girin",maxLength:20,required:!0})]}),(0,t.jsxs)("div",{className:"rps-lobby-switch-container",children:[(0,t.jsxs)("div",{className:"rps-lobby-switch-label",children:[(0,t.jsx)("div",{className:"rps-lobby-switch-title",children:"üèõÔ∏è Lobby'de G√∂ster"}),(0,t.jsx)("div",{className:"rps-lobby-switch-desc",children:"Diƒüer oyuncular oyununuza katƒ±labilir"})]}),(0,t.jsxs)("label",{className:"rps-toggle-switch",children:[(0,t.jsx)("input",{type:"checkbox",checked:v,onChange:e=>k(e.target.checked)}),(0,t.jsx)("span",{className:"rps-toggle-slider"})]})]}),(0,t.jsxs)("div",{className:"rps-mode-container",children:[(0,t.jsx)("div",{className:"rps-mode-title",children:"Oyun Modu"}),(0,t.jsxs)("div",{className:"rps-mode-buttons",children:[(0,t.jsx)("button",{type:"button",className:`rps-mode-btn ${"normal"===f?"active":""}`,onClick:()=>b("normal"),children:"Normal Oyun (2 Ki≈üi)"}),(0,t.jsx)("button",{type:"button",className:`rps-mode-btn ${"tournament"===f?"active":""}`,onClick:()=>b("tournament"),children:"Turnuva (4 Ki≈üi)"})]})]}),"normal"===f&&(0,t.jsxs)("div",{className:"rps-rounds-container",children:[(0,t.jsx)("div",{className:"rps-rounds-title",children:"Ka√ß El Oynanacak?"}),(0,t.jsx)("div",{className:"rps-round-buttons",children:[3,5,7,10].map(e=>(0,t.jsxs)("button",{type:"button",className:`rps-round-btn ${y===e?"active":""}`,onClick:()=>j(e),children:[e," El"]},e))})]}),"tournament"===f&&(0,t.jsxs)("div",{className:"rps-mode-container",children:[(0,t.jsx)("div",{className:"rps-mode-title",children:"Turnuva (4 Ki≈üi)"}),(0,t.jsxs)("div",{style:{background:"rgba(52, 152, 219, 0.1)",padding:"15px",borderRadius:"8px",borderLeft:"4px solid #3498db"},children:[(0,t.jsx)("p",{style:{margin:"5px 0",fontSize:"14px",color:"#bdc3c7"},children:"‚Ä¢ Her ma√ß 5 el (best of 5)"}),(0,t.jsx)("p",{style:{margin:"5px 0",fontSize:"14px",color:"#bdc3c7"},children:"‚Ä¢ E≈üle≈ümeler sƒ±rayla oynanƒ±r"}),(0,t.jsx)("p",{style:{margin:"5px 0",fontSize:"14px",color:"#bdc3c7"},children:"‚Ä¢ Diƒüer oyuncular izleyebilir"}),(0,t.jsx)("p",{style:{margin:"5px 0",fontSize:"14px",color:"#bdc3c7"},children:"‚Ä¢ Final sƒ±ralamasƒ± g√∂sterilir"})]})]}),(0,t.jsx)("button",{type:"submit",className:"rps-create-game-btn",disabled:!l,children:l?"Oyun Olu≈ütur":"Baƒülanƒ±yor..."})]})]}):(0,t.jsxs)("div",{className:"rps-game-container",children:[w&&(0,t.jsxs)("div",{className:"rps-room-info",children:[(0,t.jsx)("div",{className:"rps-room-code",children:w}),(0,t.jsx)("div",{children:"Oyun Kodu ile arkada≈ülarƒ±nƒ±zƒ± davet edin!"})]}),(0,t.jsxs)("div",{className:"rps-players-section",children:[(0,t.jsxs)("div",{className:`rps-player-card ${"playing"===x&&em?"active":""}`,children:[(0,t.jsx)("div",{className:"rps-player-name",children:em?.name||"Bekliyor..."}),(0,t.jsx)("div",{className:"rps-player-score",children:em?.score||0})]}),(0,t.jsx)("div",{className:"rps-vs-text",children:"VS"}),(0,t.jsxs)("div",{className:`rps-player-card ${"playing"===x&&eg?"active":""}`,children:[(0,t.jsx)("div",{className:"rps-player-name",children:eg?.name||"Bekliyor..."}),(0,t.jsx)("div",{className:"rps-player-score",children:eg?.score||0})]})]}),"waiting"===x&&(0,t.jsxs)("div",{className:"rps-waiting-section",style:{display:"block"},children:[(0,t.jsx)("div",{className:"rps-waiting-text",children:W}),(0,t.jsx)("div",{className:"rps-spinner"})]}),"playing"===x&&!D&&(0,t.jsxs)("div",{className:"rps-choice-section",children:[(0,t.jsxs)("div",{className:"rps-round-info",children:["Raund ",T," / ",y]}),(0,t.jsxs)("div",{className:"rps-choices-container",children:[(0,t.jsxs)("button",{className:`rps-choice-btn ${"rock"===B?"selected":""} ${B?"disabled":""}`,onClick:()=>eu("rock"),disabled:!!B,children:[(0,t.jsx)("div",{className:"rps-choice-icon",children:"‚úä"}),(0,t.jsx)("div",{className:"rps-choice-text",children:"Ta≈ü"})]}),(0,t.jsxs)("button",{className:`rps-choice-btn ${"paper"===B?"selected":""} ${B?"disabled":""}`,onClick:()=>eu("paper"),disabled:!!B,children:[(0,t.jsx)("div",{className:"rps-choice-icon",children:"‚úã"}),(0,t.jsx)("div",{className:"rps-choice-text",children:"Kaƒüƒ±t"})]}),(0,t.jsxs)("button",{className:`rps-choice-btn ${"scissors"===B?"selected":""} ${B?"disabled":""}`,onClick:()=>eu("scissors"),disabled:!!B,children:[(0,t.jsx)("div",{className:"rps-choice-icon",children:"‚úåÔ∏è"}),(0,t.jsx)("div",{className:"rps-choice-text",children:"Makas"})]})]})]}),D&&(0,t.jsxs)("div",{className:"rps-result-section",style:{display:"block"},children:[(0,t.jsx)("div",{className:`rps-result-text ${O}`,children:q}),(0,t.jsx)("div",{className:"rps-player-choices",children:C.map(e=>(0,t.jsxs)("div",{className:"rps-player-choice",children:[(0,t.jsx)("div",{className:"rps-player-choice-name",children:e.name}),(0,t.jsx)("div",{className:"rps-player-choice-icon",children:P[e.id]?(e=>{switch(e){case"rock":return"‚úä";case"paper":return"‚úã";case"scissors":return"‚úåÔ∏è"}})(P[e.id]):"?"})]},e.id))})]}),(0,t.jsxs)("div",{className:"rps-game-controls",children:["waiting"===x&&$&&C.length>=2&&(0,t.jsx)("button",{className:"rps-control-btn start",onClick:ep,children:"Oyunu Ba≈ülat"}),(0,t.jsx)("button",{className:"rps-control-btn leave",onClick:ex,children:"Odadan Ayrƒ±l"}),e&&(0,t.jsx)("button",{className:"rps-control-btn back",onClick:e,children:"Geri"})]}),G&&(0,t.jsx)("div",{className:"rps-game-over-modal",children:(0,t.jsxs)("div",{className:"rps-game-over-content",children:[(0,t.jsx)("div",{className:"rps-game-over-title",children:"üéÆ Oyun Bitti!"}),(0,t.jsx)("div",{className:"rps-game-over-message",children:J}),(0,t.jsxs)("div",{className:"rps-game-over-scores",children:[(0,t.jsx)("h3",{style:{marginBottom:"15px",color:"#776e65"},children:"Final Skorlarƒ±:"}),V.map((e,a)=>(0,t.jsxs)("div",{style:{padding:"10px",margin:"5px 0",background:e.id===N?"rgba(52, 152, 219, 0.2)":"transparent",borderRadius:"5px"},children:[a+1,". ",e.name,": ",e.score," puan"]},e.id))]}),(0,t.jsxs)("div",{className:"rps-game-over-controls",children:[(0,t.jsx)("button",{className:"rps-play-again-btn",onClick:()=>{X(!1),m("setup"),S(""),I([]),E(null),M(!1),R(1)},children:"üîÑ Tekrar Oyna"}),e&&(0,t.jsx)("button",{className:"rps-control-btn back",onClick:e,style:{padding:"15px 30px",fontSize:"16px"},children:"Ana Men√ºye D√∂n"})]})]})})]})}function O({onClose:e,currentUser:i,customerCode:r}){let[n,s]=(0,a.useState)(null),[l,u]=(0,a.useState)(!1),[x,m]=(0,a.useState)("setup"),[g,h]=(0,a.useState)(10),[f,b]=(0,a.useState)(!0),y=i?.nickName||i?.nickname||i?.firstName||"Oyuncu",[j,v]=(0,a.useState)(""),[k,w]=(0,a.useState)(""),[S,N]=(0,a.useState)([]),[z,C]=(0,a.useState)(!1),[I,T]=(0,a.useState)(null),[R,B]=(0,a.useState)(0),[E,$]=(0,a.useState)(g),[L,W]=(0,a.useState)(null),[A,D]=(0,a.useState)(null),[M,q]=(0,a.useState)(!1),[F,O]=(0,a.useState)(20),[U,P]=(0,a.useState)(null),[H,G]=(0,a.useState)(!1),[X,J]=(0,a.useState)(""),[K,V]=(0,a.useState)([]),Q=(0,a.useRef)(null);(0,a.useEffect)(()=>((async()=>{let e=new d.HubConnectionBuilder().withUrl("https://game.canlimenu.com/gamehub",{transport:c.HttpTransportType.WebSockets,skipNegotiation:!0}).withAutomaticReconnect().configureLogging(p.LogLevel.Error).build();e.on("QuizRoomCreated",Y),e.on("QuizJoined",Z),e.on("PlayerJoinedQuiz",ee),e.on("QuizStarted",ea),e.on("NextQuestion",ei),e.on("AnswerSubmitted",er),e.on("QuestionResults",en),e.on("QuizFinished",es),e.on("PlayerLeft",et),e.on("Error",el);try{await e.start(),console.log("SignalR Connected"),u(!0),s(e),Q.current=e;let t=_();w(t)}catch(e){console.error("SignalR Connection Error:",e)}})(),()=>{U&&clearInterval(U),Q.current&&Q.current.stop()}),[]),(0,a.useEffect)(()=>{if("playing"===x&&!M&&F>0){let e=setInterval(()=>{O(t=>t<=1?(clearInterval(e),null===L&&n&&ec(-1),0):t-1)},1e3);return P(e),()=>clearInterval(e)}},[x,M,F]);let _=()=>"player_"+Math.random().toString(36).substr(2,9),Y=e=>{console.log("Quiz room created:",e),e.success?(v(e.roomId),m("waiting"),C(!0)):alert(e.message||"Quiz olu≈üturulamadƒ±")},Z=e=>{console.log("Quiz joined:",e),e.success&&(v(e.roomId),m("waiting"),C(!1))},ee=e=>{console.log("Player joined:",e),e.players&&N(e.players)},et=e=>{console.log("Player left:",e),e.players&&N(e.players)},ea=e=>{console.log("Quiz started:",e),m("playing"),$(e.totalQuestions||g)},ei=e=>{console.log("Next question:",e);let{question:t,questionNumber:a}=e;T({id:t.id,text:t.text,answers:t.answers}),B(a),W(null),D(null),q(!1),O(20),N(e=>e.map(e=>({...e,answered:!1})))},er=e=>{console.log("Answer submitted:",e),N(t=>t.map(t=>t.id===e.playerId?{...t,answered:!0}:t))},en=e=>{console.log("Question results:",e);let{correctAnswer:t,players:a}=e;D(t),q(!0),N(a),U&&clearInterval(U)},es=e=>{console.log("Quiz finished:",e);let{winner:t,finalScores:a}=e;m("finished"),V(a||S),t?t.id===k?J("üéä Tebrikler! Quizi Kazandƒ±nƒ±z! üéä"):J(`üèÜ ${t.name} Quizi Kazandƒ±!`):J("Quiz Tamamlandƒ±!"),G(!0)},el=e=>{console.error("Quiz error:",e),alert(e.message||"Bir hata olu≈ütu")},eo=async e=>{if(e.preventDefault(),!n||n.state!==o.HubConnectionState.Connected)return void alert("Baƒülantƒ± kurulamadƒ±. L√ºtfen sayfayƒ± yenileyin.");let t=Math.floor(1e3+9e3*Math.random()).toString();try{await n.invoke("CreateQuizRoom",t,r||"demo",k,y,{questionCount:g,maxPlayers:8},f)}catch(e){console.error("Create quiz error:",e),alert("Quiz olu≈üturulamadƒ±")}},ed=async()=>{if(n&&z)try{await n.invoke("StartQuiz",j)}catch(e){console.error("Start quiz error:",e)}},ec=async e=>{if(null===L&&n){W(e);try{await n.invoke("SubmitAnswer",j,k,e)}catch(e){console.error("Submit answer error:",e)}}},ep=async()=>{if(n)try{await n.invoke("LeaveRoom",j,k),m("setup"),v(""),N([])}catch(e){console.error("Leave quiz error:",e)}};return(S.find(e=>e.id===k),"setup"===x)?y&&(i?.nickName||i?.nickname)?(0,t.jsxs)("div",{className:"quiz-setup-modal",children:[(0,t.jsx)("h2",{children:"üìö Bilgi Yarƒ±≈ümasƒ±"}),(0,t.jsxs)("form",{onSubmit:eo,children:[(0,t.jsxs)("div",{style:{marginBottom:"20px",padding:"15px",background:"rgba(102, 126, 234, 0.1)",borderRadius:"8px",textAlign:"center"},children:[(0,t.jsx)("div",{style:{fontSize:"14px",color:"#bdc3c7",marginBottom:"5px"},children:"Oyuncu"}),(0,t.jsx)("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#667eea"},children:y})]}),(0,t.jsxs)("div",{className:"rps-lobby-switch-container",children:[(0,t.jsxs)("div",{className:"rps-lobby-switch-label",children:[(0,t.jsx)("div",{className:"rps-lobby-switch-title",children:"üèõÔ∏è Lobby'de G√∂ster"}),(0,t.jsx)("div",{className:"rps-lobby-switch-desc",children:"Diƒüer oyuncular quiz'inize katƒ±labilir"})]}),(0,t.jsxs)("label",{className:"rps-toggle-switch",children:[(0,t.jsx)("input",{type:"checkbox",checked:f,onChange:e=>b(e.target.checked)}),(0,t.jsx)("span",{className:"rps-toggle-slider"})]})]}),(0,t.jsx)("div",{className:"quiz-options",children:(0,t.jsx)("div",{className:"quiz-option-row",children:(0,t.jsxs)("div",{className:"quiz-option-group",children:[(0,t.jsx)("label",{children:"Soru Sayƒ±sƒ±"}),(0,t.jsxs)("select",{value:g,onChange:e=>h(Number(e.target.value)),children:[(0,t.jsx)("option",{value:"5",children:"5 Soru"}),(0,t.jsx)("option",{value:"10",children:"10 Soru"}),(0,t.jsx)("option",{value:"15",children:"15 Soru"}),(0,t.jsx)("option",{value:"20",children:"20 Soru"})]})]})})}),(0,t.jsx)("button",{type:"submit",className:"quiz-create-game-btn",disabled:!l,children:l?"Quiz Olu≈ütur":"Baƒülanƒ±yor..."})]})]}):(0,t.jsxs)("div",{className:"quiz-setup-modal",children:[(0,t.jsx)("h2",{children:"üìö Bilgi Yarƒ±≈ümasƒ±"}),(0,t.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px",color:"#ecf0f1"},children:[(0,t.jsx)("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"üîí"}),(0,t.jsx)("p",{style:{fontSize:"18px",marginBottom:"10px"},children:"Quiz oynamak i√ßin giri≈ü yapmalƒ±sƒ±nƒ±z"}),(0,t.jsx)("p",{style:{fontSize:"14px",color:"#95a5a6"},children:"L√ºtfen √∂nce hesabƒ±nƒ±za giri≈ü yapƒ±n"}),e&&(0,t.jsx)("button",{onClick:e,style:{marginTop:"20px",padding:"12px 24px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer"},children:"Geri D√∂n"})]})]}):(0,t.jsxs)("div",{className:"quiz-game-container",children:[j&&(0,t.jsxs)("div",{className:"quiz-header",children:[(0,t.jsxs)("div",{className:"quiz-room-code",children:["Oda: ",j]}),(0,t.jsxs)("div",{className:"quiz-question-counter",children:["Soru ",R," / ",E]})]}),"waiting"===x&&(0,t.jsxs)("div",{className:"quiz-waiting-section",children:[(0,t.jsx)("div",{className:"quiz-waiting-text",children:z?"Diƒüer oyuncularƒ±n katƒ±lmasƒ± bekleniyor...":"Host tarafƒ±ndan quiz'in ba≈ülatƒ±lmasƒ± bekleniyor..."}),(0,t.jsx)("div",{className:"quiz-spinner"}),j&&(0,t.jsxs)("div",{style:{marginTop:"30px",padding:"20px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",textAlign:"center"},children:[(0,t.jsx)("div",{style:{marginBottom:"15px",fontSize:"16px",fontWeight:"bold",color:"#ecf0f1"},children:"QR Kodu taratarak quiz'e katƒ±lƒ±n"}),(0,t.jsx)("div",{style:{background:"white",padding:"15px",borderRadius:"8px",display:"inline-block",marginBottom:"15px"},children:(0,t.jsx)("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(`${window.location.origin}/quiz?roomId=${j}`)}`,alt:"QR Kod",style:{display:"block",width:"200px",height:"200px"}})}),(0,t.jsxs)("div",{style:{marginTop:"15px"},children:[(0,t.jsx)("div",{style:{fontSize:"14px",color:"#bdc3c7",marginBottom:"8px"},children:"Quiz linkini payla≈ü:"}),(0,t.jsx)("div",{onClick:()=>{{let e=`${window.location.origin}/quiz?roomId=${j}`;navigator.clipboard.writeText(e),alert("Link kopyalandƒ±!")}},style:{background:"#2c3e50",padding:"8px",borderRadius:"5px",fontSize:"12px",wordBreak:"break-all",color:"#3498db",cursor:"pointer"},children:`${window.location.origin}/quiz?roomId=${j}`}),(0,t.jsx)("div",{style:{fontSize:"12px",color:"#95a5a6",marginTop:"5px"},children:"Linke tƒ±klayarak kopyalayƒ±n"})]})]}),S.length>0&&(0,t.jsxs)("div",{className:"quiz-players-section",style:{marginTop:"30px"},children:[(0,t.jsxs)("div",{className:"quiz-players-title",children:["Katƒ±lƒ±mcƒ±lar (",S.length,"/8)"]}),(0,t.jsx)("div",{className:"quiz-players-list",children:S.map(e=>(0,t.jsx)("div",{className:`quiz-player-card ${e.id===k?"me":""}`,children:(0,t.jsx)("div",{className:"quiz-player-name",children:e.name})},e.id))})]})]}),"playing"===x&&I&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"quiz-question-section",children:[(0,t.jsx)("div",{className:"quiz-question-header",children:(0,t.jsxs)("div",{className:F<=5?"quiz-timer warning":"quiz-timer",children:["‚è±Ô∏è ",F,"s"]})}),(0,t.jsx)("div",{className:"quiz-question-text",children:I.text}),(0,t.jsx)("div",{className:"quiz-answers-grid",children:I.answers.map((e,a)=>{let i="quiz-answer-btn";return M?(a===A?i+=" correct":a===L&&a!==A&&(i+=" incorrect"),i+=" disabled"):(a===L&&(i+=" selected"),null!==L&&(i+=" disabled")),(0,t.jsx)("button",{className:i,onClick:()=>ec(a),disabled:null!==L,children:e},a)})})]}),(0,t.jsxs)("div",{className:"quiz-players-section",children:[(0,t.jsxs)("div",{className:"quiz-players-title",children:["Katƒ±lƒ±mcƒ±lar (",S.filter(e=>e.answered).length,"/",S.length," cevapladƒ±)"]}),(0,t.jsx)("div",{className:"quiz-players-list",children:S.map(e=>(0,t.jsxs)("div",{className:`quiz-player-card ${e.id===k?"me":""} ${e.answered?"answered":""}`,children:[(0,t.jsxs)("div",{className:"quiz-player-name",children:[e.name," ",e.answered&&"‚úì"]}),(0,t.jsx)("div",{className:"quiz-player-score",children:e.score})]},e.id))})]})]}),"results"===x&&(0,t.jsxs)("div",{className:"quiz-scoreboard",children:[(0,t.jsx)("div",{className:"quiz-scoreboard-title",children:"üèÜ Skor Tablosu"}),(0,t.jsx)("ul",{className:"quiz-scoreboard-list",children:S.sort((e,t)=>t.score-e.score).map((e,a)=>(0,t.jsxs)("li",{className:`quiz-scoreboard-item rank-${a+1<=3?a+1:""}`,children:[(0,t.jsxs)("span",{className:"quiz-rank",children:[a+1,"."]}),(0,t.jsx)("span",{className:"quiz-player-info",children:e.name}),(0,t.jsx)("span",{className:"quiz-score",children:e.score})]},e.id))})]}),(0,t.jsxs)("div",{className:"quiz-controls",children:["waiting"===x&&z&&S.length>=2&&(0,t.jsx)("button",{className:"quiz-control-btn start",onClick:ed,children:"Quiz'i Ba≈ülat"}),(0,t.jsx)("button",{className:"quiz-control-btn leave",onClick:ep,children:"Odadan Ayrƒ±l"}),e&&(0,t.jsx)("button",{className:"rps-control-btn back",onClick:e,children:"Geri"})]}),H&&(0,t.jsx)("div",{className:"quiz-game-over-modal",children:(0,t.jsxs)("div",{className:"quiz-game-over-content",children:[(0,t.jsx)("div",{className:"quiz-game-over-title",children:"üéì Quiz Tamamlandƒ±!"}),(0,t.jsx)("div",{className:"quiz-game-over-message",children:X}),(0,t.jsxs)("div",{className:"quiz-scoreboard",style:{marginBottom:"20px"},children:[(0,t.jsx)("div",{className:"quiz-scoreboard-title",children:"Final Sƒ±ralamasƒ±"}),(0,t.jsx)("ul",{className:"quiz-scoreboard-list",children:K.sort((e,t)=>t.score-e.score).map((e,a)=>(0,t.jsxs)("li",{className:`quiz-scoreboard-item rank-${a+1<=3?a+1:""}`,style:{background:e.id===k?"rgba(102, 126, 234, 0.3)":void 0},children:[(0,t.jsx)("span",{className:"quiz-rank",children:0===a?"ü•á":1===a?"ü•à":2===a?"ü•â":`${a+1}.`}),(0,t.jsx)("span",{className:"quiz-player-info",children:e.name}),(0,t.jsx)("span",{className:"quiz-score",children:e.score})]},e.id))})]}),(0,t.jsxs)("div",{className:"quiz-game-over-controls",children:[(0,t.jsx)("button",{className:"quiz-play-again-btn",onClick:()=>{G(!1),m("setup"),v(""),N([]),T(null),B(0),W(null),D(null)},children:"üîÑ Tekrar Oyna"}),e&&(0,t.jsx)("button",{className:"rps-control-btn back",onClick:e,style:{padding:"15px 30px",fontSize:"16px"},children:"Ana Men√ºye D√∂n"})]})]})})]})}function U(){let{isGameModalOpen:e,selectedGame:i,activeGame:n,setActiveGame:s,closeGameModal:o,customerCode:d}=(0,r.useMenu)(),{currentUser:c}=(0,l.useAuth)(),[p,u]=(0,a.useState)(""),[x,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>(e?(s(i),m(!1),document.body.style.overflow="hidden"):document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e,i]),(0,a.useEffect)(()=>{let t=t=>{"Escape"===t.key&&e&&g()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e]);let g=()=>{m(!0),setTimeout(()=>{o(),m(!1)},300)},h=e=>{s(e)},f=()=>{s(null)};return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:`game-modal-container ${e?"show":""} ${x?"closing":""}`,children:[(0,t.jsx)("button",{className:"game-modal-close-btn",onClick:g,children:"√ó"}),!n&&(0,t.jsxs)("div",{className:"games-container",children:[(0,t.jsxs)("div",{className:"games-header",children:[(0,t.jsx)("h2",{children:"üéÆ Oyunlar"}),(0,t.jsx)("p",{children:"Bu mekandaki oyuncularla e≈üle≈ü!"}),(0,t.jsx)("small",{children:"Sadece bu mekan m√º≈üterilerine √∂zel!"})]}),(0,t.jsxs)("div",{className:"games-grid",children:[(0,t.jsxs)("button",{className:"game-card-btn",onClick:()=>h("2048"),children:[(0,t.jsx)("i",{className:"game-icon",children:"üî¢"}),(0,t.jsx)("h3",{children:"2048"}),(0,t.jsx)("p",{className:"player-count",children:"(Tek ki≈üilik)"})]}),(0,t.jsxs)("button",{className:"game-card-btn",onClick:()=>h("rps"),children:[(0,t.jsx)("i",{className:"game-icon",children:"‚úä"}),(0,t.jsx)("h3",{children:"Ta≈ü Kaƒüƒ±t Makas"}),(0,t.jsx)("p",{className:"player-count",children:"(2-4 ki≈üilik)"})]}),(0,t.jsxs)("button",{className:"game-card-btn",onClick:()=>{h("quiz")},style:{position:"relative"},children:[(0,t.jsx)("i",{className:"game-icon",children:"üìö"}),(0,t.jsx)("h3",{children:"Bilgi Yarƒ±≈ümasƒ±"}),(0,t.jsx)("p",{className:"player-count",children:"(2-8 ki≈üilik)"})]})]})]}),n&&(0,t.jsxs)("div",{style:{width:"100%",height:"100vh",display:"flex",flexDirection:"column"},children:[(0,t.jsxs)("button",{onClick:f,style:{width:"100%",padding:"15px 20px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",fontSize:"16px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",transition:"all 0.3s ease",flexShrink:0},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, #764ba2 0%, #667eea 100%)"},onMouseLeave:e=>{e.currentTarget.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:[(0,t.jsx)("span",{children:"‚Üê"}),(0,t.jsx)("span",{children:"Oyun Se√ßimine D√∂n"})]}),"2048"===n&&(0,t.jsx)("div",{style:{width:"100%",flex:1,overflow:"auto",padding:"10px 20px"},children:(0,t.jsx)(q,{onGameOver:()=>{},onGameWon:()=>{},playerNickname:p,customerCode:d||void 0})}),"rps"===n&&(0,t.jsx)("div",{style:{width:"100%",flex:1,overflow:"auto",padding:"10px 20px"},children:(0,t.jsx)(F,{onClose:f,playerNickname:p,customerCode:d||void 0})}),"quiz"===n&&(0,t.jsx)("div",{style:{width:"100%",flex:1,overflow:"auto",padding:"10px 20px"},children:(0,t.jsx)(O,{onClose:f,currentUser:c,customerCode:d||void 0})})]})]})})}function P({isOpen:e,onClose:i,tableId:n,customerCode:s}){let l,o,{customerData:d,productTokenSettings:c,cartKey:p,isSelfService:u,sessionId:x}=(0,r.useMenu)(),[m,g]=(0,a.useState)([]),[h,f]=(0,a.useState)(!1),[b,y]=(0,a.useState)(""),[j,v]=(0,a.useState)(0),k=p||n||"",w=(0,a.useCallback)(()=>{k&&s&&g((0,T.loadCart)(k,s))},[k,s]);(0,a.useEffect)(()=>{k&&e&&w()},[k,e,w]),(0,a.useEffect)(()=>{let e=()=>{w()};return window.addEventListener("cartUpdated",e),()=>window.removeEventListener("cartUpdated",e)},[w]),(0,a.useEffect)(()=>{let e=e=>{let{balance:t,message:a}=e.detail;v(t),a&&S(a,"success")};return window.addEventListener("tokenBalanceUpdated",e),()=>window.removeEventListener("tokenBalanceUpdated",e)},[]);let S=(e,t="info")=>{let a=document.createElement("div");a.textContent=e,a.style.cssText=`
      position: fixed;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%);
      background: ${"success"===t?"#28a745":"error"===t?"#dc3545":"#007bff"};
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      z-index: 100001;
      font-size: 14px;
      font-weight: 600;
      max-width: 90%;
      text-align: center;
    `,document.body.appendChild(a),setTimeout(()=>{a.parentNode&&a.parentNode.removeChild(a)},3e3)};(0,a.useEffect)(()=>{let t=async()=>{let e=localStorage.getItem("userData");if(e&&s)try{let t=JSON.parse(e),a=t.id||t.userId||t.Id;if(!a)return;let i=await fetch(`/api/user/token-balance?userId=${a}&customerCode=${s}`),r=await i.json();if(r.balance){let e=r.balance.currentTokens||r.balance.CurrentTokens||0;v(e)}}catch(e){console.error("Failed to load token balance:",e)}};e&&t()},[e,s]);let N=e=>{k&&s&&((0,T.saveCart)(k,e,s),g(e),window.dispatchEvent(new Event("cartUpdated")))},z=(e,t)=>{t<=0?C(e):N(m.map(a=>a.productId===e?{...a,quantity:t}:a))},C=e=>{let t=m.find(t=>t.productId===e),a=t?.name||"Bu √ºr√ºn√º";confirm(`${a} sepetten kaldƒ±rƒ±lsƒ±n mƒ±?`)&&N(m.filter(t=>t.productId!==e))},I=async()=>{if(0!==m.length){if(!s||!n&&!x)return void alert(u?"Oturum bilgisi bulunamadƒ±.":"Masa bilgisi bulunamadƒ±.");if(await new Promise(e=>{let t=localStorage.getItem("userData"),a=t?JSON.parse(t):null,i=localStorage.getItem("currentTableName"),r=u?"Self-Servis":i||`Masa ${n}`,s=`
        <div id="orderConfirmationModal" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center; z-index: 100000;">
          <div style="background: white; border-radius: 15px; padding: 25px; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
            <div style="text-align: center; margin-bottom: 20px;">
              <h3 style="color: #2c5530; margin: 0; font-size: 22px;">
                <i class="fas fa-receipt" style="margin-right: 8px;"></i>
                Sipari≈ü \xd6zeti
              </h3>
            </div>

            <div style="background: #f8f9fa; border-radius: 10px; padding: 15px; margin-bottom: 20px;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                <span><strong>üë§ M\xfc≈üteri:</strong></span>
                <span>${a?a.firstName+(a.nickName?` (${a.nickName})`:""):"Misafir"}</span>
              </div>
              <div style="display: flex; justify-content: space-between;">
                <span><strong>üçΩÔ∏è Masa:</strong></span>
                <span>${r}</span>
              </div>
            </div>

            <div style="margin-bottom: 20px;">
              <h4 style="color: #2c5530; margin-bottom: 15px; border-bottom: 2px solid #e9ecef; padding-bottom: 8px;">
                <i class="fas fa-shopping-cart" style="margin-right: 8px;"></i>
                Sipari≈ü Detaylarƒ±
              </h4>
              <div id="orderItemsList">
                ${m.map(e=>{let t=e.tokenQuantity||0,a=c?.[e.sambaId||e.productId],i="",r=`${e.quantity} x ${e.price.toFixed(2)} ‚Ç∫`,n=`${(e.price*e.quantity).toFixed(2)} ‚Ç∫`;if(t>0&&a?.redeemTokens){let r=t*a.redeemTokens,s=e.quantity-t;i=`<div style="font-size: 11px; color: #28a745; font-weight: 600;">ü™ô ${t} adet jeton ile (${r} jeton)</div>`,n=`<span style="text-decoration: line-through; color: #999;">${(e.price*e.quantity).toFixed(2)} ‚Ç∫</span> <span style="color: #28a745; font-weight: 700;">${(e.price*s).toFixed(2)} ‚Ç∫</span>`}return`
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid #eee; background: #fff;">
                      <div style="flex: 1;">
                        <div style="font-weight: 600; color: #333; margin-bottom: 4px;">${e.name}</div>
                        ${i}
                        ${e.note?`<div style="font-size: 12px; color: #666; font-style: italic;">üí¨ ${e.note}</div>`:""}
                      </div>
                      <div style="text-align: right; margin-left: 15px;">
                        <div style="font-weight: 600; color: #2c5530;">${r}</div>
                        <div style="font-size: 12px; color: #666;">${n}</div>
                      </div>
                    </div>
                  `}).join("")}
              </div>
            </div>

            ${b?`
              <div style="margin-bottom: 20px;">
                <h4 style="color: #2c5530; margin-bottom: 10px;">
                  <i class="fas fa-comment" style="margin-right: 8px;"></i>
                  \xd6zel ƒ∞steƒüiniz
                </h4>
                <div style="background: #fff3cd; border: 2px solid #dc3545; border-radius: 8px; padding: 15px; font-style: italic; color: #856404;">
                  "${b}"
                </div>
              </div>
            `:""}

            ${B>0?`
              <div style="background: linear-gradient(135deg, rgba(40, 167, 69, 0.15), rgba(32, 201, 151, 0.1)); border: 1px solid rgba(40, 167, 69, 0.3); border-radius: 8px; padding: 10px 12px; margin-bottom: 15px;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                  <span style="color: #28a745; font-weight: 600; font-size: 14px;">ü™ô Jeton Kullanƒ±mƒ±</span>
                  <span style="color: #28a745; font-weight: 700; font-size: 14px;">${B} jeton</span>
                </div>
              </div>
            `:""}

            <div style="background: linear-gradient(135deg, #2c5530, #3a6b3f); border-radius: 10px; padding: 15px; margin-bottom: 25px; color: white; text-align: center;">
              <div style="font-size: 18px; font-weight: bold;">
                <i class="fas fa-calculator" style="margin-right: 8px;"></i>
                TOPLAM: ${R.toFixed(2)} ‚Ç∫
              </div>
            </div>

            <div style="display: flex; gap: 15px; justify-content: center;">
              <button id="confirmOrderBtn" style="flex: 1; max-width: 180px; background: linear-gradient(135deg, #28a745, #20c997); color: white; border: none; padding: 15px 20px; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer;">
                <i class="fas fa-check" style="margin-right: 8px;"></i>
                Onayla
              </button>
              <button id="cancelOrderBtn" style="flex: 1; max-width: 180px; background: linear-gradient(135deg, #dc3545, #c82333); color: white; border: none; padding: 15px 20px; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer;">
                <i class="fas fa-times" style="margin-right: 8px;"></i>
                ƒ∞ptal
              </button>
            </div>
          </div>
        </div>
      `;document.body.insertAdjacentHTML("beforeend",s),document.getElementById("confirmOrderBtn").addEventListener("click",()=>{document.getElementById("orderConfirmationModal").remove(),e(!0)}),document.getElementById("cancelOrderBtn").addEventListener("click",()=>{document.getElementById("orderConfirmationModal").remove(),e(!1)}),document.getElementById("orderConfirmationModal").addEventListener("click",t=>{"orderConfirmationModal"===t.target.id&&(document.getElementById("orderConfirmationModal").remove(),e(!1))})})){f(!0);try{let e=localStorage.getItem("userData"),t=e?JSON.parse(e).id:null,a={customerCode:s,tableName:u?x:n,endUserId:t,Source:"UI",isSelfService:u,items:m.map(e=>{let t=c?.[e.sambaId||e.productId],a=e.tokenQuantity||0;return{productId:e.sambaId||e.productId,actualProductId:e.productId,productName:e.name,quantity:e.quantity,price:e.price,orderTag:e.note||"",tokenQuantity:a,tokensPerItem:t?.redeemTokens||0}}),notificationMessage:b?`üìù M\xfc≈üteri Notu: ${b}`:"",customerNote:b},r=await fetch("/api/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),l=await r.json();if(r.ok&&l.success){if(l.warning&&l.warningMessage&&!confirm(`‚ö†Ô∏è UYARI

${l.warningMessage}

Sipari≈üleriniz birle≈ütirilebilir.

Devam etmek istiyor musunuz?`))return void f(!1);alert(`Sipari≈üiniz ba≈üarƒ±yla alƒ±ndƒ±! Sipari≈ü No: #${l.orderNumber||"N/A"}`),k&&((0,T.clearCart)(k),g([]),y("")),i()}else l.userBlocked?alert("Hesabƒ±nƒ±z askƒ±ya alƒ±nmƒ±≈ütƒ±r. L√ºtfen destek ile ileti≈üime ge√ßin."):l.restaurantBlocked?alert(l.error||"Bu restorandan sipari≈ü verme yetkiniz kaldƒ±rƒ±lmƒ±≈ütƒ±r."):l.dailyLimitReached?alert("Bu restorandan bug√ºn 7 sipari≈ü verdiniz. G√ºnl√ºk limit doldu."):l.differentTableError?alert(l.error||"Farklƒ± masadan sipari≈ü verme hatasƒ±."):alert(l.error||"Sipari≈ü g√∂nderilirken bir hata olu≈ütu.")}catch(e){console.error("Order submission error:",e),alert("Sipari≈ü g√∂nderilirken bir hata olu≈ütu.")}finally{f(!1)}}}},{totalPrice:R,totalTokensUsed:B}=(l=0,o=0,m.forEach(e=>{let t=e.tokenQuantity||0,a=e.quantity-t;if(l+=a*e.price,t>0){let a=c?.[e.sambaId||e.productId];a&&(o+=t*a.redeemTokens)}}),{totalPrice:l,totalTokensUsed:o}),E=m.reduce((e,t)=>e+t.quantity,0);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"cart-overlay",onClick:i,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.5)",opacity:+!!e,visibility:e?"visible":"hidden",transition:"all 0.3s ease",zIndex:99998}}),(0,t.jsxs)("div",{className:`cart-sidebar ${e?"sidebar-open":""}`,style:{position:"fixed",top:0,right:e?0:"-100%",width:"100%",maxWidth:"400px",height:"100vh",background:"rgba(245, 245, 245, 0.95)",backdropFilter:"blur(10px)",boxShadow:"-4px 0 20px rgba(0, 0, 0, 0.2)",transition:"right 0.3s ease",zIndex:99999,display:"flex",flexDirection:"column",paddingBottom:"80px"},children:[(0,t.jsxs)("div",{className:"cart-header",style:{background:"linear-gradient(135deg, #28a745 0%, #20c997 100%)",color:"white",padding:"12px 15px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",flexShrink:0,display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",flexShrink:0},children:[(0,t.jsx)("i",{className:"fas fa-shopping-cart",style:{fontSize:"16px"}}),(0,t.jsx)("span",{style:{fontSize:"16px",fontWeight:600},children:"Sepetim"}),(0,t.jsx)("span",{style:{background:"rgba(255, 255, 255, 0.2)",padding:"2px 8px",borderRadius:"6px",fontSize:"11px",fontWeight:600},children:E})]}),(0,t.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"12px",flex:1,justifyContent:"center"},children:j>0&&(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1px"},children:[(0,t.jsx)("span",{style:{fontSize:"9px",opacity:.9,fontWeight:500},children:"Jeton"}),(0,t.jsxs)("span",{style:{background:"rgba(255, 255, 255, 0.25)",padding:"4px 12px",borderRadius:"6px",fontWeight:700,fontSize:"16px"},children:["ü™ô ",j-B]})]})}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[(0,t.jsx)("span",{style:{fontSize:"10px",opacity:.95,fontWeight:600,letterSpacing:"0.5px"},children:"TOPLAM"}),(0,t.jsxs)("span",{style:{background:"rgba(255, 255, 255, 0.3)",padding:"6px 14px",borderRadius:"8px",fontWeight:800,fontSize:"20px",letterSpacing:"0.5px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},children:[R.toFixed(2)," ‚Ç∫"]})]}),(0,t.jsx)("button",{onClick:i,style:{background:"rgba(255, 255, 255, 0.25)",border:"2px solid rgba(255, 255, 255, 0.4)",color:"white",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"bold",flexShrink:0,marginLeft:"8px"},children:"√ó"})]}),(0,t.jsx)("div",{className:"cart-items",style:{flex:1,overflowY:"auto",padding:"15px"},children:0===m.length?(0,t.jsxs)("div",{className:"empty-cart",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",textAlign:"center",color:"#666"},children:[(0,t.jsx)("i",{className:"fas fa-shopping-cart",style:{fontSize:"60px",marginBottom:"20px",opacity:.3}}),(0,t.jsx)("h4",{style:{margin:"0 0 10px 0",fontSize:"18px",fontWeight:600},children:"Sepetiniz bo≈ü"}),(0,t.jsx)("p",{style:{margin:0,fontSize:"14px",opacity:.8},children:'√úr√ºn eklemek i√ßin men√ºdeki "Sepete Ekle" butonlarƒ±nƒ± kullanƒ±n'})]}):m.map(e=>{let a,i;return(0,t.jsx)("div",{className:"cart-item",style:{background:"white",borderRadius:"12px",padding:"12px",marginBottom:"10px",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.05)"},children:(0,t.jsxs)("div",{style:{display:"flex",gap:"12px",alignItems:"flex-start"},children:[e.image&&(0,t.jsx)("div",{style:{flexShrink:0},children:(0,t.jsx)("img",{src:e.image,alt:e.name,style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"8px"}})}),(0,t.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"4px",gap:"8px"},children:[(0,t.jsx)("div",{style:{fontSize:"14px",fontWeight:600,color:"#333",flex:1,minWidth:0},children:e.name}),(0,t.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center",flexShrink:0},children:[(0,t.jsx)("button",{onClick:()=>z(e.productId,e.quantity-1),style:{width:"26px",height:"26px",border:"1px solid #ddd",background:"white",borderRadius:"4px",cursor:"pointer",fontSize:"16px",color:"#666",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center"},children:"‚àí"}),(0,t.jsx)("span",{style:{fontSize:"14px",fontWeight:700,color:"#333",minWidth:"20px",textAlign:"center"},children:e.quantity}),(0,t.jsx)("button",{onClick:()=>z(e.productId,e.quantity+1),style:{width:"26px",height:"26px",border:"1px solid #28a745",background:"#28a745",color:"white",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]})]}),(0,t.jsxs)("div",{style:{fontSize:"13px",marginBottom:"8px"},children:[(()=>{let a=e.tokenQuantity||0,i=c?.[e.sambaId||e.productId];if(a>0&&i){let r=e.quantity-a;return r>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{style:{color:"#28a745",fontWeight:"bold",fontSize:"12px"},children:["ü™ô ",a," adet jeton ile (",a*i.redeemTokens," jeton)"]}),(0,t.jsxs)("div",{style:{color:"#666",fontSize:"12px"},children:[r," adet nakit: ",(r*e.price).toFixed(2)," ‚Ç∫"]})]}):(0,t.jsxs)("div",{style:{color:"#28a745",fontWeight:"bold"},children:["ü™ô ",a," adet x ",i.redeemTokens," jeton"]})}return(0,t.jsxs)("div",{style:{color:"#666"},children:[e.price.toFixed(2)," ‚Ç∫ x ",e.quantity]})})(),(a=e.tokenQuantity||0,(i=c?.[e.sambaId||e.productId])&&i.earnTokens>0&&0===a?(0,t.jsxs)("div",{style:{fontSize:"11px",color:"#28a745",marginTop:"4px"},children:["+",i.earnTokens*e.quantity," jeton kazanacaksƒ±nƒ±z"]}):null)]}),(0,t.jsx)("input",{type:"text",placeholder:"√ñzel isteƒüiniz var mƒ±? (Opsiyonel)",value:e.note||"",onChange:t=>{var a,i;return a=e.productId,i=t.target.value,void N(m.map(e=>e.productId===a?{...e,note:i}:e))},maxLength:100,style:{width:"100%",padding:"6px 8px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"12px",marginBottom:"8px"}}),(()=>{let a=c?.[e.sambaId||e.productId];if(!a||a.redeemTokens<=0)return null;let i=e.tokenQuantity||0,r=Math.floor(j/a.redeemTokens),n=Math.min(e.quantity,r),s=j>=a.redeemTokens;return(0,t.jsxs)("button",{onClick:()=>(e=>{let t=m.find(t=>t.productId===e);if(!t)return;let a=c?.[t.sambaId||t.productId];if(!a||a.redeemTokens<=0)return;let i=t.tokenQuantity||0,r=Math.floor(j/a.redeemTokens),n=Math.min(t.quantity,r),s=0;s=0===i&&n>0?1:i<n?i+1:0,N(m.map(t=>t.productId===e?{...t,tokenQuantity:s}:t))})(e.productId),disabled:!s,style:{width:"100%",padding:"6px 10px",marginBottom:"8px",background:i>0?"linear-gradient(135deg, #28a745 0%, #20c997 100%)":s?"linear-gradient(135deg, #ffc107 0%, #ff9800 100%)":"#e9ecef",color:s?"white":"#adb5bd",border:"none",borderRadius:"6px",fontSize:"11px",fontWeight:600,cursor:s?"pointer":"not-allowed",transition:"all 0.2s"},children:["ü™ô ",0===i?`${a.redeemTokens} Jeton kullan${!s?" (Yetersiz)":""}`:i<n?`${i}/${n} adet (tƒ±kla: +1)`:`${i}/${n} adet (tƒ±kla: iptal)`]})})()]})]})},e.productId)})}),m.length>0&&(0,t.jsxs)("div",{className:"cart-footer",style:{borderTop:"1px solid #e2e8f0",padding:"12px 15px",background:"white",flexShrink:0},children:[(0,t.jsx)("div",{style:{marginBottom:"10px"},children:(0,t.jsx)("textarea",{placeholder:"Sipari≈ü notu (opsiyonel)...",value:b,onChange:e=>y(e.target.value),maxLength:200,style:{width:"100%",padding:"8px",border:"1px solid #e2e8f0",borderRadius:"6px",fontSize:"12px",resize:"none",height:"50px",fontFamily:"inherit"}})}),(0,t.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,t.jsxs)("button",{onClick:()=>{confirm("Sepeti temizlemek istediƒüinize emin misiniz?")&&k&&((0,T.clearCart)(k),g([]),y(""))},style:{flex:1,padding:"12px",background:"#dc3545",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[(0,t.jsx)("i",{className:"fas fa-trash-alt"}),(0,t.jsx)("span",{children:"Temizle"})]}),(0,t.jsxs)("button",{onClick:I,disabled:h,style:{flex:2,padding:"12px",background:h?"#ccc":"linear-gradient(135deg, #28a745 0%, #20c997 100%)",color:"white",border:"none",borderRadius:"6px",fontSize:"14px",fontWeight:600,cursor:h?"not-allowed":"pointer",boxShadow:h?"none":"0 4px 12px rgba(40, 167, 69, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[(0,t.jsx)("i",{className:"fas fa-paper-plane"}),(0,t.jsx)("span",{children:h?"G√∂nderiliyor...":"Sipari≈ü Ver"})]})]})]})]})]})}function H({isOpen:e,onClose:i,customerCode:r}){let{currentUser:n,isAuthenticated:s,login:o,register:d,logout:c}=(0,l.useAuth)(),[p,u]=(0,a.useState)("orders"),[x,m]=(0,a.useState)(!1),[g,h]=(0,a.useState)(!1),[f,b]=(0,a.useState)(!1),[y,j]=(0,a.useState)(""),[v,k]=(0,a.useState)(""),[w,S]=(0,a.useState)({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",nickName:""}),[N,z]=(0,a.useState)([]),[C,I]=(0,a.useState)(!1),[T,R]=(0,a.useState)(null),[B,E]=(0,a.useState)(!1),[$,L]=(0,a.useState)([]),[W,A]=(0,a.useState)(!1),[D,M]=(0,a.useState)(""),[q,F]=(0,a.useState)({email:"",phoneNumber:"",birthDate:"",gender:""}),[O,U]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=e=>{let{balance:t,message:a}=e.detail;n&&"tokens"===p&&V(),a&&J(a,"success")};return window.addEventListener("tokenBalanceUpdated",e),()=>window.removeEventListener("tokenBalanceUpdated",e)},[n,p]);let P=async e=>{e.preventDefault(),b(!0);try{let e=await o(y,v);e.success?(setTimeout(()=>{alert(`Ho≈ügeldin ${n?.name||""}!`)},100),m(!1),j(""),k("")):alert(e.error||"Giri≈ü ba≈üarƒ±sƒ±z")}catch(e){console.error("Login error:",e),alert("Baƒülantƒ± hatasƒ±. L√ºtfen tekrar deneyin.")}finally{b(!1)}},H=async e=>{try{b(!0);let t=await fetch("/api/auth/google",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:e.credential,mode:"login",customerCode:r||""})}),a=await t.json();a.success&&a.token&&a.user?(localStorage.setItem("userToken",a.token),localStorage.setItem("userData",JSON.stringify(a.user)),localStorage.setItem("lastLoginTime",Date.now().toString()),window.location.reload()):alert(a.error||"Google ile giri≈ü ba≈üarƒ±sƒ±z")}catch(e){console.error("Google login error:",e),alert("Google ile baƒülantƒ± sƒ±rasƒ±nda hata olu≈ütu")}finally{b(!1)}},G=async()=>{try{b(!0),await new Promise((e,t)=>{if(window.google?.accounts)return void e();let a=setInterval(()=>{window.google?.accounts&&(clearInterval(a),e())},100);setTimeout(()=>{clearInterval(a),t(Error("Google SDK y√ºklenemedi"))},1e4)}),window.google.accounts.id.initialize({client_id:"272265935268-q6o120vjjoch144ppf3bfp1l2o8da7ka.apps.googleusercontent.com",callback:H,ux_mode:"popup",use_fedcm_for_prompt:!1}),window.google.accounts.id.prompt()}catch(e){console.error("Google SDK load error:",e),alert("Google ile giri≈ü ba≈ülatƒ±lamadƒ±. L√ºtfen tekrar deneyin."),b(!1)}},X=async e=>{if(e.preventDefault(),!w.email)return void alert("E-posta adresi zorunludur");if(!w.email.includes("@"))return void alert("Ge√ßerli bir e-posta adresi giriniz");if(!w.phoneNumber)return void alert("Telefon numarasƒ± zorunludur");if(11!==w.phoneNumber.length)return void alert("Telefon numarasƒ± 11 haneli olmalƒ±dƒ±r (05XXXXXXXXX)");if(!w.phoneNumber.startsWith("05"))return void alert("Telefon numarasƒ± 05 ile ba≈ülamalƒ±dƒ±r");if(!w.nickName||0===w.nickName.trim().length)return void alert("Kullanƒ±cƒ± adƒ± zorunludur");if(!w.firstName)return void alert("ƒ∞sim zorunludur");if(!w.lastName)return void alert("Soyisim zorunludur");if(!w.password||w.password.length<6)return void alert("≈ûifre en az 6 karakter olmalƒ±dƒ±r");try{b(!0);let e=await d({name:w.firstName,surname:w.lastName,email:w.email,password:w.password,phoneNumber:w.phoneNumber});e.success?(alert(`Ho≈ügeldin ${w.firstName}! Kayƒ±t ba≈üarƒ±yla tamamlandƒ±.`),h(!1),S({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",nickName:""})):alert(e.error||"Kayƒ±t i≈ülemi ba≈üarƒ±sƒ±z")}catch(e){console.error("Register error:",e),alert("Baƒülantƒ± hatasƒ±. L√ºtfen tekrar deneyin.")}finally{b(!1)}},J=(e,t="info")=>{let a=document.createElement("div");a.textContent=e,a.style.cssText=`
      position: fixed;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%);
      background: ${"success"===t?"#28a745":"error"===t?"#dc3545":"#007bff"};
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      z-index: 100001;
      font-size: 14px;
      font-weight: 600;
      max-width: 90%;
      text-align: center;
    `,document.body.appendChild(a),setTimeout(()=>{a.parentNode&&a.parentNode.removeChild(a)},3e3)};(0,a.useEffect)(()=>{n&&("orders"===p?K():"tokens"===p?V():"allergies"===p?Q():"settings"===p&&_())},[p,n]);let K=async()=>{let e=n?.id||n?.userId||n?.Id;if(e){I(!0);try{let t=await fetch(`/api/user/orders/${e}`),a=await t.json();a.errors&&console.error("Validation errors:",a.errors),a.success&&a.orders?z(a.orders):z([])}catch(e){console.error("Failed to load orders:",e),z([])}finally{I(!1)}}},V=async()=>{let e=localStorage.getItem("userToken");if(e){E(!0);try{let t=await fetch("/api/user/tokens",{headers:{Authorization:`Bearer ${e}`}}),a=await t.json();a.success?R(a):R(null)}catch(e){console.error("Failed to load tokens:",e),R(null)}finally{E(!1)}}},Q=()=>{let e=localStorage.getItem("global_userAllergies");if(e)try{let t=JSON.parse(e),a=t.filter(e=>!e.startsWith("Diƒüer: ")),i=t.filter(e=>e.startsWith("Diƒüer: "));if(L(a),i.length>0){let e=i.map(e=>e.replace("Diƒüer: ","")).join(", ");M(e)}}catch(e){L([])}else L([])},_=()=>{n&&F({email:n.email||"",phoneNumber:n.phoneNumber||"",birthDate:n.birthDate||"",gender:n.gender||""})},Y=async()=>{let e=localStorage.getItem("userToken"),t=[...$];if(D&&D.trim()){let e=D.split(",").map(e=>`Diƒüer: ${e.trim()}`).filter(e=>"Diƒüer: "!==e);t.push(...e)}if(localStorage.setItem("global_userAllergies",JSON.stringify(t)),e)try{await fetch("/api/user/allergies",{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({allergies:t})}),alert("Alerjan bilgileriniz kaydedildi")}catch(e){alert("Alerjan bilgileriniz yerel olarak kaydedildi")}else alert("Alerjan bilgileriniz yerel olarak kaydedildi")},Z=async()=>{if(q.phoneNumber&&q.phoneNumber.trim()){if(11!==q.phoneNumber.length)return void alert("Telefon numarasƒ± 11 haneli olmalƒ±dƒ±r (05XXXXXXXXX)");if(!q.phoneNumber.startsWith("05"))return void alert("Telefon numarasƒ± 05 ile ba≈ülamalƒ±dƒ±r")}if(q.email&&q.email.trim()&&!q.email.includes("@"))return void alert("Ge√ßerli bir e-posta adresi giriniz");U(!0);let e=localStorage.getItem("userToken");try{let t=await fetch("/api/user/profile",{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({email:q.email||null,phoneNumber:q.phoneNumber||null,birthDate:q.birthDate||null,gender:q.gender||null})}),a=await t.json();if(a.success){let e=JSON.parse(localStorage.getItem("userData")||"{}"),t={...e,email:q.email||e.email,phoneNumber:q.phoneNumber||e.phoneNumber,birthDate:q.birthDate||e.birthDate,gender:q.gender||e.gender};localStorage.setItem("userData",JSON.stringify(t)),alert("Profil bilgileriniz ba≈üarƒ±yla g√ºncellendi"),window.location.reload()}else alert(a.error||"Profil g√ºncellenirken hata olu≈ütu")}catch(e){console.error("Profile update error:",e),alert("Baƒülantƒ± hatasƒ±. L√ºtfen tekrar deneyin.")}finally{U(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"profile-overlay",onClick:i,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.5)",opacity:+!!e,visibility:e?"visible":"hidden",transition:"all 0.3s ease",zIndex:99998}}),(0,t.jsxs)("div",{className:`profile-sidebar ${e?"sidebar-open":""}`,style:{position:"fixed",top:0,left:e?0:"-100%",width:"100%",maxWidth:"450px",height:"100vh",background:"#f8f9fa",transition:"left 0.3s ease",zIndex:99999,display:"flex",flexDirection:"column",boxShadow:"2px 0 20px rgba(0, 0, 0, 0.2)"},children:[(0,t.jsxs)("div",{className:"profile-header",style:{background:"linear-gradient(135deg, #343a40 0%, #212529 100%)",color:"white",padding:"15px 20px",position:"relative",textAlign:"center"},children:[(0,t.jsx)("button",{className:"modal-close",onClick:i,style:{position:"absolute",top:"10px",right:"15px",background:"rgba(255,255,255,0.2)",border:"none",color:"white",fontSize:"18px",cursor:"pointer",width:"28px",height:"28px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",transition:"background 0.3s ease"},children:(0,t.jsx)("i",{className:"fas fa-times"})}),(0,t.jsx)("div",{className:"user-avatar",style:{margin:"0 auto 10px auto",width:"50px",height:"50px",fontSize:"20px",background:n?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"rgba(255,255,255,0.2)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"white",border:"2px solid rgba(255,255,255,0.3)"},children:(0,t.jsx)("i",{className:"fas fa-user"})}),(0,t.jsx)("h3",{style:{margin:"0 0 3px 0",fontSize:"16px",fontWeight:600},children:n?`${n.firstName} ${n.lastName}`:"Misafir"}),(0,t.jsx)("p",{style:{margin:"0 0 5px 0",opacity:.9,fontSize:"12px"},children:n?n.email||n.phoneNumber||"":"Giri≈ü yaparak √∂zelliklerden faydalanƒ±n"})]}),(0,t.jsx)("div",{className:"profile-nav",style:{background:"#f8f9fa",padding:"15px",display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"6px"},children:[{id:"orders",icon:"fa-shopping-cart",label:"Sipari≈üler"},{id:"tokens",icon:"fa-coins",label:"Jetonlar"},{id:"allergies",icon:"fa-exclamation-triangle",label:"Alerjanlar"},{id:"settings",icon:"fa-cog",label:"Ayarlar"}].map(e=>(0,t.jsxs)("button",{onClick:()=>u(e.id),style:{background:"white",border:p===e.id?"2px solid #667eea":"2px solid #e9ecef",padding:"10px 4px",cursor:"pointer",fontSize:"9px",fontWeight:600,color:p===e.id?"#667eea":"#6c757d",borderRadius:"8px",textAlign:"center",transition:"all 0.3s ease",boxShadow:p===e.id?"0 2px 8px rgba(102, 126, 234, 0.15)":"0 2px 8px rgba(0,0,0,0.05)"},children:[(0,t.jsx)("div",{children:(0,t.jsx)("i",{className:`fas ${e.icon}`,style:{fontSize:"11px",display:"block",marginBottom:"3px",color:"tokens"===e.id?"#ffc107":"inherit"}})}),(0,t.jsx)("div",{children:e.label})]},e.id))}),(0,t.jsx)("div",{className:"profile-content",style:{padding:"15px",flex:1,overflowY:"auto"},children:n?(0,t.jsxs)("div",{children:["orders"===p&&(0,t.jsx)("div",{style:{padding:"15px"},children:C?(0,t.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"#6c757d"},children:[(0,t.jsx)("i",{className:"fas fa-spinner fa-spin",style:{fontSize:"32px",marginBottom:"15px"}}),(0,t.jsx)("p",{children:"Sipari≈üleriniz y√ºkleniyor..."})]}):0===N.length?(0,t.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"#6c757d"},children:[(0,t.jsx)("div",{style:{fontSize:"48px",marginBottom:"10px",opacity:.3},children:"üçΩÔ∏è"}),(0,t.jsx)("p",{style:{margin:0,fontSize:"14px",fontWeight:600},children:"Hen√ºz sipari≈üiniz bulunmuyor"}),(0,t.jsx)("p",{style:{margin:"5px 0 0 0",fontSize:"12px",opacity:.7},children:"Sipari≈ü vererek ba≈ülayƒ±n!"})]}):(0,t.jsx)("div",{children:N.map(e=>{let a="";if(e.venueLogo)if(e.venueLogo.startsWith("http://")||e.venueLogo.startsWith("https://"))a=e.venueLogo.replace("http://","https://");else{let t=e.venueLogo.replace(/^\/+/,"").replace("Uploads/","");a=`https://api.canlimenu.com/Uploads/${t}`}return(0,t.jsxs)("div",{style:{background:"white",padding:"15px",borderRadius:"12px",marginBottom:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",border:"1px solid #e9ecef"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:[(0,t.jsxs)("div",{style:{flex:1},children:[(0,t.jsx)("div",{style:{fontWeight:600,fontSize:"14px",marginBottom:"5px"},children:e.orderNumber||`#${e.id}`}),(0,t.jsxs)("div",{style:{fontSize:"12px",color:"#6c757d"},children:["üìÖ ",new Date(e.date).toLocaleDateString("tr-TR")," ",new Date(e.date).toLocaleTimeString("tr-TR",{hour:"2-digit",minute:"2-digit"})]})]}),(0,t.jsx)("div",{style:{background:"Processed"===e.status?"#d4edda":"#fff3cd",color:"Processed"===e.status?"#155724":"#856404",padding:"4px 10px",borderRadius:"12px",fontSize:"11px",fontWeight:600},children:"Processed"===e.status?"‚úì Tamamlandƒ±":e.status})]}),e.venueName&&(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"8px",paddingBottom:"8px",borderBottom:"1px solid #f0f0f0"},children:[a&&(0,t.jsx)("img",{src:a,alt:e.venueName,style:{width:"30px",height:"30px",borderRadius:"6px",objectFit:"cover",marginRight:"8px"},onError:e=>{e.target.style.display="none"}}),(0,t.jsxs)("div",{style:{fontSize:"13px",fontWeight:500},children:["üè™ ",e.venueName]})]}),(0,t.jsxs)("div",{style:{fontSize:"12px",color:"#6c757d",marginBottom:"8px"},children:["üçΩÔ∏è ",e.tableName||"Masa bilgisi yok"]}),e.items&&e.items.length>0&&(0,t.jsxs)("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid #f0f0f0"},children:[(0,t.jsxs)("div",{style:{fontSize:"11px",color:"#6c757d",marginBottom:"5px"},children:["√úr√ºnler (",e.itemCount||e.items.length,"):"]}),e.items.slice(0,3).map((e,a)=>(0,t.jsxs)("div",{style:{fontSize:"12px",marginBottom:"3px",display:"flex",justifyContent:"space-between"},children:[(0,t.jsxs)("span",{children:[e.quantity||e.count,"x ",e.name||e.productName]}),(0,t.jsxs)("span",{style:{fontWeight:600},children:[e.price?.toFixed(2)," ‚Ç∫"]})]},a)),e.items.length>3&&(0,t.jsxs)("div",{style:{fontSize:"11px",color:"#6c757d",marginTop:"3px"},children:["+",e.items.length-3," √ºr√ºn daha..."]})]}),(0,t.jsxs)("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid #f0f0f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsx)("span",{style:{fontSize:"12px",color:"#6c757d"},children:"Toplam:"}),(0,t.jsxs)("span",{style:{fontSize:"16px",fontWeight:700,color:"#333"},children:[e.totalAmount?.toFixed(2)," ‚Ç∫"]})]})]},e.id)})})}),"tokens"===p&&(0,t.jsx)("div",{style:{padding:"15px"},children:B?(0,t.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"#6c757d"},children:[(0,t.jsx)("i",{className:"fas fa-spinner fa-spin",style:{fontSize:"32px",marginBottom:"15px",color:"#ffc107"}}),(0,t.jsx)("p",{children:"Jetonlar y√ºkleniyor..."})]}):T&&T.restaurants&&0!==T.restaurants.length?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{background:"linear-gradient(135deg, #ffc107 0%, #ff9800 100%)",padding:"20px",borderRadius:"10px",marginBottom:"15px",textAlign:"center",color:"white"},children:[(0,t.jsx)("div",{style:{fontSize:"14px",marginBottom:"5px"},children:"Toplam Jeton"}),(0,t.jsxs)("div",{style:{fontSize:"32px",fontWeight:"bold"},children:["ü™ô ",T.summary?.totalTokens||0]})]}),T.restaurants.map((e,a)=>{let i="";if(e.restaurantLogo)if(e.restaurantLogo.startsWith("http://")||e.restaurantLogo.startsWith("https://"))i=e.restaurantLogo.replace("http://","https://");else{let t=e.restaurantLogo.replace(/^\/+/,"").replace("Uploads/","");i=`https://api.canlimenu.com/Uploads/${t}`}return(0,t.jsxs)("div",{style:{background:"white",padding:"15px",borderRadius:"12px",marginBottom:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",border:"1px solid #e9ecef"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[i?(0,t.jsx)("img",{src:i,alt:e.restaurantName,style:{width:"40px",height:"40px",borderRadius:"8px",objectFit:"cover",marginRight:"10px"},onError:e=>{e.target.style.display="none"}}):null,(0,t.jsx)("div",{style:{fontWeight:600,fontSize:"14px",flex:1},children:e.restaurantName})]}),(0,t.jsxs)("div",{style:{background:"linear-gradient(135deg, #fff9e6 0%, #fff4cc 100%)",borderRadius:"8px",padding:"10px",border:"2px solid #ffc107",textAlign:"center"},children:[(0,t.jsxs)("div",{style:{fontSize:"20px",fontWeight:700,color:"#856404"},children:[(0,t.jsx)("i",{className:"fas fa-coins",style:{color:"#ffc107",fontSize:"16px",marginRight:"5px"}}),e.currentTokens]}),(0,t.jsx)("div",{style:{marginTop:"4px",fontSize:"10px",color:"#856404",fontWeight:500},children:"Jeton"})]})]},e.customerId||`restaurant-${a}`)})]}):(0,t.jsxs)("div",{style:{textAlign:"center",padding:"40px",color:"#6c757d"},children:[(0,t.jsx)("i",{className:"fas fa-coins",style:{fontSize:"48px",marginBottom:"15px",opacity:.5,color:"#ffc107"}}),(0,t.jsx)("p",{children:"Hen√ºz jetonunuz bulunmuyor"})]})}),"allergies"===p&&(0,t.jsxs)("div",{style:{padding:"15px"},children:[(0,t.jsx)("h4",{style:{margin:"0 0 15px 0",fontSize:"16px",color:"#333"},children:"Alerji Bilgilerim"}),(0,t.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(220, 53, 69, 0.1), rgba(220, 53, 69, 0.15))",border:"1px solid rgba(220, 53, 69, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"15px",fontSize:"12px",color:"#721c24"},children:[(0,t.jsx)("div",{style:{fontWeight:600,marginBottom:"5px"},children:"‚ö†Ô∏è √ñnemli Uyarƒ±"}),(0,t.jsx)("div",{children:"Ciddi alerjiniz varsa l√ºtfen sipari≈ü verirken garsonunuza mutlaka bildirin. Bu sistem sadece hatƒ±rlatma ama√ßlƒ±dƒ±r."})]}),[{name:"Gluten",emoji:"üåæ"},{name:"Laktoz",emoji:"ü•õ"},{name:"Yumurta",emoji:"ü•ö"},{name:"Balƒ±k",emoji:"üêü"},{name:"Fƒ±ndƒ±k",emoji:"üå∞"},{name:"Yer Fƒ±stƒ±ƒüƒ±",emoji:"ü•ú"},{name:"Soya",emoji:"ü´ò"},{name:"S√ºt",emoji:"ü•õ"},{name:"Susam",emoji:"üå∞"},{name:"Hardal",emoji:"üå∂Ô∏è"},{name:"Kereviz",emoji:"ü•¨"}].map(e=>(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",padding:"10px 12px",background:$.includes(e.name)?"linear-gradient(135deg, rgba(220, 53, 69, 0.15), rgba(220, 53, 69, 0.2))":"white",border:$.includes(e.name)?"2px solid rgba(220, 53, 69, 0.4)":"1px solid #e9ecef",borderRadius:"8px",marginBottom:"8px",cursor:"pointer",transition:"all 0.2s ease"},children:[(0,t.jsx)("input",{type:"checkbox",checked:$.includes(e.name),onChange:t=>{t.target.checked?L([...$,e.name]):L($.filter(t=>t!==e.name))},style:{marginRight:"10px",cursor:"pointer"}}),(0,t.jsx)("span",{style:{fontSize:"18px",marginRight:"8px"},children:e.emoji}),(0,t.jsx)("span",{style:{fontSize:"14px",fontWeight:500},children:e.name})]},e.name)),(0,t.jsxs)("div",{style:{marginTop:"15px"},children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:600,marginBottom:"8px",color:"#333"},children:"üìù Diƒüer Alerjanlar ve √ñzel Durumlar"}),(0,t.jsx)("textarea",{value:D,onChange:e=>M(e.target.value),placeholder:"Diƒüer alerji veya √∂zel durumlarƒ±nƒ±zƒ± buraya yazƒ±n (virg√ºlle ayƒ±rƒ±n)",style:{width:"100%",minHeight:"80px",padding:"10px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"13px",fontFamily:"inherit",resize:"vertical"}}),(0,t.jsx)("div",{style:{fontSize:"11px",color:"#6c757d",marginTop:"5px"},children:"√ñrnek: Mantar, Ananas, Deniz √ºr√ºnleri"})]}),(0,t.jsxs)("button",{onClick:Y,style:{width:"100%",padding:"12px",background:"linear-gradient(135deg, #28a745 0%, #20c997 100%)",color:"white",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:600,cursor:"pointer",marginTop:"15px"},children:[(0,t.jsx)("i",{className:"fas fa-save",style:{marginRight:"8px"}}),"Kaydet"]})]}),"settings"===p&&(0,t.jsxs)("div",{style:{padding:"15px"},children:[(0,t.jsx)("h4",{style:{margin:"0 0 15px 0",fontSize:"16px",color:"#333"},children:"‚öôÔ∏è Hesap Ayarlarƒ±"}),(0,t.jsxs)("div",{style:{background:"white",padding:"15px",borderRadius:"10px",marginBottom:"15px",border:"1px solid #e9ecef"},children:[(0,t.jsxs)("div",{style:{fontSize:"13px",marginBottom:"8px"},children:[(0,t.jsx)("strong",{children:"ƒ∞sim Soyisim:"})," ",n.firstName," ",n.lastName]}),n.email&&(0,t.jsxs)("div",{style:{fontSize:"13px",marginBottom:"8px"},children:[(0,t.jsx)("strong",{children:"Email:"})," ",n.email]}),n.phoneNumber&&(0,t.jsxs)("div",{style:{fontSize:"13px",marginBottom:"8px"},children:[(0,t.jsx)("strong",{children:"Telefon:"})," ",n.phoneNumber]}),n.birthDate&&(0,t.jsxs)("div",{style:{fontSize:"13px",marginBottom:"8px"},children:[(0,t.jsx)("strong",{children:"Doƒüum Tarihi:"})," ",new Date(n.birthDate).toLocaleDateString("tr-TR")]}),n.gender&&(0,t.jsxs)("div",{style:{fontSize:"13px"},children:[(0,t.jsx)("strong",{children:"Cinsiyet:"})," ","Male"===n.gender?"Erkek":"Female"===n.gender?"Kadƒ±n":"Diƒüer"]})]}),!n.email&&(0,t.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:600,marginBottom:"6px",color:"#333"},children:"üìß Email Adresi Ekle"}),(0,t.jsx)("input",{type:"email",value:q.email,onChange:e=>F({...q,email:e.target.value}),placeholder:"ornek@email.com",style:{width:"100%",padding:"10px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"13px"}})]}),!n.phoneNumber&&(0,t.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:600,marginBottom:"6px",color:"#333"},children:"üì± Telefon Numarasƒ± Ekle"}),(0,t.jsx)("input",{type:"tel",value:q.phoneNumber,onChange:e=>F({...q,phoneNumber:e.target.value}),placeholder:"05XXXXXXXXX",maxLength:11,style:{width:"100%",padding:"10px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"13px"}}),(0,t.jsx)("div",{style:{fontSize:"11px",color:"#6c757d",marginTop:"4px"},children:"11 hane, 05 ile ba≈ülamalƒ±"})]}),!n.birthDate&&(0,t.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:600,marginBottom:"6px",color:"#333"},children:"üéÇ Doƒüum Tarihi"}),(0,t.jsx)("input",{type:"date",value:q.birthDate,onChange:e=>F({...q,birthDate:e.target.value}),style:{width:"100%",padding:"10px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"13px"}}),(0,t.jsx)("div",{style:{fontSize:"11px",color:"#dc3545",marginTop:"4px",fontWeight:500},children:"üéâ Doƒüru tarihi yazƒ±n, doƒüum g√ºn√ºn√ºz unutulmayacak! Bir daha deƒüi≈ütirilemez."})]}),!n.gender&&(0,t.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,t.jsx)("label",{style:{display:"block",fontSize:"13px",fontWeight:600,marginBottom:"6px",color:"#333"},children:"üë§ Cinsiyet"}),(0,t.jsxs)("select",{value:q.gender,onChange:e=>F({...q,gender:e.target.value}),style:{width:"100%",padding:"10px",border:"1px solid #ddd",borderRadius:"8px",fontSize:"13px",background:"white"},children:[(0,t.jsx)("option",{value:"",children:"Se√ßiniz"}),(0,t.jsx)("option",{value:"Male",children:"Erkek"}),(0,t.jsx)("option",{value:"Female",children:"Kadƒ±n"}),(0,t.jsx)("option",{value:"Other",children:"Diƒüer"})]}),(0,t.jsx)("div",{style:{fontSize:"11px",color:"#dc3545",marginTop:"4px",fontWeight:500},children:"‚ö†Ô∏è Bir defa se√ßebilirsiniz, sonra deƒüi≈ütirilemez."})]}),(!n.email||!n.phoneNumber||!n.birthDate||!n.gender)&&(0,t.jsxs)("button",{onClick:Z,disabled:O,style:{width:"100%",padding:"12px",background:O?"#ccc":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:600,cursor:O?"not-allowed":"pointer",marginBottom:"15px"},children:[(0,t.jsx)("i",{className:"fas fa-save",style:{marginRight:"8px"}}),O?"G√ºncelleniyor...":"Profili G√ºncelle"]}),(0,t.jsxs)("button",{onClick:()=>{c(),alert("√áƒ±kƒ±≈ü yapƒ±ldƒ±")},style:{width:"100%",padding:"12px",background:"#dc3545",color:"white",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.3s ease"},children:[(0,t.jsx)("i",{className:"fas fa-sign-out-alt",style:{marginRight:"8px"}}),"√áƒ±kƒ±≈ü Yap"]})]})]}):(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",textAlign:"center",color:"#6c757d"},children:[(0,t.jsx)("div",{style:{width:"80px",height:"80px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"20px",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.3)"},children:(0,t.jsx)("i",{className:"fas fa-user-circle",style:{fontSize:"40px",color:"white"}})}),(0,t.jsx)("h4",{style:{margin:"0 0 10px 0",fontSize:"18px",fontWeight:600,color:"#333"},children:"Giri≈ü Yapƒ±n"}),(0,t.jsx)("p",{style:{margin:"0 0 20px 0",fontSize:"14px",opacity:.8},children:"Sipari≈ü ge√ßmi≈üiniz, jetonlarƒ±nƒ±z ve daha fazlasƒ± i√ßin giri≈ü yapƒ±n."}),(0,t.jsxs)("button",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",padding:"12px 32px",borderRadius:"25px",fontSize:"14px",fontWeight:600,cursor:"pointer",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.3)",transition:"all 0.3s ease"},onClick:()=>m(!0),children:[(0,t.jsx)("i",{className:"fas fa-sign-in-alt",style:{marginRight:"8px"}}),"Giri≈ü Yap"]})]})})]}),x&&(0,t.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.6)",zIndex:1e5,backdropFilter:"blur(5px)",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>m(!1),children:(0,t.jsxs)("div",{style:{background:"white",borderRadius:"20px",padding:"30px",width:"90%",maxWidth:"450px",maxHeight:"90vh",overflowY:"auto",position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{onClick:()=>m(!1),style:{position:"absolute",top:"15px",right:"15px",background:"none",border:"none",fontSize:"24px",color:"#999",cursor:"pointer",padding:"5px",borderRadius:"50%",transition:"all 0.3s ease"},children:(0,t.jsx)("i",{className:"fas fa-times"})}),(0,t.jsxs)("div",{style:{textAlign:"center",marginBottom:"25px"},children:[(0,t.jsx)("h2",{style:{margin:"0 0 8px 0",fontSize:"24px",fontWeight:600,color:"#333"},children:"üîê Giri≈ü Yap"}),(0,t.jsx)("p",{style:{margin:0,fontSize:"14px",color:"#666"},children:"Telefon numaranla hemen giri≈ü yap!"})]}),(0,t.jsxs)("button",{type:"button",onClick:G,disabled:f,style:{width:"100%",padding:"12px 20px",background:f?"#f5f5f5":"white",border:"1px solid #ddd",borderRadius:"10px",fontSize:"14px",fontWeight:600,cursor:f?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",transition:"all 0.3s ease",marginBottom:"20px",opacity:f?.6:1},children:[(0,t.jsx)("img",{src:"https://www.google.com/favicon.ico",alt:"Google",style:{width:"20px",height:"20px"}}),f?"Giri≈ü Yapƒ±lƒ±yor...":"Google ile Giri≈ü Yap"]}),(0,t.jsxs)("div",{style:{position:"relative",textAlign:"center",margin:"20px 0"},children:[(0,t.jsx)("div",{style:{position:"absolute",top:"50%",left:0,right:0,height:"1px",background:"#e0e0e0"}}),(0,t.jsx)("span",{style:{position:"relative",background:"white",padding:"0 15px",color:"#999",fontSize:"12px"},children:"veya"})]}),(0,t.jsxs)("form",{onSubmit:P,children:[(0,t.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px",color:"#333",fontWeight:500},children:"Telefon Numarasƒ± veya E-posta"}),(0,t.jsx)("input",{type:"text",value:y,onChange:e=>j(e.target.value),placeholder:"05XX XXX XX XX veya email@ornek.com",required:!0,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"10px",fontSize:"14px"}})]}),(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px",color:"#333",fontWeight:500},children:"≈ûifre"}),(0,t.jsx)("input",{type:"password",value:v,onChange:e=>k(e.target.value),placeholder:"≈ûifrenizi girin",required:!0,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"10px",fontSize:"14px"}})]}),(0,t.jsxs)("button",{type:"submit",disabled:f,style:{width:"100%",padding:"14px",background:f?"#ccc":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"10px",fontSize:"16px",fontWeight:600,cursor:f?"not-allowed":"pointer",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.3)",transition:"all 0.3s ease"},children:[(0,t.jsx)("i",{className:"fas fa-sign-in-alt",style:{marginRight:"8px"}}),f?"Giri≈ü Yapƒ±lƒ±yor...":"Giri≈ü Yap"]})]}),(0,t.jsx)("div",{style:{textAlign:"center",marginTop:"20px"},children:(0,t.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),m(!1),h(!0)},style:{color:"#667eea",fontSize:"14px",textDecoration:"none"},children:"Hesabƒ±n yok mu? Hemen kayƒ±t ol"})})]})}),g&&(0,t.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.6)",zIndex:1e5,backdropFilter:"blur(5px)",display:"flex",alignItems:"center",justifyContent:"center"},onClick:()=>h(!1),children:(0,t.jsxs)("div",{style:{background:"white",borderRadius:"20px",padding:"30px",width:"90%",maxWidth:"450px",maxHeight:"90vh",overflowY:"auto",position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("button",{onClick:()=>h(!1),style:{position:"absolute",top:"15px",right:"15px",background:"none",border:"none",fontSize:"24px",color:"#999",cursor:"pointer",padding:"5px",borderRadius:"50%",transition:"all 0.3s ease"},children:(0,t.jsx)("i",{className:"fas fa-times"})}),(0,t.jsxs)("div",{style:{textAlign:"center",marginBottom:"25px"},children:[(0,t.jsx)("h2",{style:{margin:"0 0 8px 0",fontSize:"24px",fontWeight:600,color:"#333"},children:"üéâ Kayƒ±t Ol"}),(0,t.jsx)("p",{style:{margin:0,fontSize:"14px",color:"#666"},children:"Hemen √ºye ol, avantajlardan faydalan!"})]}),(0,t.jsxs)("form",{onSubmit:X,children:[(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"15px"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px",color:"#333",fontWeight:500},children:"ƒ∞sim"}),(0,t.jsx)("input",{type:"text",value:w.firstName,onChange:e=>S({...w,firstName:e.target.value}),placeholder:"ƒ∞sminiz",required:!0,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"10px",fontSize:"14px"}})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px",color:"#333",fontWeight:500},children:"Soyisim"}),(0,t.jsx)("input",{type:"text",value:w.lastName,onChange:e=>S({...w,lastName:e.target.value}),placeholder:"Soyisminiz",required:!0,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"10px",fontSize:"14px"}})]})]}),(0,t.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px",color:"#333",fontWeight:500},children:"Kullanƒ±cƒ± Adƒ±"}),(0,t.jsx)("input",{type:"text",value:w.nickName,onChange:e=>S({...w,nickName:e.target.value}),placeholder:"Kullanƒ±cƒ± adƒ±nƒ±z",required:!0,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"10px",fontSize:"14px"}})]}),(0,t.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px",color:"#333",fontWeight:500},children:"E-posta"}),(0,t.jsx)("input",{type:"email",value:w.email,onChange:e=>S({...w,email:e.target.value}),placeholder:"email@ornek.com",required:!0,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"10px",fontSize:"14px"}})]}),(0,t.jsxs)("div",{style:{marginBottom:"15px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px",color:"#333",fontWeight:500},children:"Telefon Numarasƒ±"}),(0,t.jsx)("input",{type:"tel",value:w.phoneNumber,onChange:e=>S({...w,phoneNumber:e.target.value}),placeholder:"05XX XXX XX XX",required:!0,maxLength:11,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"10px",fontSize:"14px"}})]}),(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px",color:"#333",fontWeight:500},children:"≈ûifre"}),(0,t.jsx)("input",{type:"password",value:w.password,onChange:e=>S({...w,password:e.target.value}),placeholder:"En az 6 karakter",required:!0,minLength:6,style:{width:"100%",padding:"12px",border:"1px solid #ddd",borderRadius:"10px",fontSize:"14px"}})]}),(0,t.jsxs)("button",{type:"submit",disabled:f,style:{width:"100%",padding:"14px",background:f?"#ccc":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"10px",fontSize:"16px",fontWeight:600,cursor:f?"not-allowed":"pointer",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.3)",transition:"all 0.3s ease"},children:[(0,t.jsx)("i",{className:"fas fa-user-plus",style:{marginRight:"8px"}}),f?"Kayƒ±t Yapƒ±lƒ±yor...":"Kayƒ±t Ol"]})]}),(0,t.jsx)("div",{style:{textAlign:"center",marginTop:"20px"},children:(0,t.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),h(!1),m(!0)},style:{color:"#667eea",fontSize:"14px",textDecoration:"none"},children:"Zaten hesabƒ±n var mƒ±? Giri≈ü yap"})})]})})]})}function G({isOpen:e,onClose:i,customerCode:r,menuData:n}){let{messages:s,isLoading:l,isLoadingMenu:o,sendMessage:d,clearHistory:c}=function({customerCode:e,menuData:t}){let[i,r]=(0,a.useState)([]),[n,s]=(0,a.useState)(!1),[l,o]=(0,a.useState)(30),[d,c]=(0,a.useState)(""),[p,u]=(0,a.useState)(null),[x,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=localStorage.getItem("chatSessionId");e||(e=`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("chatSessionId",e)),c(e)},[]),(0,a.useEffect)(()=>{t&&t.categories?(console.log("‚úÖ Using external menu data from page:",{categoriesCount:t.categories.length}),u(t),m(!1)):(console.log("‚ö†Ô∏è No external menu data yet"),m(!0))},[t]),(0,a.useEffect)(()=>{if(!e)return;let t=`global_chat_history_${e}`,a=localStorage.getItem(t);if(a)try{let e=JSON.parse(a);r(e)}catch(e){console.error("Failed to parse chat history:",e)}},[e]);let g=(0,a.useCallback)(t=>{if(!e)return;let a=`global_chat_history_${e}`;localStorage.setItem(a,JSON.stringify(t))},[e]),h=(0,a.useCallback)((e,t)=>{let a={message:e,sender:t,timestamp:new Date().toISOString(),page:window.location.pathname};return r(e=>{let t=[...e,a];return g(t),t}),a},[g]),f=(0,a.useCallback)(async t=>{if(!t.trim()||!e)return null;if(l<=0){let e="G√ºnl√ºk 30 mesaj limitinize ula≈ütƒ±nƒ±z. Yarƒ±n tekrar deneyebilirsiniz. üòä";return h(e,"ai"),e}h(t,"user"),s(!0);try{let a=p?JSON.stringify(p):"";console.log("üì§ Sending message to AI:",{message:t.substring(0,50),customerCode:e,hasMenuData:!!p,menuDataLength:a.length,categoriesCount:p?.categories?.length||0});let i=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t,customerCode:e,sessionId:d,pageUrl:window.location.href,menuData:a})}),r=await i.json();if(console.log("üì• Received AI response:",{success:r.success,hasResponse:!!r.response,source:r.source}),r.success)return void 0!==r.remainingMessages&&o(r.remainingMessages),h(r.response,"ai"),r.response;{let e=r.error||r.response||"Bir hata olu≈ütu. L√ºtfen tekrar deneyin.";return h(e,"ai"),e}}catch(t){console.error("Send message error:",t);let e="Baƒülantƒ± hatasƒ±. L√ºtfen internet baƒülantƒ±nƒ±zƒ± kontrol edin.";return h(e,"ai"),e}finally{s(!1)}},[e,d,p,l,h,x]);return{messages:i,isLoading:n,isLoadingMenu:x,remainingMessages:l,sendMessage:f,clearHistory:(0,a.useCallback)(()=>{if(r([]),e){let t=`global_chat_history_${e}`;localStorage.removeItem(t)}},[e])}}({customerCode:r,menuData:n}),[p,u]=(0,a.useState)(""),x=(0,a.useRef)(null),m=(0,a.useRef)(null);(0,a.useEffect)(()=>{x.current&&x.current.scrollIntoView({behavior:"smooth"})},[s]),(0,a.useEffect)(()=>{e&&m.current&&setTimeout(()=>{m.current?.focus()},300)},[e]);let g=async()=>{if(!p.trim()||l)return;let e=p.trim();u(""),await d(e)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"ai-chat-overlay",onClick:i,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.5)",opacity:+!!e,visibility:e?"visible":"hidden",transition:"all 0.3s ease",zIndex:99998}}),(0,t.jsxs)("div",{className:`ai-chat-sidebar ${e?"sidebar-open":""}`,style:{position:"fixed",top:0,left:e?0:"-100%",width:"100%",height:"100vh",background:"linear-gradient(180deg, #667eea 0%, #764ba2 100%)",transition:"left 0.3s ease",zIndex:99999,display:"flex",flexDirection:"column",boxShadow:"4px 0 20px rgba(0, 0, 0, 0.3)"},children:[(0,t.jsx)("div",{className:"chat-header",style:{background:"rgba(0, 0, 0, 0.2)",color:"white",padding:"15px 20px",flexShrink:0,borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,t.jsx)("i",{className:"fas fa-robot",style:{fontSize:"20px"}}),(0,t.jsx)("h3",{style:{margin:0,fontSize:"18px",fontWeight:600},children:"AI Men√º Asistanƒ±"})]}),(0,t.jsx)("button",{onClick:i,style:{background:"rgba(255, 255, 255, 0.2)",border:"2px solid rgba(255, 255, 255, 0.3)",color:"white",width:"32px",height:"32px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"18px",fontWeight:"bold"},children:"√ó"})]})}),(0,t.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"15px",display:"flex",flexDirection:"column",gap:"12px"},children:[0===s.length&&(0,t.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"12px 12px 12px 2px",padding:"12px 15px",color:"#333",fontSize:"14px",lineHeight:"1.5",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:"Merhaba! üëã Men√º ile ilgili her ≈üeyi sorabilirsiniz. Size nasƒ±l yardƒ±mcƒ± olabilirim? üòä"}),o&&0===s.length&&(0,t.jsx)("div",{style:{display:"flex",justifyContent:"flex-start"},children:(0,t.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"12px 12px 12px 2px",padding:"12px 15px",color:"#666",fontSize:"13px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[(0,t.jsx)("i",{className:"fas fa-spinner fa-spin"})," Men√º bilgileri y√ºkleniyor..."]})}),s.map((e,a)=>(0,t.jsx)("div",{style:{display:"flex",justifyContent:"user"===e.sender?"flex-end":"flex-start"},children:(0,t.jsx)("div",{style:{background:"user"===e.sender?"#fff":"rgba(255, 255, 255, 0.95)",borderRadius:"user"===e.sender?"12px 12px 2px 12px":"12px 12px 12px 2px",padding:"12px 15px",maxWidth:"85%",color:"#333",fontSize:"14px",lineHeight:"1.5",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)",wordWrap:"break-word",whiteSpace:"pre-wrap"},children:e.message})},a)),l&&(0,t.jsx)("div",{style:{display:"flex",justifyContent:"flex-start"},children:(0,t.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.95)",borderRadius:"12px 12px 12px 2px",padding:"12px 15px",color:"#666",fontSize:"14px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:[(0,t.jsx)("i",{className:"fas fa-spinner fa-spin"})," D√º≈ü√ºn√ºyorum..."]})}),(0,t.jsx)("div",{ref:x})]}),(0,t.jsxs)("div",{style:{padding:"15px",paddingBottom:"90px",background:"rgba(0, 0, 0, 0.2)",borderTop:"1px solid rgba(255, 255, 255, 0.1)",flexShrink:0},children:[(0,t.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,t.jsx)("input",{ref:m,type:"text",value:p,onChange:e=>u(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),g())},placeholder:o?"Men√º y√ºkleniyor...":"Mesajƒ±nƒ±zƒ± yazƒ±n...",disabled:l,style:{flex:1,padding:"12px 15px",border:"none",borderRadius:"25px",fontSize:"14px",background:"white",outline:"none"}}),(0,t.jsx)("button",{onClick:g,disabled:l||!p.trim(),style:{width:"48px",height:"48px",background:l||!p.trim()?"#ccc":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"50%",cursor:l||!p.trim()?"not-allowed":"pointer",fontSize:"18px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.2)"},children:(0,t.jsx)("i",{className:"fas fa-paper-plane"})})]}),s.length>0&&(0,t.jsxs)("button",{onClick:c,style:{width:"100%",marginTop:"8px",padding:"8px",background:"rgba(255, 255, 255, 0.1)",color:"white",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",fontSize:"12px",cursor:"pointer"},children:[(0,t.jsx)("i",{className:"fas fa-trash"})," Sohbeti Temizle"]})]})]})]})}function X({isOpen:e,onClose:i,venueCode:r}){let[n,s]=(0,a.useState)({name:"",newVenueRequest:"",type:"",content:""}),[l,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)("idle"),p=async e=>{e.preventDefault(),o(!0);try{let e=await fetch("/api/suggestion/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerName:n.name||"Anonim",venueCode:r||"bilinmiyor",newVenueRequest:n.newVenueRequest,suggestionType:n.type,suggestionContent:n.content,userAgent:navigator.userAgent})});(await e.json()).success?(c("success"),setTimeout(()=>{i(),s({name:"",newVenueRequest:"",type:"",content:""}),c("idle")},2e3)):(c("error"),setTimeout(()=>c("idle"),2e3))}catch(e){console.error("Suggestion error:",e),c("error"),setTimeout(()=>c("idle"),2e3)}finally{o(!1)}};return e?(0,t.jsx)("div",{className:"modal-overlay",onClick:i,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(5px)",zIndex:1e5,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:(0,t.jsxs)("div",{className:"suggestion-modal-content",onClick:e=>e.stopPropagation(),style:{background:"linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)",borderRadius:"20px",padding:"30px",width:"100%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[(0,t.jsxs)("div",{style:{marginBottom:"20px",textAlign:"center"},children:[(0,t.jsx)("h2",{style:{margin:"0 0 10px 0",fontSize:"24px",color:"#fff",fontWeight:700},children:"üí° √ñneri & Geri Bildirim"}),(0,t.jsx)("p",{style:{margin:0,fontSize:"14px",color:"#aaa"},children:"Fikirleriniz bizim i√ßin deƒüerli!"})]}),(0,t.jsxs)("form",{onSubmit:p,children:[(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#ccc",fontWeight:600},children:"ƒ∞sim (Opsiyonel)"}),(0,t.jsx)("input",{type:"text",value:n.name,onChange:e=>s({...n,name:e.target.value}),placeholder:"Adƒ±nƒ±z",style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"10px",color:"#fff",fontSize:"14px"}})]}),(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#ccc",fontWeight:600},children:"üè™ G√∂rmek ƒ∞stediƒüiniz Mekan"}),(0,t.jsx)("input",{type:"text",value:n.newVenueRequest,onChange:e=>s({...n,newVenueRequest:e.target.value}),placeholder:"√ñrn: X Restoranƒ±, Y Kafe...",style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"10px",color:"#fff",fontSize:"14px"}})]}),(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#ccc",fontWeight:600},children:"Kategori"}),(0,t.jsxs)("select",{value:n.type,onChange:e=>s({...n,type:e.target.value}),required:!0,style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"10px",color:"#fff",fontSize:"14px"},children:[(0,t.jsx)("option",{value:"",children:"Se√ßiniz"}),(0,t.jsx)("option",{value:"suggestion",children:"üí° √ñneri"}),(0,t.jsx)("option",{value:"complaint",children:"üòû ≈ûikayet"}),(0,t.jsx)("option",{value:"compliment",children:"üòä Te≈üekk√ºr"}),(0,t.jsx)("option",{value:"feature",children:"‚ú® √ñzellik ƒ∞steƒüi"}),(0,t.jsx)("option",{value:"other",children:"üîñ Diƒüer"})]})]}),(0,t.jsxs)("div",{style:{marginBottom:"25px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#ccc",fontWeight:600},children:"Mesajƒ±nƒ±z"}),(0,t.jsx)("textarea",{value:n.content,onChange:e=>s({...n,content:e.target.value}),required:!0,placeholder:"D√º≈ü√ºncelerinizi payla≈üƒ±n...",rows:5,style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"10px",color:"#fff",fontSize:"14px",fontFamily:"inherit",resize:"vertical"}})]}),(0,t.jsx)("button",{type:"submit",disabled:l||"idle"!==d,style:{width:"100%",padding:"14px",background:"success"===d?"linear-gradient(135deg, #27ae60, #2ecc71)":"error"===d?"linear-gradient(135deg, #e74c3c, #c0392b)":l?"#666":"linear-gradient(135deg, #667eea, #764ba2)",color:"#fff",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:700,cursor:l||"idle"!==d?"not-allowed":"pointer",transition:"all 0.3s ease",marginBottom:"10px"},children:"success"===d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("i",{className:"fas fa-heart",style:{marginRight:"8px"}}),"Te≈üekk√ºrler!"]}):"error"===d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("i",{className:"fas fa-exclamation-triangle",style:{marginRight:"8px"}}),"Hata!"]}):l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("i",{className:"fas fa-spinner fa-spin",style:{marginRight:"8px"}}),"G√∂nderiliyor..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("i",{className:"fas fa-paper-plane",style:{marginRight:"8px"}}),"G√∂nder"]})}),(0,t.jsx)("button",{type:"button",onClick:i,style:{width:"100%",padding:"12px",background:"rgba(255, 255, 255, 0.1)",color:"#ccc",border:"none",borderRadius:"10px",fontSize:"14px",fontWeight:600,cursor:"pointer"},children:"ƒ∞ptal"})]})]})}):null}function J(){let[e,i]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{"true"===localStorage.getItem("menupark_emailVerified")&&(localStorage.removeItem("menupark_emailVerified"),i(!0),setTimeout(()=>{i(!1)},2e3))},[]),e)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.default,{id:"9533bfd2df5803e1",children:"@keyframes slideDown{0%{opacity:0;transform:translate(-50%)translateY(-20px)}to{opacity:1;transform:translate(-50%)translateY(0)}}@keyframes slideUp{0%{opacity:1;transform:translate(-50%)translateY(0)}to{opacity:0;transform:translate(-50%)translateY(-20px)}}.email-verified-popup.jsx-9533bfd2df5803e1{color:#fff;z-index:100001;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-radius:12px;align-items:center;gap:12px;padding:20px 40px;font-size:16px;font-weight:600;animation:.3s ease-out slideDown;display:flex;position:fixed;top:20px;left:50%;transform:translate(-50%);box-shadow:0 10px 30px #0000004d}.email-verified-popup.hiding.jsx-9533bfd2df5803e1{animation:.3s ease-out slideUp}"}),(0,t.jsxs)("div",{className:`jsx-9533bfd2df5803e1 email-verified-popup ${!e?"hiding":""}`,children:[(0,t.jsx)("span",{style:{fontSize:"24px"},className:"jsx-9533bfd2df5803e1",children:"‚úì"}),(0,t.jsx)("span",{className:"jsx-9533bfd2df5803e1",children:"Email adresiniz ba≈üarƒ±yla doƒürulandƒ±!"})]})]}):null}function K({isOpen:e,onClose:a,errorMessage:i,remainingSeconds:r,isRegistered:n}){if(!e)return null;let s=Math.floor(r/60),l=r%60,o=s>0?`${s} dakika ${l} saniye`:`${l} saniye`,d=n?null:"üí° √úye olun ve 10 dakikada bir √ßaƒüƒ±rƒ±n!";return(0,t.jsx)("div",{onClick:a,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(5px)",zIndex:1e5,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},children:(0,t.jsxs)("div",{onClick:e=>e.stopPropagation(),style:{background:"linear-gradient(135deg, rgba(255, 152, 0, 0.95) 0%, rgba(251, 140, 0, 0.95) 100%)",color:"white",padding:"30px",borderRadius:"20px",textAlign:"center",fontSize:"15px",fontWeight:500,boxShadow:"0 20px 60px rgba(0, 0, 0, 0.4)",maxWidth:"450px",width:"100%",lineHeight:1.6},children:[(0,t.jsx)("div",{style:{fontSize:"48px",marginBottom:"15px"},children:"‚è∞"}),(0,t.jsx)("div",{style:{fontWeight:700,fontSize:"20px",marginBottom:"15px"},children:"Garson √áaƒüƒ±rma Limiti"}),(0,t.jsx)("div",{style:{marginBottom:"20px",fontSize:"15px",opacity:.95},children:i}),(0,t.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.2)",padding:"15px",borderRadius:"12px",marginBottom:"20px",border:"1px solid rgba(255, 255, 255, 0.3)"},children:[(0,t.jsx)("div",{style:{fontSize:"13px",opacity:.9,marginBottom:"8px"},children:"Kalan S√ºre:"}),(0,t.jsx)("div",{style:{fontSize:"24px",fontWeight:700},children:o})]}),(0,t.jsxs)("div",{style:{paddingTop:"20px",borderTop:"1px solid rgba(255, 255, 255, 0.3)",fontSize:"14px",opacity:.95},children:[(0,t.jsx)("div",{style:{marginBottom:d?"8px":0},children:n?"‚ÑπÔ∏è √úye kullanƒ±cƒ±lar 10 dakikada bir garson √ßaƒüƒ±rabilir":"‚ÑπÔ∏è Misafirler 30 dakikada bir garson √ßaƒüƒ±rabilir"}),d&&(0,t.jsx)("div",{style:{fontWeight:600,fontSize:"15px",marginTop:"8px"},children:d})]}),(0,t.jsx)("button",{onClick:a,style:{marginTop:"25px",width:"100%",padding:"14px",background:"rgba(255, 255, 255, 0.25)",border:"1px solid rgba(255, 255, 255, 0.4)",borderRadius:"12px",color:"#fff",fontSize:"15px",fontWeight:700,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.35)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.25)"},children:"Tamam"})]})})}function V({menuData:e,categoriesData:i,customerLogo:r,backgroundUrl:n,bannerUrl:s,onImagesLoaded:l}){let[o,d]=(0,a.useState)([]),c=(0,a.useRef)(0),p=(0,a.useRef)(0),u=(0,a.useRef)(!1);(0,a.useEffect)(()=>{if(!e)return;let t=new Set;n&&t.add(n),r&&t.add(r),s&&t.add(s),i&&i.forEach(e=>{if(e.picture){let a=e.picture;if(a.startsWith("http://")||a.startsWith("https://"))a.startsWith("http://")&&(a=a.replace("http://","https://"));else{let e=a.startsWith("Uploads/")?a.substring(8):a;a=`https://api.canlimenu.com/Uploads/${e}`}t.add(a)}}),e.menu.forEach(e=>{e.products.forEach(e=>{if(e.picture){let a=e.picture;if(a.startsWith("http://")||a.startsWith("https://"))a.startsWith("http://")&&(a=a.replace("http://","https://"));else{let e=a.startsWith("Uploads/")?a.substring(8):a;a=`https://api.canlimenu.com/Uploads/${e}`}t.add(a)}})});let a=Array.from(t);d(a),p.current=a.length,c.current=0,u.current=!1},[e,i,r,n,s]);let x=()=>{c.current++,c.current>=p.current&&!u.current&&l&&(u.current=!0,l())};return 0===o.length?null:(0,t.jsx)("div",{id:"imagePreloadContainer",style:{position:"absolute",width:0,height:0,overflow:"hidden",opacity:0,pointerEvents:"none"},"aria-hidden":"true",children:o.map((e,a)=>(0,t.jsx)("img",{src:e,alt:`Preload ${a}`,loading:"eager",fetchPriority:a<50?"high":"auto",decoding:"async",onLoad:x,onError:()=>{c.current++,c.current>=p.current&&!u.current&&l&&(u.current=!0,l())},style:{display:"none"}},`preload-${a}`))})}function Q(){let e=(0,i.useParams)(),u=(0,i.useSearchParams)(),g=e.code,b=u.get("table"),y=u.get("session"),j=u.get("joinRoom"),v=u.get("joinBackgammon"),{isTableMode:k,isSelfService:w,canCallWaiter:C,tableId:T}=(0,n.useTable)(),{language:B}=(0,s.useLanguage)(),{currentUser:E}=(0,l.useAuth)(),{setMenuData:$,setCustomerData:L,setCategoriesData:W,setCustomerCode:A,setTableId:D,tableId:M,setProductTokenSettings:q,setUserTokenBalance:F,isGameModalOpen:O,activeGame:Q,openGameModal:_,closeProductListModal:Y,closeProductDetailModal:Z,closeGameModal:ee,setPendingJoinRoomId:et,isProfileOpen:ea,openProfile:ei,closeProfile:er}=(0,r.useMenu)();(0,a.useEffect)(()=>{},[k,w,C,T,b,y]);let[en,es]=(0,a.useState)(!0),[el,eo]=(0,a.useState)(!1),[ed,ec]=(0,a.useState)(null),[ep,eu]=(0,a.useState)(null),[ex,em]=(0,a.useState)([]),[eg,eh]=(0,a.useState)(!0),[ef,eb]=(0,a.useState)(!1),[ey,ej]=(0,a.useState)(null),[ev,ek]=(0,a.useState)(!1),[ew,eS]=(0,a.useState)(!1),[eN,ez]=(0,a.useState)(!1),[eC,eI]=(0,a.useState)({isOpen:!1,errorMessage:"",remainingSeconds:0,isRegistered:!1}),eT=(0,a.useCallback)(e=>{let t=localStorage.getItem("userData");if(t){let a=JSON.parse(t),i=a.id||a.userId||a.Id;i&&i===e.userId&&(F(e.currentTokens),e.message&&window.dispatchEvent(new CustomEvent("tokenBalanceUpdated",{detail:{balance:e.currentTokens,message:e.message}})))}},[F]);!function({customerId:e,onTokenBalanceUpdated:t,enabled:i=!0}){let r=(0,a.useRef)(null),n=(0,a.useRef)(void 0);(0,a.useEffect)(()=>{if(!i)return;if(r.current?.state===o.HubConnectionState.Connected)return void console.log("üîó SignalR: Already connected");let a=new d.HubConnectionBuilder().withUrl("https://api.canlimenu.com/apimenuhub",{transport:c.HttpTransportType.WebSockets|c.HttpTransportType.LongPolling}).withAutomaticReconnect([0,2e3,1e4,3e4]).configureLogging(p.LogLevel.Error).build();return r.current=a,a.onclose(()=>{console.log("üîå SignalR: Connection closed")}),a.onreconnecting(e=>{console.log("üîÑ SignalR: Reconnecting...",e)}),a.onreconnected(t=>{console.log("‚úÖ SignalR: Reconnected",t),e&&e>0&&a.invoke("JoinCustomerGroup",e).catch(e=>console.error("‚ùå SignalR: JoinCustomerGroup failed on reconnect",e))}),a.on("AdminApproveOrder",()=>{}),a.on("OrderStatusUpdate",()=>{}),a.on("OrderStatusChanged",()=>{}),a.on("OrderProcessResult",()=>{}),a.on("NewOrder",()=>{}),t&&a.on("TokenBalanceUpdated",e=>{console.log("ü™ô SignalR: TokenBalanceUpdated",e),t(e)}),a.start().then(()=>{if(console.log("‚úÖ SignalR: Connected successfully"),e&&e>0)return a.invoke("JoinCustomerGroup",e)}).then(()=>{e&&e>0&&console.log(`‚úÖ SignalR: Joined customer group ${e}`)}).catch(e=>{console.error("‚ùå SignalR: Connection failed",e)}),()=>{n.current&&clearTimeout(n.current),r.current&&r.current.stop().then(()=>console.log("üîå SignalR: Disconnected")).catch(e=>console.error("‚ùå SignalR: Disconnect error",e))}},[e,i,t]),r.current}({customerId:ep?.customer.id,onTokenBalanceUpdated:eT,enabled:!!ep?.customer.id}),(0,a.useEffect)(()=>{b&&D(b)},[b,D]),(0,a.useEffect)(()=>{async function e(){try{eh(!0),A(g);let e=await fetch(`/api/customer/${g}`);if(!e.ok)throw Error("M√º≈üteri bilgisi y√ºklenemedi");let t=await e.json();if(eu(t),L(t),eh(!1),b&&t.customer.id){let e=await fetch(`/api/tables/${t.customer.id}`);if(e.ok){let t=(await e.json()).find(e=>e.secureId?.toLowerCase()===b.toLowerCase()||e.name?.toLowerCase()===b.toLowerCase());if(!t){window.location.href=`/${g}`;return}let a=t.name||t.tableName||b;localStorage.setItem("currentTableName",a)}}eb(!0);let[a,i]=await Promise.all([fetch(`/api/menu/${g}`),fetch(`/api/categories/${g}`)]);if(!a.ok||!i.ok)throw Error("Veri y√ºklenemedi");let[r,n]=await Promise.all([a.json(),i.json()]);if(ec(r),em(n),$(r),W(n),b)try{let e=await fetch(`/api/token-settings/${g}`);if(e.ok){let t=await e.json(),a={};t.settings.forEach(e=>{e.productId&&(a[e.productId]=e),e.sambaProductId&&(a[e.sambaProductId]=e)}),q(a)}}catch(e){console.error("Token settings load error:",e)}eb(!1),ej(null)}catch(e){console.error("Data fetch error:",e),ej(e instanceof Error?e.message:"Bir hata olu≈ütu"),eh(!1),eb(!1)}}g&&e()},[g,$]),(0,a.useEffect)(()=>{!ef&&ep?.customer.showBanner&&ep?.customer.banner&&eo(!0)},[ef,ep]),(0,a.useEffect)(()=>{if(en||eg||!j)return;et(j),_("okey");let e=new URL(window.location.href);e.searchParams.delete("joinRoom"),window.history.replaceState({},"",e.toString())},[en,eg,j,E,et,ei,_]),(0,a.useEffect)(()=>{if(en||eg||!v)return;et(v),_("backgammon");let e=new URL(window.location.href);e.searchParams.delete("joinBackgammon"),window.history.replaceState({},"",e.toString())},[en,eg,v,E,et,ei,_]);let eR=async()=>{if(!M)return void alert("Masa bilgisi bulunamadƒ±. L√ºtfen QR kodu tekrar okutun.");try{let e=localStorage.getItem("userData"),t=e?JSON.parse(e).id:null,a=await fetch("/api/waiter-call",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({CustomerCode:g,TableName:M,Message:"Garson √ßaƒürƒ±sƒ±",CallType:"General",EndUserId:t})}),i=await a.json();if(a.ok&&i.success)eB();else if(i.isRateLimited)eE(i.error,i.remainingSeconds,i.isRegistered||!1);else throw Error(i.error||"Garson √ßaƒüƒ±rma i≈ülemi ba≈üarƒ±sƒ±z oldu.")}catch(e){console.error("Garson √ßaƒüƒ±rma hatasƒ±:",e),alert(e instanceof Error?e.message:"Garson √ßaƒüƒ±rma i≈ülemi ba≈üarƒ±sƒ±z oldu. L√ºtfen tekrar deneyin.")}},eB=()=>{let e=document.createElement("div");e.innerHTML=`
      <div style="
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(76, 175, 80, 0.95);
        color: white;
        padding: 20px 30px;
        border-radius: 15px;
        text-align: center;
        z-index: 10000;
        font-size: 16px;
        font-weight: 600;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      ">
        <div style="font-size: 24px; margin-bottom: 10px;">‚úÖ</div>
        <div>Garson \xe7aƒüƒ±rƒ±ldƒ±!</div>
        <div style="font-size: 14px; opacity: 0.9; margin-top: 5px;">En kƒ±sa s\xfcrede yanƒ±nƒ±zda olacak</div>
      </div>
    `,document.body.appendChild(e),setTimeout(()=>{document.body.contains(e)&&document.body.removeChild(e)},3e3)},eE=(e,t,a)=>{eI({isOpen:!0,errorMessage:e,remainingSeconds:t,isRegistered:a})};if(eg||ef){let e=ep?.customer.logo?ep.customer.logo.startsWith("http")?ep.customer.logo.replace("http://","https://"):`https://api.canlimenu.com/Uploads/${ep.customer.logo.replace("Uploads/","")}`:void 0,a=ep?.customer.webBackground?ep.customer.webBackground.startsWith("http")?ep.customer.webBackground.replace("http://","https://"):`https://api.canlimenu.com/Uploads/${ep.customer.webBackground.replace("Uploads/","")}`:void 0;return(0,t.jsx)(h,{logoUrl:e,backgroundUrl:a})}if(ey||!ed)return(0,t.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:(0,t.jsxs)("div",{style:{color:"white",textAlign:"center"},children:[(0,t.jsx)("h1",{style:{fontSize:"24px",marginBottom:"10px"},children:"‚ùå Hata"}),(0,t.jsx)("p",{children:ey||"Men√º bulunamadƒ±"})]})});let e$=ed.menu||[],eL=ep?.customer.logo?ep.customer.logo.startsWith("http")?ep.customer.logo.replace("http://","https://"):`https://api.canlimenu.com/Uploads/${ep.customer.logo.replace("Uploads/","")}`:ed.customerLogo?ed.customerLogo.startsWith("http")?ed.customerLogo.replace("http://","https://"):`https://api.canlimenu.com/Uploads/${ed.customerLogo.replace("Uploads/","")}`:void 0,eW=ep?.customer.webBackground?ep.customer.webBackground.startsWith("http")?ep.customer.webBackground.replace("http://","https://"):`https://api.canlimenu.com/Uploads/${ep.customer.webBackground.replace("Uploads/","")}`:void 0,eA=ep?.customer.showBanner&&ep?.customer.banner?ep.customer.banner.startsWith("http")?ep.customer.banner.replace("http://","https://"):`https://api.canlimenu.com/Uploads/${ep.customer.banner.replace("Uploads/","")}`:void 0,eD=eW?{backgroundImage:`url('${eW}')`,backgroundPosition:"center center",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed"}:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},eM=e$.map(e=>{let t=ex.find(t=>t.category.sambaId===e.sambaId),a="";if(t&&t.picture){let e=t.picture;if(e.startsWith("http"))a=e.replace("http://","https://");else{let t=e.startsWith("Uploads/")?e.substring(8):e;a=`https://api.canlimenu.com/Uploads/${t}`}}else a=eL||'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="300" height="300"%3E%3Crect fill="%23667eea" width="300" height="300"/%3E%3C/svg%3E';let i=t?.category?.titleEnglish||"";return{id:e.sambaId,name:e.title,nameEn:i,image:a}});return(0,t.jsxs)(t.Fragment,{children:[en&&eL&&(0,t.jsx)(x,{logoUrl:eL,backgroundUrl:eW,onComplete:()=>{es(!1)}}),eA&&(0,t.jsx)(m,{bannerUrl:eA,isOpen:el,onClose:()=>{eo(!1)}}),(0,t.jsx)(V,{menuData:ed,categoriesData:ex,customerLogo:eL,backgroundUrl:eW,bannerUrl:eA,onImagesLoaded:()=>{}}),(0,t.jsxs)("div",{className:"main-container",style:{...eD,minHeight:"100vh"},children:[(0,t.jsx)(f,{}),(0,t.jsx)(S,{customerCode:g,fallbackLogoUrl:eL}),(0,t.jsx)(N,{categories:eM})]}),"okey"!==Q&&(0,t.jsx)(z,{onProfileClick:()=>{ek(!1),eS(!1),ea?er():ei()},onAIClick:()=>{ek(!1),er(),eS(e=>!e)},onCartClick:()=>{er(),eS(!1),ek(e=>!e)},onWaiterCall:eR,onGameClick:()=>{O?ee():(ek(!1),er(),eS(!1),_())},onContactClick:()=>{ep?.customer.phone&&(window.location.href=`tel:${ep.customer.phone}`)},onSuggestionClick:()=>ez(!0),showAIChat:ep?.customer.showAIChat??!0,showCart:k,showWaiterCall:C,tableId:M||void 0,phone:ep?.customer.phone,cartItemCount:0}),(0,t.jsx)(I,{}),(0,t.jsx)(R,{}),(0,t.jsx)(U,{}),k&&(0,t.jsx)(P,{isOpen:ev,onClose:()=>ek(!1),tableId:M||"",customerCode:g}),(0,t.jsx)(H,{isOpen:ea,onClose:er,customerCode:g}),(0,t.jsx)(G,{isOpen:ew,onClose:()=>eS(!1),customerCode:g,menuData:ed?{customerCode:g,customerTitle:ed.customerTitle,categories:ed.menu.map(e=>({title:e.title,sambaId:e.sambaId.toString(),products:e.products.map(e=>({title:e.title,price:e.price,detail:e.detail||e.description||""}))}))}:void 0}),(0,t.jsx)(X,{isOpen:eN,onClose:()=>ez(!1),venueCode:g}),(0,t.jsx)(J,{}),(0,t.jsx)(K,{isOpen:eC.isOpen,onClose:()=>eI({...eC,isOpen:!1}),errorMessage:eC.errorMessage,remainingSeconds:eC.remainingSeconds,isRegistered:eC.isRegistered})]})}e.s(["default",()=>Q],78844)}]);